[{"content":"\u003cp\u003e\u003ca href=\"https://www.amazon.com/Simply-Said-Communicating-Better-Beyond/dp/1119285283\"\u003e\u0026ldquo;Simply Said\u0026rdquo;\u003c/a\u003e is the best communication book I\u0026rsquo;ve read recently.\nI discovered it thanks to Jordan Cutler (who runs an \u003ca href=\"https://read.highgrowthengineer.com/\"\u003eamazing tech newsletter\u003c/a\u003e) and at first, I considered it a standard communications book. Things like \u0026ldquo;listen to others,\u0026rdquo; \u0026ldquo;be positive,\u0026rdquo; blah blah.\u003c/p\u003e\n\u003cp\u003eI was wrong. \u003cstrong\u003e\u0026ldquo;Simply Said\u0026rdquo; is much more than that\u003c/strong\u003e.\nThat\u0026rsquo;s why I condensed most of its wisdom into this blog post, and I hope it will inspire you to read it as well.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s the first book I\u0026rsquo;ve found that takes a real deep dive into complex communication contexts, from giving a speech to thousands of people to making a toast to your lifelong buddy, and every-single-time it gives solid tips. The author, \u003ca href=\"https://www.jaysullivanbooks.com/\"\u003eJay Sullivan\u003c/a\u003e, runs a consultancy firm to train executives in improving their communication skills, and you can see the pragmatism and real-life stories shining through his words. This guy knows his stuff.\u003c/p\u003e\n\u003cp\u003eWriting this kind of post takes a while. I have to skim through all the notes I scribbled down, then rephrase them in a way that makes sense for someone who isn\u0026rsquo;t reading the book. If you find some parts confusing or badly written, please send me a message so I can learn from your feedback!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eLegend\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003e‚≠ê Key chapter\u003c/p\u003e\n\u003cp\u003e‚ùì Less impactful chapter\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"key-takeaways\"\u003eKey takeaways\u003c/h1\u003e\n\u003cp\u003eThe main takeaway of the book is \u003cstrong\u003e\u0026ldquo;Focus on others\u0026rdquo;\u003c/strong\u003e. Be ready to read these words dozens of times.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s because people don\u0026rsquo;t care about YOU; they care about themselves.\u003c/p\u003e\n\u003cp\u003eSo, when talking to them, you need to explain why this benefits them and why they should invest their time in listening to you. Sullivan is quite repetitive on this, but he always provides practical examples to highlight the importance of this principle.\u003c/p\u003e\n\u003cp\u003e\u0026ldquo;Simply Said\u0026rdquo; is divided into five parts, each with its own key focus:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePart 1 covers Sullivan‚Äôs general tips for making presentations that grab‚Äîand keep‚Äîthe audience‚Äôs attention\u003c/li\u003e\n\u003cli\u003ePart 2 discusses his tips for effective oral communication, including how to apply these ideas to different situations\u003c/li\u003e\n\u003cli\u003ePart 3 focuses on improving your written communication in documents and emails\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe final chapters were a bit outside of my comfort zone because I\u0026rsquo;m not a manager. I still found a lot of useful information (though I took fewer notes):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePart 4: interactions in meetings or in group activities\u003c/li\u003e\n\u003cli\u003ePart 5: leadership advices and long-term planning\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://m.media-amazon.com/images/S/aplus-media-library-service-media/69ed593b-76f8-4c66-9d94-e137c96e106f.__CR1,0,2997,927_PT0_SX970_V1___.jpg\" alt=\"cover\"\u003e\u003c/p\u003e\n\u003ch1 id=\"-section-1-your-content\"\u003eüìå Section 1: Your Content\u003c/h1\u003e\n\u003ch2 id=\"1-conveying-a-clear-message\"\u003e1. Conveying a Clear Message\u003c/h2\u003e\n\u003cp\u003eThe first chapter introduces the basics for planning a discussion or a talk. Start with the main message, because \u003cstrong\u003emost of the time people don\u0026rsquo;t even know what they want to achieve\u003c/strong\u003e. Whenever you are participating in a discussion, craft a clear message that you want to stick in your interlocutor\u0026rsquo;s mind. One simple message that respects these rules:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eShort (ideally 10 words long)\u003c/li\u003e\n\u003cli\u003eSimple Language\u003c/li\u003e\n\u003cli\u003eFocused on the needs of the audience: what they need to know and do with this information?\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBonus tips:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRemember, it\u0026rsquo;s about them, not you. When beginning a conversation, start with what\u0026rsquo;s in front of you for any topic to discuss, and continue involving the other person\u003c/li\u003e\n\u003cli\u003eWhen people ask what you do for a living, don\u0026rsquo;t just state your title. Instead of saying \u0026ldquo;BI Analyst,\u0026rdquo; say \u0026ldquo;I design and build strategic reports\u0026rdquo;\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-telling-engaging-stories\"\u003e2. Telling Engaging Stories\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003ePeople love stories\u003c/strong\u003e; stories are the things that get stuck in our minds because it\u0026rsquo;s a pattern our brain has learned to follow. To convey our messages, telling them as a story will make them 10, 100 times more powerful. Storytelling is a powerful weapon at our disposal.\u003c/p\u003e\n\u003cp\u003eSullivan provides examples of successful storytelling, starting from the fact that every story has a beginning, middle, and end.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eBeginning: The setup, such as \u0026ldquo;Last week I was in the office\u0026rdquo;‚Äîwhere and when the action happens\u003c/li\u003e\n\u003cli\u003eMiddle: The struggle, building tension. Only include the crucial details\u003c/li\u003e\n\u003cli\u003eEnd: The final takeaway. It should be a consequence of the middle section; you can even highlight that the point of the story is this one\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSome ground rules:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDo not go negative\u003c/li\u003e\n\u003cli\u003eDo not make fun of other people\u003c/li\u003e\n\u003cli\u003eDon\u0026rsquo;t try to be funny unless you are confident in your skills\u003c/li\u003e\n\u003cli\u003eDon\u0026rsquo;t exaggerate\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"3-organizing-your-content\"\u003e3. Organizing Your Content\u003c/h2\u003e\n\u003cp\u003eNow that you have the message, you need to plan your strategy. There are three aspects to consider:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe audience\u0026rsquo;s needs\u003c/li\u003e\n\u003cli\u003eThe key message (see Chapter 1)\u003c/li\u003e\n\u003cli\u003eYour purpose\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe first point is crucial for getting the attention of the listener. People don\u0026rsquo;t care about you at first, so \u003cstrong\u003eyou need to immediately give them what they are here for\u003c/strong\u003e.\nExample: you have to talk with your boss. You should begin with what you know will set him in the right mood, e.g., \u0026ldquo;Everything is on track\u0026rdquo; or \u0026ldquo;We have a problem.\u0026rdquo; Set the conversation immediately, then proceed with your message.\u003c/p\u003e\n\u003cp\u003eFor longer discussions, such as a presentation, Sullivan provides a couple of structural architectures:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eInformative Roadmap: A classic structure with Context, Agenda, Topic 1, 2, 3, Final Summary, and Next Steps.\u003c/li\u003e\n\u003cli\u003ePersuasive Roadmap: Used for convincing someone, it uses Context, Recommendation (key message first!), Benefit, Prove Benefit 1, 2, 3, Final Summary, and Next Steps.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTip: When creating the presentation, ocus on the key message first, not the opening. That\u0026rsquo;s what the presentation is all about and will help overcome writer\u0026rsquo;s block.\u003c/p\u003e\n\u003ch1 id=\"-section-2-oral-communication-skills\"\u003eüó£ Section 2: Oral Communication Skills\u003c/h1\u003e\n\u003ch2 id=\"4-making-the-most-of-your-body-language-\"\u003e4. Making the Most of Your Body Language (‚≠ê)\u003c/h2\u003e\n\u003cp\u003eMost people are afraid of \u0026ldquo;public speaking,\u0026rdquo; but \u003cstrong\u003eevery conversation is public\u003c/strong\u003e! We always talk with someone. The secret of this book is to \u003cstrong\u003etreat public speaking just like a normal conversation between you and someone else\u003c/strong\u003e, and you typically don\u0026rsquo;t have fear with that.\u003c/p\u003e\n\u003cp\u003eThe key is to be PRESENT to your audience: people who listen to you want to know that they have your attention. So, first of all, focus on THEM and don\u0026rsquo;t look distracted or disconnected. How?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eEye Contact\u003c/strong\u003e\nDo not scan your audience; your brain can\u0026rsquo;t process so much information while talking, and you risk panicking or getting confused.\n\u003cstrong\u003e‚≠ê Make eye contact with one person at a time for a complete sentence, about 5-7 seconds\u003c/strong\u003e. It takes less energy to be nice to everyone than to figure out who you need to be nice to. So, looking at all the people in the room in the eye, one by one, slowly, will have several benefits. It will calm you, help avoid distractions, and build rapport with the audience as they see you are interested in them.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVoice\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSlow Down\u003c/strong\u003e: When nervous, people speak faster, making the audience feel overwhelmed\u003c/li\u003e\n\u003cli\u003eVolume: Your goal is to be heard by people even at the back of the room. Ask for feedback about the volume\u003c/li\u003e\n\u003cli\u003eTone: Smile; your tone will sound more optimistic, even on the phone\u003c/li\u003e\n\u003cli\u003eInflection: Your voice should emphasize the important ideas you want to convey. Avoid the up-speak tone that sounds like a question. Use sharp, clear, definitive hand gestures to express yourself\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBody Language\u003c/strong\u003e:\n\u003cul\u003e\n\u003cli\u003eHands: Keep them steady. If you keep them moving too much, you will look nervous or distracted. If you have a PC or notebook, keep your hands there. Leverage gestures: you can almost never be too distracting with gestures; they are great ways to convey attention\u003c/li\u003e\n\u003cli\u003eFace: \u003cstrong\u003eSMILE\u003c/strong\u003e. You should look like you want to meet your audience\u003c/li\u003e\n\u003cli\u003eStance: Keep a neutral, balanced stance. Avoid closed body language (negative feeling). When seated, your energy should be directed across the table, so don\u0026rsquo;t sit all the way back in the chair. You risk being misperceived as disengaged and bored. Keep the spine vertical\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"5-listening-to-understand-\"\u003e5. Listening to Understand (‚≠ê)\u003c/h2\u003e\n\u003cp\u003eAgain, the focus is on others, not us. How can we focus? By listening!\n\u003cstrong\u003eListening well takes energy\u003c/strong\u003e, and we need to show the counterpart that we are attentive and care about what they say. Being a good listener is ranked as the number one skill for a top leader. Eye contact, taking notes, asking probing questions, and even the standard \u0026ldquo;mhh mhh\u0026rdquo; are all body language cues of someone interested in the conversation.\u003c/p\u003e\n\u003cp\u003eBut listening is not only for others; it\u0026rsquo;s also for you. \u003cstrong\u003eBy listening, and generally asking things, you gather information you didn\u0026rsquo;t even know you didn\u0026rsquo;t know\u003c/strong\u003e, which is, like, the point of meeting people. To achieve this, leverage open-ended questions like \u0026ldquo;How\u0026rdquo; and \u0026ldquo;Why\u0026rdquo; that prompt the other person to reflect and give a complex response, or closed-ended questions that require just a yes/no and provide a precise response. Usually, using closed-ended questions is a closing technique in sales situations, but be cautious not to self-censor with questions like \u0026ldquo;Any other challenges with this issue?\u0026rdquo; It\u0026rsquo;s easy for someone to just say no. Use the open-ended alternative like \u0026ldquo;What other challenges do you see?\u0026rdquo; This helps you drill down until you reach what you didn\u0026rsquo;t even know you didn\u0026rsquo;t know.\u003c/p\u003e\n\u003cp\u003eAnother important point is that our job is to help people, so after listening to them, we need to ensure we are truly helpful. ‚≠ê Here are three question to ask:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eHow can I help?\u003c/strong\u003e The basic way to show you listened and want to give support\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWhat would be most helpful to you?\u003c/strong\u003e An effective way to receive genuine and precise feedback from the other person\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWould it be helpful if I\u0026hellip;?\u003c/strong\u003e If someone is lost, this can give them clues about what could be the next step\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWe all make assumptions, so to confirm what you have heard, restate the concept with an introductory phrase such as \u0026ldquo;So, if I\u0026rsquo;m hearing you correctly\u0026hellip;\u0026rdquo; or \u0026ldquo;I think you\u0026rsquo;ve shared\u0026hellip;\u0026rdquo; followed by a restatement of the point made and a confirming question like \u0026ldquo;Am I right?\u0026rdquo; This will avoid confusion.\u003c/p\u003e\n\u003ch2 id=\"6-delivering-from-notes-and-visuals-\"\u003e6. Delivering from Notes and Visuals (‚≠ê)\u003c/h2\u003e\n\u003cp\u003eWhen using notes or a presentation, your main job is to make it effortless for your audience to receive the information. \u003cstrong\u003eThe strategy to keep attention high is always eye contact\u003c/strong\u003e, so you can follow this pattern:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSee it: Look at the bullet point on the slide and read it all\u003c/li\u003e\n\u003cli\u003eSave it: Remember the content as you look up from the notes\u003c/li\u003e\n\u003cli\u003eSay it: Say the point while looking at an individual in the audience\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e‚≠ê The Arc of Silence\u003c/strong\u003e: The arc is the distance from the eyes of someone in the audience you are targeting back to the point you are reading and then to another pair of eyes. Don\u0026rsquo;t talk during that arc. All sound is delivered to a pair of eyes.\u003c/p\u003e\n\u003cp\u003eThis has the benefit of maintaining power by coming across as comfortable with pauses, giving the audience time to digest what you have said, and then delivering your most important information with impact.\u003c/p\u003e\n\u003cp\u003ePay attention to your posture: Use gestures to directly point to your points, and stand with your back parallel to the back wall of the room to keep all attention on the audience. Keep your feet planted in one spot; only pros walk around the stage.\u003c/p\u003e\n\u003cp\u003eAbout slides: The trick Sullivan suggests is to read what\u0026rsquo;s on the slide to the audience, and then add what\u0026rsquo;s not on each point. If it\u0026rsquo;s a list of three bullet points, use the Arc of Silence, read each point, add more context, go to the second point, add second context, and so on. You need to cover everything, and keep all the points simple. Reading every word on the slide is usually a bad sign, but if you do it like this, you will fix everything in the memory of the audience as they have two inputs: voice and visual, saying the same thing.\u003c/p\u003e\n\u003cp\u003eBalancing your slide deck can be challenging: opt for a streamlined presentation and provide a more detailed slide deck as a handout afterward. You can\u0026rsquo;t have a highly detailed document and a compelling presentation simultaneously; it\u0026rsquo;s essential to separate the two.\u003c/p\u003e\n\u003ch2 id=\"7-responding-to-questions-\"\u003e7. Responding to Questions (‚ùì)\u003c/h2\u003e\n\u003cp\u003eWhen someone asks a question, they are revealing something about themselves and their perspective on the topic. It takes courage to do this, especially in large audiences. \u003cstrong\u003eShow respect\u003c/strong\u003e and follow this four-step process to respond:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eListen to the entire question and allow the person to finish their question without interrupting\u003c/li\u003e\n\u003cli\u003eGain time to think: Maintain eye contact but take a moment to gather your thoughts. You can buy time by repeating the question or using a lead-in like \u0026ldquo;Great question\u0026rdquo; or - \u0026ldquo;Interesting.\u0026rdquo; Avoid this if the question is an accusation or very direct, as it may seem insincere\u003c/li\u003e\n\u003cli\u003eAnswer and reaffirm the main point\u003c/li\u003e\n\u003cli\u003eAsk for the next question and conclude with \u0026ldquo;Any other questions?\u0026rdquo;\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"-section-3-your-written-communication-skills\"\u003e‚úç Section 3: Your Written Communication Skills\u003c/h1\u003e\n\u003ch2 id=\"8-editing-for-clarity\"\u003e8. Editing for Clarity\u003c/h2\u003e\n\u003cp\u003eAlways ask yourself:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhy is the reader reading this document?\u003c/li\u003e\n\u003cli\u003eWhat does the reader need to do with the information I\u0026rsquo;m sharing?\u003c/li\u003e\n\u003cli\u003eHow can I make it effortless for the reader to get the main message?\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIt\u0026rsquo;s an art: \u003cstrong\u003eget straight to the point\u003c/strong\u003e. Eliminate unnecessary words, such as \u0026ldquo;currently\u0026rdquo; or \u0026ldquo;as previously mentioned,\u0026rdquo; which do not add value to a sentence.\u003c/p\u003e\n\u003cp\u003eGeneral rule: each sentence should contain one idea. Then, identify the key action in the sentence and make it the verb. For instance, if the sentence uses the verb \u0026ldquo;be\u0026rdquo; and it\u0026rsquo;s not a state, find a verb to convey the action. For example, \u0026ldquo;he made a statement that he was quitting the race\u0026rdquo; becomes \u0026ldquo;he stated that he was quitting the race.\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eRegarding active or passive voice: generally, use the active form because it is more engaging, unless for special cases where you want to soften accountability (e.g., \u0026ldquo;your request has been denied\u0026rdquo; is better than \u0026ldquo;we denied you permission\u0026rdquo;) or establish a sense of high authority (e.g., rules).\u003c/p\u003e\n\u003ch2 id=\"9-structuring-your-documents-\"\u003e9. Structuring your Documents (‚ùì)\u003c/h2\u003e\n\u003cp\u003eWhy are you writing this document? Focus on \u003cstrong\u003ethe benefits of following your recommended course of action\u003c/strong\u003e. You might have two different purposes, each with their corresponding document structure:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePersuading -\u0026gt; State the Main Message, Provide Background (only as needed), Expand on the Message, Conclude Quickly\u003c/li\u003e\n\u003cli\u003eInforming: -\u0026gt; Introduce the Subject, State Topics, Explain Each Topic in Detail, Summarize\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThese frameworks are in line with the concepts discussed in Chapter 3.\u003c/p\u003e\n\u003ch2 id=\"10-creating-reader-friendly-documents\"\u003e10. Creating Reader-Friendly Documents\u003c/h2\u003e\n\u003cp\u003eBeyond the structure, here are miscellaneous tips to make your documents more reader-friendly:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePronouns: If you notice many sentences starting with \u0026ldquo;I,\u0026rdquo; you might be making the document more about yourself than the reader\u003c/li\u003e\n\u003cli\u003eLimit sentences to a maximum of 17 words. Information becomes harder to process beyond this length\u003c/li\u003e\n\u003cli\u003eVary sentence lengths. It\u0026rsquo;s okay if a sentence stretches to 20 words; just ensure the next paragraph is shorter, ideally under 10 words\u003c/li\u003e\n\u003cli\u003eAvoid overwhelming the reader. Structure your document into smaller, digestible chunks\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"11-writing-emails-that-resonate-\"\u003e11. Writing Emails That Resonate (‚ùì)\u003c/h2\u003e\n\u003cp\u003eSome email tips that can be useful:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eStructure your email starting from the title. It should clearly convey the email\u0026rsquo;s topic, like \u0026ldquo;Alpha Proposal for Compliance,\u0026rdquo; instead of a generic \u0026ldquo;Follow Up Call\u0026rdquo;\u003c/li\u003e\n\u003cli\u003eBegin with the recipient\u0026rsquo;s name, e.g., \u0026ldquo;Dear Lisa,\u0026rdquo; to personalize the communication and better plan the email\u0026rsquo;s structure based on the recipient\u0026rsquo;s needs. Different individuals have different expectations regarding emails\u003c/li\u003e\n\u003cli\u003eManage expectations by clearly stating any deadlines and mentioning all relevant recipients if the email is addressed to multiple people\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"-section-4-your-interactions\"\u003eü§ù Section 4: Your Interactions\u003c/h1\u003e\n\u003ch2 id=\"12-conducting-effective-client-meetings-\"\u003e12. Conducting Effective Client Meetings (‚ùì)\u003c/h2\u003e\n\u003cp\u003eYour primary objective should always be \u003cstrong\u003eto learn\u003c/strong\u003e. Understand the client\u0026rsquo;s concerns deeply. Your sole agenda is to align with the client\u0026rsquo;s agenda. Ultimately, your business exists to solve other people\u0026rsquo;s problems. Therefore, you should be eager to hear what\u0026rsquo;s troubling them and respond with, \u0026ldquo;Let\u0026rsquo;s work on this and get it done.\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eIn a meeting, start by setting a positive tone. Confirm the meeting\u0026rsquo;s goal, gather necessary information (especially what you didn\u0026rsquo;t know you didn\u0026rsquo;t know, as discussed in Chapter 5), discuss the information and the benefits of your proposal, and establish action steps. This is a standard meeting structure.\u003c/p\u003e\n\u003cp\u003eTip: Take meeting notes or ensure someone shares them afterward to maintain focus and ensure nothing is forgotten.\u003c/p\u003e\n\u003ch2 id=\"13-delegating-successfully\"\u003e13. Delegating Successfully\u003c/h2\u003e\n\u003cp\u003eThe most significant step in our growth is transitioning from managing ourselves to managing others. With this shift, we not only handle our own deadlines and challenges but also multiply them for everyone under our supervision. When delegating tasks, \u003cstrong\u003eit\u0026rsquo;s crucial to consider what the other person needs to deliver what you want\u003c/strong\u003e, rather than solely focusing on your own needs. Here are 6 steps for successful delegation:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eState the Big Picture: let the person who is working on an item know how important it will be. We all want our work to matter\u003c/li\u003e\n\u003cli\u003eDetermine Expectations: talk with the other person, clearly state what you want her to do\u003c/li\u003e\n\u003cli\u003eExplain the Role of Others: given an overview of the stakeholders and the people that can support the person\u003c/li\u003e\n\u003cli\u003eExplain the Reasons for Selecting This individual: including the benefits to him or her\u003c/li\u003e\n\u003cli\u003eExplain the Next Steps: how to get started and the overall initial structure of things to do\u003c/li\u003e\n\u003cli\u003eSummarize What you Want the Person to Do\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"14-sharing-meaningful-feedback-\"\u003e14. Sharing Meaningful Feedback (‚ùì)\u003c/h2\u003e\n\u003cp\u003eEvery time we provide feedback on someone\u0026rsquo;s performance, we not only have an opportunity to foster their professional development but also to build a relationship that communicates \u0026ldquo;my job is to help you grow\u0026rdquo;. The tone of our feedback conversations conveys this message clearly. A common struggle for many professionals is the lack of constructive feedback. Be the person who provides what they need; \u003cstrong\u003ewell-delivered feedback is always appreciated when approached correctly\u003c/strong\u003e. Personally, this chapter could have explored deeper effective feedback examples rather than offering a generic framework:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eStart by addressing a specific issue\u003c/li\u003e\n\u003cli\u003eSeek permission before providing feedback\u003c/li\u003e\n\u003cli\u003eProvide context by painting the big picture\u003c/li\u003e\n\u003cli\u003eIdentify successes and challenges\u003c/li\u003e\n\u003cli\u003eCollaborate on solving the problem\u003c/li\u003e\n\u003cli\u003eEstablish clea\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"15-giving-toasts\"\u003e15. Giving Toasts\u003c/h2\u003e\n\u003cp\u003eVery underrated chapter, but a toast is a unique setting. You are speaking in from of a crowd, but \u003cstrong\u003ethe real audience is only a person\u003c/strong\u003e. You are telling the room the value he has brought there. Some simple rules:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDon\u0026rsquo;t fake it if you don\u0026rsquo;t know the person very well, nobody expects that. Just thank the person for his or her service\u003c/li\u003e\n\u003cli\u003eDon\u0026rsquo;t talk about you.\u003c/li\u003e\n\u003cli\u003eAvoid inside jokes if less than half of the audience can get them\u003c/li\u003e\n\u003cli\u003eNever go negative and avoid sarcasm\u003c/li\u003e\n\u003cli\u003eRemember that the theme is always how this person has impacted organization and their people\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"16-handling-introductions-\"\u003e16. Handling Introductions (‚ùì)\u003c/h2\u003e\n\u003cp\u003eIntroducing someone to an audience is crucial. You should \u003cstrong\u003eprime them briefly\u003c/strong\u003e because they will be the focus. Be original and personalize the introduction by highlighting 2 or 3 attributes of the speaker that are relevant to the upcoming discussion.\u003c/p\u003e\n\u003ch2 id=\"17-facilitating-brainstorming-meetings\"\u003e17. Facilitating Brainstorming Meetings\u003c/h2\u003e\n\u003cp\u003eWhen coordinating brainstorming sessions, here are some tips to help guide your team in finding the right idea:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFacilitate the discussion with a scribe to capture ideas. Ideally, you should be the one writing down the points on a blackboard\u003c/li\u003e\n\u003cli\u003eState the problem clearly to ensure everyone understands the focus\u003c/li\u003e\n\u003cli\u003eNumber the ideas. Numbers encourage participants to keep going\u003c/li\u003e\n\u003cli\u003eProhibit criticism, as it may stop other ideas from flowing\u003c/li\u003e\n\u003cli\u003eUse wall space, ideally with a big panel, to display all the results of the session\u003c/li\u003e\n\u003cli\u003eLimit the session to 1 hour; after that, the quality of ideas tends to decrease significantly\u003c/li\u003e\n\u003cli\u003eTranscribe ideas and distribute them quickly\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"-section-5-your-leadership\"\u003eü¶∏‚Äç‚ôÇÔ∏è Section 5: Your Leadership\u003c/h1\u003e\n\u003ch2 id=\"18-leading-others\"\u003e18. Leading Others\u003c/h2\u003e\n\u003cp\u003eThis is regarding the next stage of your career, where you lead your people. Many managers have their own plan and framework, and all of them are fine since they worked from them. But what \u003cstrong\u003eyou absolutely need is a group of followers\u003c/strong\u003e\nWithout other opeople, you only have nothign b ut potential. Leadership is, in the end, the ability to connect with them inspire them, guide them. Again, it\u0026rsquo;s not about you. You have to communicate:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eYour values: define them. Whether your statement of values focuses on integrity or courage or street smarts or anything else, you must phrase your values about others. Reframe to the audience\u0026rsquo;s perspective, e.g. \u0026ldquo;I believe in work-life balance\u0026rdquo; becomes \u0026ldquo;you deserve a healthy balance and to see your kids on more than just the weekend\u0026rdquo;.\u003c/li\u003e\n\u003cli\u003eYour vision: broarder than a set of actions, bur more concrete of a vague statement of ideas. Sullivan mentions the \u003ca href=\"https://www.forbes.com/advisor/business/smart-goals/#:~:text=This%20framework%20can%20be%20helpful,they%20can%20help%20your%20team.\"\u003eSMART framework\u003c/a\u003e to evaluate your goal\u003c/li\u003e\n\u003cli\u003eYour plan: how will your reach your goal?\u003c/li\u003e\n\u003cli\u003eYour actions: as a leader, what you will do will heavily influence the others. You have to give a good example to have others follow you, as they compare the words you said with what you ewffectively do\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"19-showing-vulnerability\"\u003e19. Showing Vulnerability\u003c/h2\u003e\n\u003cp\u003eTo lead, we must instill confidence in others, which comes from an inner sense of self-respect and self-awareness. And \u003cstrong\u003epart of this confidens comes from showing your genuine self\u003c/strong\u003e, which may admit to failures, embrace chance, show anxieties.\u003c/p\u003e\n\u003cp\u003eWe often fear being exposed, but the reality is, we don\u0026rsquo;t need to worry about that‚Äîwe already are. No one expects us to be perfect, especially not those we work closely with. It\u0026rsquo;s liberating to admit when we\u0026rsquo;re wrong or unsure about something. Another common fear is rejection: however, the more people understand the authentic you, the more they\u0026rsquo;ll see that you\u0026rsquo;re not fundamentally different from them as a whole person. When others genuinely know who you are, rejection becomes less likely.\u003c/p\u003e\n","description":"","image":"/images/simply_said/cover.png","permalink":"http://localhost:1313/posts/2024/07/personal-notes-simply-said/","title":"Personal Notes about Simply Said"},{"content":"\u003cp\u003eIn recent months, I have been experimenting with AI tools to leverage new, powerful technologies and create value. Like you, I am inundated with hype and buzzwords, and this makes things complicate, when trying to get started. While looking for simple answers to my questions, it‚Äôs often challenging to extract real value. So, I want to share my notes to help others with similar needs.\u003c/p\u003e\n\u003ch2 id=\"my-business-case-an-ai-analyst\"\u003eMy Business Case: an AI Analyst\u003c/h2\u003e\n\u003cp\u003eLet‚Äôs start with the big question I had in my mind:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI have a big, complex data source (a database, an API). How can I connect it to an AI and be fairly* confident it doesn‚Äôt mess things up?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cem\u003e*Remember, with AI, you can‚Äôt be 100% sure of anything.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eSpecifically, I worked with our order database to create an ‚ÄúAI Analyst\u0026quot; using Azure OpenAI. The goal was to enable it to respond to common questions like, \u003cem\u003e‚ÄúWhen is my order arriving?‚Äù\u003c/em\u003e or \u003cem\u003e‚ÄúWhat‚Äôs the order status for this customer?‚Äù\u003c/em\u003e This would save our analysts time and effort since the majority of the questions they receive are always the same..\u003c/p\u003e\n\u003cp\u003eI‚Äôm not talking of the toy databases you find in tutorials with 3 tables and 10 columns, this is a real schema with joins, millions of rows and knowledge of the business logic required. The cool part is that by using tools the AI model won‚Äôt care about the complexity underneath: as you‚Äôll see, the possibilities are endless.\u003c/p\u003e\n\u003ch2 id=\"before-ai-tools\"\u003eBefore AI Tools\u003c/h2\u003e\n\u003cp\u003eBack in the ‚Äúold days‚Äù (five months ago, lol), the only way was to use GPT-3.5 to make SQL queries and return a response, specifically with Langchain and a \u003ca href=\"https://python.langchain.com/v0.1/docs/use_cases/sql/\"\u003eSQL\u003c/a\u003e plugin.\u003c/p\u003e\n\u003cp\u003eI also considered making DAX queries to \u003ca href=\"https://python.langchain.com/v0.1/docs/integrations/toolkits/powerbi/\"\u003ePower BI\u003c/a\u003e models. However, AI tends to hallucinate when you add a couple of joins in SQL, and it gets even worse with a language that has only a fraction of the documentation and popularity. Indeed, results were terrible. I remember using several calls for checking and parsing the code, along with multiple retries.\u003c/p\u003e\n\u003ch2 id=\"the-game-changer-tools\"\u003eThe Game Changer: Tools\u003c/h2\u003e\n\u003cp\u003eThen, \u003ca href=\"https://platform.openai.com/docs/guides/function-calling\"\u003eOpenAI announced Tools (initially called Function Calling)\u003c/a\u003e. Tools allow the latest AI models (3.5 turbo, 4, 4o) to decide whether calling certain functions when needed.\u003c/p\u003e\n\u003cp\u003eIt‚Äôs like telling to our GPT, \u003ccode\u003e‚ÄúReply to my {QUESTION}, knowing that if I ask about the weather, you can use this {FUNCTION} which needs the city and time as input.‚Äù\u003c/code\u003e. This is prompt engineering, as I was saying. The OpenAI ChatCompletion API returns a special object for running the tool and then provides the final response.\u003c/p\u003e\n\u003cp\u003eThis differs from \u003ca href=\"https://aws.amazon.com/what-is/retrieval-augmented-generation/\"\u003eRetrieval Augmented Generation (RAG)\u003c/a\u003e, where you use a specialized Vector database to search your documents (e.g., Copilot with your email inbox), then pass the best results to the prompt and tell the AI to reply based on the context.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1536px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;\"\u003e\u003ciframe src=\"//iframely.net/ZRkGzjC\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eBut not \u003cem\u003ethat\u003c/em\u003e different. In RAG you search for similar data, find results, then tell the AI, \u003ccode\u003e‚ÄúHey, given this {CONTEXT}, reply to my {QUESTION}.‚Äù\u003c/code\u003e. \u003cstrong\u003eAlways remember that it‚Äôs all prompt engineering\u003c/strong\u003e.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1066px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.1937%;\"\u003e\u003ciframe src=\"//iframely.net/ndPoIXx\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eCool, but getting started wasn‚Äôt straightforward. Navigating through hype and buzzwords, overcomplicated solutions (I see you, \u003ca href=\"github.com/microsoft/semantic-kernel/tree/main/python\"\u003esemantic-kernel\u003c/a\u003e!), \u003ca href=\"https://community.openai.com/t/what-is-deference-between-function-call-and-tool-call/686481/3\"\u003eoutdated docs\u003c/a\u003e, and useless tutorials was a journey. What I needed was something like this post.\u003c/p\u003e\n\u003ch2 id=\"getting-started\"\u003eGetting Started\u003c/h2\u003e\n\u003cp\u003eI‚Äôll keep things simple with ‚Äúvanilla‚Äù OpenAI code. I mostly followed the OpenAI tutorial notebooks and then hit my head on a few common pitfalls (more on this at the end). You can use \u003ca href=\"https://python.langchain.com/v0.1/docs/modules/agents/agent_types/openai_tools/#:~:text=The%20goal%20of%20the%20OpenAI,or%20more%20functions%20as%20tools.\"\u003eLangchain\u003c/a\u003e implementations and similar tools, with a prepared list of functions you can install and run.\u003c/p\u003e\n\u003cp\u003eBut in my case, I needed to read our internal database, so I had to build the function from scratch.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eget_order_data\u003c/span\u003e(order_code: str) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e str:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e calling the DB etc, example response \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eüëá\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edumps({\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;order_code\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;TEST123\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;product\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Gaming PC\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;quantity\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;status\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;IN TRANSIT\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ETA\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;6/6/2024\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;customer\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Test Customer\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t})\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eHow can we teach our model to use these functions/tools, and when should it use them? OpenAI defined a standard template that describes what each function does and the parameters to use. You can see how prompt engineering becomes important here. I know that some users are calling order codes ‚Äòorder no‚Äô, I can specify that in the prompt to help the AI understand.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eget_order_data_docs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;get_order_data\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Use this function to retrieve data about an order\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;parameters\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;properties\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;order_code\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;string\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Order Code (also called Order No or Number). Format is [A-Z]\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{10}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;required\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;order_code\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eYou can pass this template to the API call like this:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecall_gpt\u003c/span\u003e(client, history, tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e tuple[str, list]:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;calls the api and updates the history. Returns response and history\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    chat_response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echat\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecompletions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        model\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAZURE_OPENAI_DEPLOYMENT_NAME, messages\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehistory, tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etools, tool_choice\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;auto\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e tools \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# you should add better error handling\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response_message \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e chat_response\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echoices[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emessage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    history\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(response_message\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eto_dict())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e response_message, history\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e¬†\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresponse_message, history \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e call_gpt(client, history, tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e[get_order_data_docs])\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"working-example\"\u003eWorking Example\u003c/h2\u003e\n\u003cp\u003eI asked the model about an order, and you can see that as an intermediate step, the ChatCompletion API returned a ‚Äòspecial object‚Äô called \u003ccode\u003etool_call\u003c/code\u003e that shows which function to call and with which arguments.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1120px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 13.3976%;\"\u003e\u003ciframe src=\"//iframely.net/AgppO6x\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv style=\"max-width: 498px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 24.8193%;\"\u003e\u003ciframe src=\"//iframely.net/coypa8w\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp\u003eNote that the model is not executing anything itself; it is merely indicating the function it wants to use. It is then our responsibility to execute the function, adding any necessary data cleaning features or security checks. And then we can pass the results back to the ChatCompletion API to generate the final answer! We have full control.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etool_calls \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e response_message\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etool_calls\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e tool_calls:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;using a tool üëÄ\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response, history \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e call_tool(tool_calls, client, history)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eHere are some useful tips to save you some headaches:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe API evolves, so remember that this is the status as of June 2024.\u003c/li\u003e\n\u003cli\u003eCheck the examples in the OpenAI tutorial notebooks (\u003ca href=\"https://github.com/dkhundley/openai-api-tutorial/blob/main/notebooks/function-calling.ipynb\"\u003esimple\u003c/a\u003e and \u003ca href=\"https://github.com/openai/openai-cookbook/blob/main/examples/Function_calling_finding_nearby_places.ipynb\"\u003eadvanced\u003c/a\u003e). They are difficult to find and often buried in many other results.\u003c/li\u003e\n\u003cli\u003eWhen using a tool, it‚Äôs very important to include the tool call and the tool response in the history (even though they are not real messages) to avoid the infamous ChatCompletion error \u003ccode\u003eInvalid parameter: messages with role 'tool' must be a response to a preceding message with 'tool_calls'.\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIf the function has a date parameter, remember that the model has a knowledge gap stuck in the past. If a user says ‚Äògive me the order for this week,‚Äô the date may default to 2023 or another incorrect date. It‚Äôs better to ask the user to provide precise dates or calculate the date within the function.\u003c/li\u003e\n\u003cli\u003eAlways check the possible questions that could be asked and tweak the template accordingly. That‚Äôs 90% of the effort in limiting hallucinations.\u003c/li\u003e\n\u003cli\u003eTruncate the conversation and limit the returned payload after a certain number of messages to avoid increasing costs, as all the function results will be passed in the history. It‚Äôs better to have several small functions that return a limited amount of data rather than one large, do-it-all function.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"final-code\"\u003eFinal Code\u003c/h2\u003e\n\u003cp\u003eThe full code is here, stripped to the bare bones. You will need to install the \u003ccode\u003eopenai\u003c/code\u003e module and define the keys. Remember to change the keys if using the standard OpenAI client. I hope you find it helpful.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e openai \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e AzureOpenAI \u003cspan style=\"color:#75715e\"\u003e# change to OpenAI depending on your case\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e utils.settings \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    AZURE_OPENAI_API_KEY,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    AZURE_OPENAI_ENDPOINT,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    AZURE_OPENAI_DEPLOYMENT_NAME,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eclient \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AzureOpenAI(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    azure_deployment\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAZURE_OPENAI_DEPLOYMENT_NAME,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    azure_endpoint\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAZURE_OPENAI_ENDPOINT,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    api_key\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAZURE_OPENAI_API_KEY,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    api_version\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2024-02-01\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eget_order_data\u003c/span\u003e(order_code: str) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e dict:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e# ... calling the DB etc, example response üëá\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edumps({\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;order_code\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;TEST123\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;product\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Gaming PC\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;quantity\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;status\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;IN TRANSIT\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ETA\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;6/6/2024\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;customer\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Test Customer\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t})\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eget_order_data_docs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;get_order_data\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Use this function to retrieve data about an order\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;parameters\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;properties\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;order_code\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;string\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Order Code (also called Order No or Number). Format is [A-Z]\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{10}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;required\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;order_code\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAVAILABLE_TOOLS \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;get_order_data\u0026#34;\u003c/span\u003e: (get_order_data, get_order_data_docs),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecall_gpt\u003c/span\u003e(client, history, tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e tuple[str, list]:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;calls the api and updates the history. Returns response and history\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    chat_response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echat\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecompletions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        model\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAZURE_OPENAI_DEPLOYMENT_NAME,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        messages\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehistory,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etools,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        tool_choice\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;auto\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e tools \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response_message \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e chat_response\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echoices[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emessage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    history\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(response_message\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eto_dict())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e response_message, history\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecall_tool\u003c/span\u003e(tool_calls, client, history) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e tuple[str, list]:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;If the response has a tool action, we call the api in a slightly different way, adding the function response. Returns response and history\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    tool_call_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e tool_calls[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    tool_function_name \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e tool_calls[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efunction\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ename\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    tool_query_string \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e eval(tool_calls[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efunction\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003earguments)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Call the function and retrieve results. Append the results to the messages list.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    fun_to_call \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AVAILABLE_TOOLS\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(tool_function_name)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    results \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e fun_to_call[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e](\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003etool_query_string)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# then call it another time for generating the final answer given the function results\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    history\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;role\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tool\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tool_call_id\u0026#34;\u003c/span\u003e: tool_call_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e: tool_function_name,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: results,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    res \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e call_gpt(client, history)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e res\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehistory \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;role\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;system\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Don\u0026#39;t make assumptions about what values to plug into functions. Ask for clarification if a user request is ambiguous.\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    user_input \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e str(input(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026gt;\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    new_message \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;role\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;user\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: user_input}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    history\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(new_message)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response_message, history \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e call_gpt(client, history, tools\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e[get_order_data_docs])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# tool calls is the special object returned by the ChatCompletion API if the model decided to use a tool\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    tool_calls \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e response_message\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etool_calls\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e tool_calls:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;using a tool üëÄ\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        response, history \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e call_tool(tool_calls, client, history)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(history)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","description":"","image":"/images/ai_superpowers/cover.jpg","permalink":"http://localhost:1313/posts/2024/06/ai-superpowers-tools/","title":"Giving our AI superpowers with OpenAI Tools"},{"content":"\u003cp\u003eThere\u0026rsquo;s quite a bit of confusion swirling around about how Power BI reports gather data. Where is the data actually stored? How frequently does it refresh? Depending on the mode you\u0026rsquo;ve selected, this question can be a bit tricky to tackle.\u003c/p\u003e\n\u003cp\u003eLet\u0026rsquo;s simplify things a bit. In this article, I\u0026rsquo;ll be focusing on Power BI Desktop. Imagine you\u0026rsquo;ve got a .pbix file on hand and don\u0026rsquo;t quite have the time to sit through \u003ca href=\"https://www.youtube.com/watch?v=-ip7mKUdwRg\"\u003e10-minute technical video from Guy in a Cube\u003c/a\u003e that I usually link my users to.\u003c/p\u003e\n\u003cp\u003eFirst things first, open your file in Power BI Desktop and take a peek at the bottom-right corner.\u003c/p\u003e\n\u003cdiv style=\"max-width: 2303px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 69.4528%;\"\u003e\u003ciframe src=\"//iframely.net/ER7G3PL\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003col\u003e\n\u003cli\u003eIf it\u0026rsquo;s empty, you are in \u003cstrong\u003eImport Mode\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eIf it says \u0026ldquo;Live connected to \u003cem\u003edataset name\u003c/em\u003e\u0026rdquo; you are in \u003cstrong\u003eLive Connection\u003c/strong\u003e mode\u003c/li\u003e\n\u003cli\u003eIf it says \u0026ldquo;Storage Mode: DirectQuery\u0026rdquo; you are in \u003cstrong\u003eDirectQuery\u003c/strong\u003e mode\u003c/li\u003e\n\u003cli\u003eIf it says \u0026ldquo;Storage Mode: Mixed\u0026rdquo;, you\u0026rsquo;ve got yourself a \u003cstrong\u003eComposite Model\u003c/strong\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eLet\u0026rsquo;s say you are in a hurry and still can\u0026rsquo;t spare a moment for tutorials. You just want to know where the data is and the absolute minimum to ensure you\u0026rsquo;re not messing anything up. Say no more.\u003c/p\u003e\n\u003cdiv style=\"max-width: 2303px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 49.4528%;\"\u003e\u003ciframe src=\"//iframely.net/lwXu3yn\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"import-mode\"\u003eImport Mode\u003c/h2\u003e\n\u003cp\u003eIn Import Mode, all the data is in the .pbix file.\nTo be precise, it\u0026rsquo;s stored in its \u003cem\u003esemantic model\u003c/em\u003e, also known as the dataset, which acts as the memory of your report. Whenever you hit \u0026ldquo;Refresh,\u0026rdquo; \u003cstrong\u003eall the data from the original data source gets copied\u003c/strong\u003e into the report. This typically results in a speedy query experience since the data needed for visualizations is readily available. Problem is when you have 20 million rows, refresh times take 30 minutes and the app crashes when you save it.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://nexacu.com.au/media/old-blog/2019-04-Power-BI-Data-Refresh-Button.png\" alt=\"Refresh button\"\u003e\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s why I recommend Import Mode for getting started with local reports and you want to query your files (by experience, Excel). However, it doesn\u0026rsquo;t scale well with larger datasets, and manual refreshes are necessary for obtaining the freshest data. It\u0026rsquo;s suitable for small-scale projects but falls short when dealing with larger datasets.\u003c/p\u003e\n\u003ch2 id=\"directquery\"\u003eDirectQuery\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://learn.microsoft.com/it-it/power-bi/connect-data/desktop-use-directquery\"\u003eDirectQuery\u003c/a\u003e is interesting.\nThe report\u0026rsquo;s semantic model is just a connector to the original data source (in this case, a database), and every time you interact with your report sends a new query. This may take some seconds depending on the query complexity and the source\u0026rsquo;s performances, but has the great advantage of returning live data.\u003c/p\u003e\n\u003cp\u003eI recommend DirectQuery if you really need live data and if your report isn\u0026rsquo;t too complex, thereby avoiding significant delays and performance impacts on the original source. However, it doesn\u0026rsquo;t scale well and comes with \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-use-directquery#considerations-and-limitations\"\u003enotable limitations\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"live-connection-mode\"\u003eLive Connection Mode\u003c/h2\u003e\n\u003cp\u003eLive Connection Mode might not be necessary for smaller-scale projects, but in my company, it\u0026rsquo;s the standard practice, with hundreds of users accessing data simultaneously. The concept is straightforward yet ingenious: one report to serve them all.\nHere\u0026rsquo;s how it works: we import all the data into a report, then publish it in a shared Power BI workspace accessible to users. Daily (and hourly) ETL pipelines handle refreshing the \u0026ldquo;source\u0026rdquo; report automatically, overseen by data engineers.\u003c/p\u003e\n\u003cp\u003eWith this setup, users can \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/connect-data/desktop-report-lifecycle-datasets\"\u003e\u0026ldquo;live connect\u0026rdquo;\u003c/a\u003e to the report and enjoy all the benefits of Import Mode‚Äîsize, speed, and simplicity‚Äîwithout worrying about refreshing the semantic model, which resides elsewhere.\u003c/p\u003e\n\u003cp\u003eHowever, a significant drawback is the inability to modify the semantic model directly since it\u0026rsquo;s located elsewhere. Thus, creating new tables and columns (excluding measures) in a live connected report isn\u0026rsquo;t possible. All new changes must be made in the original report.\u003c/p\u003e\n\u003ch2 id=\"composite-model\"\u003eComposite Model\u003c/h2\u003e\n\u003cp\u003eThe \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-composite-models\"\u003eComposite Model\u003c/a\u003e is when you mix together a Live Connection (which becomes a DirectQuery), and something else, either another DirectQuery or a local file in Import Mode.\nI won\u0026rsquo;t go too much into details here because it\u0026rsquo;s a new feature, and still has big limitations in my opinion. I\u0026rsquo;ve mentioned its great potential in a past article, as it can be the Saint Graal for some people who aim to integrate an \u0026ldquo;official\u0026rdquo; report with their own local files, but mixing together connection can incredibly deteriorate the query performance, because the model will make several queries before joining the results with the rest of the data. Still, be very cautious with composite models and keep an eye for future updates.\u003c/p\u003e\n\u003cp\u003eThe Composite Model blends a Live Connection (which essentially becomes a DirectQuery) with another DirectQuery or a local file in Import Mode. I won\u0026rsquo;t delve too deeply into the specifics here because it\u0026rsquo;s a relatively new feature with significant limitations, in my opinion. While I\u0026rsquo;ve highlighted its potential \u003ca href=\"https://mutt0-ds.github.io/posts/2023/03/what-power-bi-is-missing/\"\u003ein a previous article\u003c/a\u003e, caution is warranted, as mixing connections can severely impact query performance. The model may execute several queries before joining the results with the rest of the data. Approach composite models with care and keep an eye out for future updates.\u003c/p\u003e\n\u003ch2 id=\"ah-and-there-is-more\"\u003eAh, and there is more!\u003c/h2\u003e\n\u003cp\u003eFor the sake of completeness, I have to mention a fifth way to read data in Power BI: \u003cstrong\u003eDirect Lake\u003c/strong\u003e. This approach combines the speed of Import mode with the live queries of DirectQuery by utilizing well-optimized tables in a Data Lake, offering the best of both worlds. However, it\u0026rsquo;s only available in the Power BI Premium P-level and Microsoft Fabric, and it requires advanced data engineering to set up the Data Lake. If you\u0026rsquo;re intrigued by this solution, you\u0026rsquo;ll need to dive into the \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/enterprise/directlake-overview\"\u003eMicrosoft documentation\u003c/a\u003e and seek out more detailed resources than my post.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://learn.microsoft.com/en-en/power-bi/enterprise/media/directlake-overview/directlake-diagram.png\" alt=\"Direct lake diagram\"\u003e\u003c/p\u003e\n\u003cp\u003eI hope you found this straightforward information helpful. Sometimes, with technical topics like Power BI, it\u0026rsquo;s easy to get lost in complex jargon and intricate details.\u003c/p\u003e\n","description":"","image":"/images/power_bi_connections/pbi_connections_charts.png","permalink":"http://localhost:1313/posts/2024/04/types-powerbi-connection/","title":"The 3 (+2) ways to Get Data in Power BI, simply explained"},{"content":"\u003cp\u003eLast Saturday I had the privilege of attending \u003ca href=\"https://datasaturdays.com/2023-11-18-datasaturday0037/\"\u003eData Saturdays #37 at Parma\u003c/a\u003e, an event series focused on Microsoft data platform technologies. Covering AI, Database, Business Intelligence, and Cloud, the event promised insights from top experts in Italy (and beyond).\u003c/p\u003e\n\u003cp\u003eOf course, I wrote down (almost) everything I heard.\nThis blog post is actually a dump of my notes, which I tried to partially automated with a mix of OCR + ChatGPT, which struggled in understanding most of the complex contexts\u0026hellip; My disorganized note management didn\u0026rsquo;t help, poor GPT.\u003c/p\u003e\n\u003cp\u003eSo, my key points are slightly \u0026ldquo;tweaked\u0026rdquo; using AI and then carefully checked and simplified by me. I hope they serve as a useful resource for those interested in the topics discussed at the event. Kudos to everyone involved in making this event a success (organizers, speakers, sponsors), and I look forward to future editions that continue to push the boundaries of knowledge-sharing in the data and technology domain.\u003c/p\u003e\n\u003cp\u003eSpecial thanks to Ema for the support.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUpdate: most of the presentations have been uploaded on GitHub: you can find them \u003ca href=\"https://github.com/suxstellino/events/tree/main/2023/datasat/parma\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"-sql-server-paas-by-gianluca-hotz\"\u003e‚òÅ SQL Server PaaS by Gianluca Hotz\u003c/h2\u003e\n\u003cdiv style=\"max-width: 1834px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 137.6963%;\"\u003e\u003ciframe src=\"//iframely.net/WeqRYGZ\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch4 id=\"three-solutions\"\u003eThree Solutions\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eSQL Server On-Premises: Classic solution.\u003c/li\u003e\n\u003cli\u003eIaaS (Infrastructure as a Service): Utilizes a purchased VM for MSSQL. Eliminates the need for VM maintenance.\u003c/li\u003e\n\u003cli\u003ePaaS (Platform as a Service): Azure offers three PaaS options for SQL Server. RDS (Relational Data Service) available for MySQL, PostgreSQL, MariaDB.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"three-paas-database-running-options-in-azure\"\u003eThree PaaS Database Running Options in Azure\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eDB Single: Requires manual management of the instance, including network and security.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/it-it/azure/azure-sql/database/elastic-pool-overview?view=azuresql\"\u003eElastic Pool\u003c/a\u003e: A shared resource pool for multiple databases. Scales dynamically with an auto-scale feature.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/en-us/azure/azure-sql/managed-instance/sql-managed-instance-paas-overview?view=azuresql\"\u003eManaged Instance\u003c/a\u003e: Entire SQL Server instance with PaaS advantages.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"purchase-models-tiers-options\"\u003ePurchase Models, Tiers, Options\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eDTU (Database Transaction Unit):\nEstimates operations using a combination of CPU and storage.\nSimple and linear, though may be phased out in the future.\nTiers include Free, Standard, Premium.\u003c/li\u003e\n\u003cli\u003evCores:\nRenting computing power.\nTiers include General Purpose, Business Critical, \u003ca href=\"https://learn.microsoft.com/it-it/azure/azure-sql/database/service-tier-hyperscale?view=azuresql\"\u003eHyperscale\u003c/a\u003e (more on it later).\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYou can also choose between\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eProvisioned: Adheres to a traditional model with a fixed set of resources.\u003c/li\u003e\n\u003cli\u003eServerless: Payment based on the minimum core and actual usage. Allows for automation, e.g., turning off during inactive periods.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"hyperscale\"\u003eHyperscale\u003c/h4\u003e\n\u003cp\u003eUtilizes a cluster-based model with modularized SQL, resembling AWS \u003ca href=\"https://aws.amazon.com/it/rds/aurora/\"\u003eAurora\u003c/a\u003e. Complexity in design but offers benefits like distribution and quorum-based operations. However, this is a new solution.\u003c/p\u003e\n\u003ch4 id=\"sql-managed-instance-details\"\u003eSQL Managed Instance Details\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eEntire SQL Server instance with PaaS advantages.\u003c/li\u003e\n\u003cli\u003eAzure manages hardware and all what\u0026rsquo;s under the hood.\u003c/li\u003e\n\u003cli\u003eConvenient, duplicated, and region-secured backups. This is already a game changer.\u003c/li\u003e\n\u003cli\u003eHigh availability through ready clones, with consideration for potential connection disruption during a switch.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"the-aws-offer\"\u003eThe AWS offer\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eDifferent offerings from Azure, but fundamental features are similar.\u003c/li\u003e\n\u003cli\u003eAzure holds exclusivity on SQL Server; AWS updates may have a delayed rollout.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"fleet-manager---new-azure-feature\"\u003eFleet Manager - New Azure Feature\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eThumb\u0026rsquo;s rule: one DB per tenant.\u003c/li\u003e\n\u003cli\u003eFleet Manager assists in scaling numerous databases (in the order of thousands).\u003c/li\u003e\n\u003cli\u003eDatabases can be categorized into tiers for balanced priority and power.\u003c/li\u003e\n\u003cli\u003eKind of a pool of pools\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-t-sql-performance-tips--tricks-by-sergio-govoni\"\u003eüìê T-SQL performance tips \u0026amp; tricks by Sergio Govoni\u003c/h2\u003e\n\u003cdiv style=\"max-width: 1757px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 133.8797%;\"\u003e\u003ciframe src=\"//iframely.net/xlNErkd\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch4 id=\"1-sargable-predicateshttpswwwsqlshackcomhow-to-use-sargable-expressions-in-t-sql-queries-performance-advantages-and-examples\"\u003e1. \u003ca href=\"https://www.sqlshack.com/how-to-use-sargable-expressions-in-t-sql-queries-performance-advantages-and-examples/\"\u003eSargable Predicates\u003c/a\u003e\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eLearn to read \u003ca href=\"https://www.sqlshack.com/execution-plans-in-sql-server/\"\u003eExecution Plans\u003c/a\u003e; Index Seek good, Index Scan worse.\u003c/li\u003e\n\u003cli\u003eSARG (Search ARGument) - Always aim to use an index to optimize query performance.\u003c/li\u003e\n\u003cli\u003eIdentify indexed columns and avoid operations on the predicates that hinder index usage. Example: If there\u0026rsquo;s an index on the date column, refrain from using functions like WHERE YEAR(date) = 2023 to prevent losing the index. This also works for ORDER BY not only where\u003c/li\u003e\n\u003cli\u003ePay attention to handling nulls correctly (example to check: stored procedure ignoring NULLs in where, fixed with EXISTS + INTERSECT). NULL is a placeholder for something that may arrive, not a value!\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"2-query-mode-execution\"\u003e2. Query Mode Execution\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eAgain: carefully analyze the Execution Plan.\u003c/li\u003e\n\u003cli\u003ePrioritize BATCH over ROW mode (Estimated Execution Mode); reason by cluster of column value rather than each row.\u003c/li\u003e\n\u003cli\u003eUtilize a nonclustered columnstore index (empty) for faster queries. Check if the Execution Mode updated accordingly!\u003c/li\u003e\n\u003cli\u003eIn Azure SQL and from SQL Server 2019, the engine employs batch mode where possible without creating the column index.Better because for transactional databases, it\u0026rsquo;s better to avoid indexes. Check compatibility levels and enable the feature accordingly.\u003c/li\u003e\n\u003cli\u003eThere also POC Indexes for PARTITION BY queries\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"3-join-order\"\u003e3. Join Order\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eThe \u003ca href=\"https://learn.microsoft.com/it-it/troubleshoot/sql/database-engine/performance/troubleshoot-optimizer-timeout-performance\"\u003eQuery Optimizer\u003c/a\u003e (very complex) aims for the easiest path to make joins but might be incorrect.\u003c/li\u003e\n\u003cli\u003ePay attention to join order; joins are evaluated based on the ON statement, if you want to join something inner first and then a left outer later, the ON of the left outer should be AFTER the first. Use parentheses for readability.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"4-tempdb\"\u003e4. Tempdb\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eTempdb is the public toilet of SQL Server, receiving a lot of activity. Serves as a shared space for temporary data.\u003c/li\u003e\n\u003cli\u003ePlace Tempdb on a fast machine due to high traffic.\u003c/li\u003e\n\u003cli\u003eCreate an index with a name to cache Tempdb and avoid creating new indexes for each query if they have anonymous indexes.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-sql-server-on-fire-by-gabriele-franco\"\u003eüßØ SQL Server On Fire by Gabriele Franco\u003c/h2\u003e\n\u003cdiv style=\"max-width: 1814px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 133.8624%;\"\u003e\u003ciframe src=\"//iframely.net/yBY9cdc\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch4 id=\"tools-used\"\u003eTools Used\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/it-it/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-ver16\"\u003eQuery Store\u003c/a\u003e - The black box of SQL Server, storing query stats and history. (note: read about Hint Query Store)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/en-us/sql/relational-databases/extended-events/quick-start-extended-events-in-sql-server?view=sql-server-ver16\"\u003eExtended Events (XE)\u003c/a\u003e - Monitors 3000 types of events for detailed insights.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"scenario-sql-server-at-100-cpu\"\u003eScenario: SQL Server at 100% CPU\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eRan a stress test on the database to induce slowdown.\u003c/li\u003e\n\u003cli\u003eAnalyzed Query Store to identify queries causing high resource consumption.\u003c/li\u003e\n\u003cli\u003eUtilized the estimated plan and adjusted the execution plan with an index to resolve the issue.\u003c/li\u003e\n\u003cli\u003eDemonstrated the comparison of queries within the Query Store tool.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"scenario-memory-pressure-test\"\u003eScenario: Memory Pressure Test\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eExecuted a test under memory pressure with a poorly optimized table.\u003c/li\u003e\n\u003cli\u003eThe query estimated 62 GB of memory, causing a bottleneck in the database.\u003c/li\u003e\n\u003cli\u003eRoot cause: Inefficient use of the nvarchar(4000) type, leading to overestimated data size for millions of rows.\u003c/li\u003e\n\u003cli\u003eRemember the importance of defining the right data types!\u003c/li\u003e\n\u003cli\u003eFun fact: SELECT TOP 100 is memory-optimized; TOP 101 is not.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"checking-active-sessions\"\u003eChecking Active Sessions\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eUsed sys.sp_whoisactive to identify resource-consuming sessions.\u003c/li\u003e\n\u003cli\u003eAddressed the issue of \u003ca href=\"https://www.sqlskills.com/help/waits/resource_semaphore/\"\u003eRESOURCE_SEMAPHORE\u003c/a\u003e, indicating exhausted resources.\u003c/li\u003e\n\u003cli\u003eExplored \u003ca href=\"https://learn.microsoft.com/it-it/sql/relational-databases/system-catalog-views/sys-query-store-plan-transact-sql?view=sql-server-ver16\"\u003esys.query_store_plan\u003c/a\u003e for detailed information on query stats and resources.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"using-extended-events-xe\"\u003eUsing Extended Events (XE)\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eReferenced the \u003ca href=\"https://learn.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/-sys-dm-xe-sessions-transact-sql\"\u003edm_xe_sessions\u003c/a\u003e table to observe and analyze extended events sessions.\u003c/li\u003e\n\u003cli\u003eDemonstrated downloading in XDL format for deadlocks (note: see more about that)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-unlocking-the-power-of-ai-driven-analytics-mastering-generative-ai-in-power-bi-by-leon-gordon\"\u003eüîì Unlocking the Power of AI-Driven Analytics: Mastering Generative AI in Power BI by Leon Gordon\u003c/h2\u003e\n\u003cdiv style=\"max-width: 1834px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 134.5549%;\"\u003e\u003ciframe src=\"//iframely.net/tsk3cev\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch4 id=\"the-scenario\"\u003eThe scenario\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eDeploying AI solutions to Production (PRD) is a challenging endeavor.\u003c/li\u003e\n\u003cli\u003eHigh failure rates are observed in many AI projects.\u003c/li\u003e\n\u003cli\u003eCase Study: PepsiCo\u0026rsquo;s AI Application for Cheetos Quality Check: AI used to identify irregularities in Cheetos for quality assurance\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"ai-facts\"\u003eAI Facts\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eAI is a permanent and essential part of technology landscapes.\u003c/li\u003e\n\u003cli\u003eEffectively leveraging AI is crucial for project success.\u003c/li\u003e\n\u003cli\u003eGovernance and security play a significant role in AI deployment.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"demo-1-chatgpt-data-investigator-with-marvel-movies-dataset\"\u003eDemo 1: ChatGPT Data Investigator with Marvel Movies Dataset\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eChatGPT plugin showcased for uploading dirty data and cleaning up and transforming them into a schema suitable for Power BI. Basic visualization available.\u003c/li\u003e\n\u003cli\u003eDespite being a demo tool, it could be seen as a foundational step for future developments.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"demo-2-data-flow-with-http-call-to-openai\"\u003eDemo 2: Data Flow with HTTP Call to OpenAI\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eTested a data flow with an HTTP call to OpenAI for applying a column description using ChatGPT.\u003c/li\u003e\n\u003cli\u003eThere are potential cost implications in a Production environment but it\u0026rsquo;s interesting to leverage HTTP calls using M PowerQuery language.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-power-bi-x-files---5-things-they-forgot-to-tell-you-by-nikola-ilic\"\u003e‚úñ Power BI \u0026ldquo;X Files\u0026rdquo; - 5 things they \u0026ldquo;forgot\u0026rdquo; to tell you! by Nikola Ilic\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eVery technical session for Power BI advanced users, a real showcase of hidden gems for optimizing queries and calculation\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"dax-fusion\"\u003eDAX Fusion\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eHorizontal Fusion: Combines calculations with different filters for improved performance. Enabled after September 2022.\u003c/li\u003e\n\u003cli\u003eVertical Fusion:Classic fusion using filter context (measures).\u003c/li\u003e\n\u003cli\u003eNo action needed; enabled in newer versions for query optimization. I should read the \u003ca href=\"https://www.sqlbi.com/articles/introducing-horizontal-fusion-in-dax/\"\u003eSQL explanation post\u003c/a\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"cache-me-if-you-can\"\u003eCache Me If You Can\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003ePower BI caches results to enhance performance. E.g. double-clicking the same slicer item results in a single query.\u003c/li\u003e\n\u003cli\u003eUse \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/create-reports/desktop-performance-analyzer\"\u003ePerformance Analyzer\u003c/a\u003e to copy the query and check results in \u003ca href=\"https://daxstudio.org/\"\u003eDAX Studio\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eAvoid Beginner Mistake: For accurate testing, clean the cache before each new run.\u003c/li\u003e\n\u003cli\u003eNote: Cache may not be utilized for large queries.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"the-dark-art-of-table-processing\"\u003eThe Dark Art of Table Processing\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eLeveraging columnar nature of \u003ca href=\"https://www.sqlbi.com/tools/vertipaq-analyzer/\"\u003eVertiPaq\u003c/a\u003e (the database under the hood) for optimized refresh can be very important.\u003c/li\u003e\n\u003cli\u003eRefer to Phil Seamark\u0026rsquo;s \u003ca href=\"https://dax.tips/2021/02/15/visualise-your-power-bi-refresh/\"\u003eblog post\u003c/a\u003e for insights into the refresh strategy.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"fold-on-tight\"\u003eFold on Tight\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eQuery Folding: the ability to move computation in SQL query from M\u003c/li\u003e\n\u003cli\u003eBeware: Appending, merging queries, or transforming data types may bypass folding, slowing down queries.\u003c/li\u003e\n\u003cli\u003eCheck native view query in Power Query; if absent, it\u0026rsquo;s not folding. This is bad.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"mdx-optimization\"\u003eMDX Optimization\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eUsually, \u003ca href=\"https://data-mozart.com/hidden-little-gem-that-can-save-your-power-bi-life/\"\u003eavoid turning off ISAVAILABLEMDX\u003c/a\u003e in \u003ca href=\"https://www.sqlbi.com/tools/tabular-editor/\"\u003eTabular Editor 2\u003c/a\u003e or Excel users won\u0026rsquo;t access the value.\u003c/li\u003e\n\u003cli\u003eHowever, for unimportant columns, turning it off significantly reduces size.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-what-to-look-out-for-when-migrating-your-data-to-the-cloud-is-it-really-the-right-choice-by-emanuele-meazzo\"\u003eüëÄ What to look out for when migrating your data to the cloud; is it REALLY the right choice? by Emanuele Meazzo\u003c/h2\u003e\n\u003cp\u003eI didn\u0026rsquo;t take notes here as I work with Ema and kindly shared with me the entire presentation, which was rich in interesting points about the question one should me when choosing to migrate to the Cloud. It\u0026rsquo;s not that simple.\nAmazing performance that made me leave the room with more questions than answer.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1853px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 134.715%;\"\u003e\u003ciframe src=\"https://nbviewer.org/github/mutt0-ds/mutt0-ds.github.io/blob/9ac4c33c137c0e7959ca91dad753f166287bac14/static/images/data_saturdays/meazzo_presentazione.pdf\" type=\"application/pdf\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"-save-the-date-by-rudi-bruchez\"\u003eüïò Save The Date by Rudi Bruchez\u003c/h2\u003e\n\u003cdiv style=\"max-width: 1853px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 134.715%;\"\u003e\u003ciframe src=\"//iframely.net/M6dlvZg\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eThis session explores the nuances of different date and time types in SQL Server, highlighting the strengths and challenges of each and emphasizing best practices for handling date-related operations.\nSuggested article: \u003ca href=\"https://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes\"\u003eThe Ultimate Guide to Datetime datatypes\u003c/a\u003e\u003c/p\u003e\n\u003ch4 id=\"four-main-types\"\u003eFour Main Types:\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eDATETIME\u003c/li\u003e\n\u003cli\u003eDATE\u003c/li\u003e\n\u003cli\u003eDATETIME2\u003c/li\u003e\n\u003cli\u003eSmalldatetime (less commonly used)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"datetime-is-a-mess\"\u003eDatetime is a mess\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eStarts at 1753 because it\u0026rsquo;s essentially an int.\u003c/li\u003e\n\u003cli\u003eRounds milliseconds in a peculiar way, leading to rounding discrepancies.\u003c/li\u003e\n\u003cli\u003eNo time zone information (UTC can be used).\u003c/li\u003e\n\u003cli\u003eISO 8601 attempts to standardize datetime but can be messy due to updates over the years.\u003c/li\u003e\n\u003cli\u003eLanguage-sensitive, with the format dependent on the language set in SQL Management Studio.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"formatting\"\u003eFormatting\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eCONVERT with numeric IDs to choose the desired format.\u003c/li\u003e\n\u003cli\u003eCAST automatically converts to the user language format (faster).\u003c/li\u003e\n\u003cli\u003eFORMAT (a .NET function) is external and slower.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"date-better-but-not-perfect\"\u003eDate: better, but not perfect\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eStarts from year 1 but still has rounding errors.\u003c/li\u003e\n\u003cli\u003eVarious interesting manipulations with types and casting can be performed.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"removing-time\"\u003eRemoving Time\u003c/h4\u003e\n\u003cp\u003eChallenge: \u003ca href=\"https://stackoverflow.com/questions/3310569/what-is-the-significance-of-1-1-1753-in-sql-server\"\u003enon-existing dates in the past\u003c/a\u003e before the adoption of the modern calendar; triggers can be used to address this and prevent inserts on those days.\u003c/p\u003e\n\u003ch4 id=\"datetime2\"\u003eDatetime2\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eIdeal solution; should be used more.\u003c/li\u003e\n\u003cli\u003eRanges from 1 to 9999, follows the Gregorian calendar.\u003c/li\u003e\n\u003cli\u003ePrecision can be chosen, and there are no tricks with casting ints.\u003c/li\u003e\n\u003c/ul\u003e\n","description":"","image":"/images/data_saturdays/cover.jpg","permalink":"http://localhost:1313/posts/2023/11/ai-tweaked-data-saturdays-notes/","title":"My AI-tweaked Data Saturdays 23 Notes"},{"content":"\u003cp\u003eI want to express my gratitude for the positive feedbacks I received a few months ago when \u003ca href=\"https://mutt0-ds.github.io/posts/2023/07/analyzing-commute-data-using-google-api/\"\u003eI used Google Maps data to determine the best times for the daily commute\u003c/a\u003e. TL;DR: Mondays are the best, while Wednesdays, and early Fridays are the trickiest times to hit the road.\u003c/p\u003e\n\u003cp\u003eHowever, the neatness of this analysis takes a hit when real-world unpredictabilities come into play. Things like heavy traffic, rain, road closures due to accidents, or just that one slow driver in front of you can disrupt even the best-planned routes. So, it\u0026rsquo;s essential to view these explorations as \u0026ldquo;what if\u0026rdquo; games. They provide a general framework but can\u0026rsquo;t fully account for the chaos of everyday life.\u003c/p\u003e\n\u003cp\u003eFor a while, I contemplated adding weather data to show how rainy days significantly affect commute times, not to mention snowy days. The problem is, predicting tomorrow\u0026rsquo;s weather is challenging, and my initial hypothesis was already on shaky ground. Empirical evidence reveals anyway that the worse the weather, the worse the commute.\u003c/p\u003e\n\u003cp\u003eInstead, I decided to explore something more intriguing: car accidents. These are the \u0026ldquo;\u003ca href=\"https://en.wikipedia.org/wiki/Black_swan_theory\"\u003eblack swans\u003c/a\u003e\u0026rdquo; of road trip planning‚Äîunexpected events that can ruin your day and disrupt any carefully calculated commute. Unfortunately, we can\u0026rsquo;t predict or prevent them, but by understanding when accidents are more likely, we can at least be more informed. In this analysis, I will focus on my coordinates in the Swiss area, but I\u0026rsquo;ll provide \u003ca href=\"https://github.com/mutt0-ds/commute-analysis\"\u003ethe code on my Github\u003c/a\u003e so you can investigate car accident data yourself. The best part? No Google key is required this time.\u003c/p\u003e\n\u003ch2 id=\"-gathering-and-preparing-the-data\"\u003eüì¶ Gathering and Preparing the Data\u003c/h2\u003e\n\u003cp\u003eThe most challenging part, I assumed, would be acquiring the data. But to my surprise, the Swiss government offers an \u003ca href=\"https://map.geo.admin.ch/?topic=vu\u0026amp;lang=en\u0026amp;bgLayer=ch.swisstopo.pixelkarte-grau\u0026amp;layers=ch.astra.unfaelle-personenschaeden_alle%2Cch.swisstopo.swissnames3d\u0026amp;layers_timestamp=99990101%2C\u0026amp;E=2652000.00\u0026amp;N=1171625.00\u0026amp;zoom=2\u0026amp;catalogNodes=1318\"\u003einteractive dashboard\u003c/a\u003e and a \u003ca href=\"https://data.geo.admin.ch/ch.astra.unfaelle-personenschaeden_alle/\"\u003elink\u003c/a\u003e for exporting all the data (\u003ca href=\"https://data.geo.admin.ch/ch.astra.unfaelle-personenschaeden_alle/unfaelle-personenschaeden_alle/unfaelle-personenschaeden_alle_2056.csv.zip\"\u003edirect download\u003c/a\u003e). Within minutes, I had a decade\u0026rsquo;s worth of Swiss car accident data downloaded, ready to crunch some numbers.\u003c/p\u003e\n\u003cdiv style=\"max-width: 2303px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 49.4528%;\"\u003e\u003ciframe src=\"//iframely.net/LXatZcs\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eThe data proved to be relatively clean, featuring columns in French, Italian, German, and English, detailing accident types, road types, weekdays, and hours (though not exact dates for privacy). As a newcomer in this field, my major challenge was deciphering the creators\u0026rsquo; peculiar method of measuring latitudes and longitudes, which was based on the center on the country rather than as the standard, on the Earth\u0026rsquo;s center of mass. Those Location_CHLV95 fields threw me off at first, but after \u003ca href=\"https://en.wikipedia.org/wiki/EPSG_Geodetic_Parameter_Dataset\"\u003esome exploration\u003c/a\u003e, I managed to convert the coordinates from \u003ca href=\"https://epsg.io/2056\"\u003eEPSG:2056\u003c/a\u003e (the \u0026ldquo;Swiss\u0026rdquo; method) to the Standard World Geodetic System, using the \u003ca href=\"https://pypi.org/project/pyproj/\"\u003epyproj\u003c/a\u003e library.\u003c/p\u003e\n\u003cdiv style=\"max-width: 811px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 34.7633%;\"\u003e\u003ciframe src=\"//iframely.net/WGcM92d\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eThe last steps involved filtering the coordinates to focus only on my commute area, and I was ready to explore the results.\u003c/p\u003e\n\u003ch2 id=\"-a-peek-with-power-bi\"\u003eüìä A Peek with Power BI\u003c/h2\u003e\n\u003cp\u003eInstead of relying solely on Python\u0026rsquo;s \u003ca href=\"https://seaborn.pydata.org/\"\u003eseaborn\u003c/a\u003e for data visualization, I turned to a more potent tool I use in my daily job, Microsoft Power BI (I already wrote about it \u003ca href=\"https://mutt0-ds.github.io/tags/power-bi/\"\u003ehere\u003c/a\u003e). My first task was to create a map of accidents, color-coded by severity, much like the one on the \u003ca href=\"https://map.geo.admin.ch/?topic=vu\u0026amp;lang=en\u0026amp;bgLayer=ch.swisstopo.pixelkarte-grau\u0026amp;layers=ch.astra.unfaelle-personenschaeden_alle%2Cch.swisstopo.swissnames3d\u0026amp;layers_timestamp=99990101%2C\u0026amp;E=2652000.00\u0026amp;N=1171625.00\u0026amp;zoom=2\u0026amp;catalogNodes=1318\"\u003eSwiss website\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1148px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 75.5486%;\"\u003e\u003ciframe src=\"//iframely.net/f5TLmf2\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eNow, let\u0026rsquo;s delve into the aggregated data (still filtered to my commute area). Surprisingly, the risk of accidents is lowest during the morning, gradually increasing to peak during the evening rush hour. Among the weekdays, Tuesday stands out slightly, though it\u0026rsquo;s a minor fluctuation. As for Mondays, they consistently prove to be the least congested days during my commute. So if you\u0026rsquo;re one of those who despise Mondays, here\u0026rsquo;s a valid reason to find joy: it\u0026rsquo;s the safest weekday!\u003c/p\u003e\n\u003cdiv style=\"max-width: 1218px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 65.8128%;\"\u003e\u003ciframe src=\"//iframely.net/C85NqI5\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eBut my data spans over the past 11 years, and many changes have occurred on our roads during that time. If we consider only the post-COVID years, the trend appears more random. It seems that the data isn\u0026rsquo;t sufficient for drawing precise conclusions. Mondays continue to show fewer accidents, though, offering some statistical redemption for the most loathed day of the week.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1225px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 65.6219%;\"\u003e\u003ciframe src=\"//iframely.net/5AzUYTE\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eSpeaking of recent years, let\u0026rsquo;s conclude the analysis with an encouraging chart: the trend over the years. Since 2010, car accidents on both my commute route and the entire region have decreased by half. This indicates not only safer roads but also saved lives, a result of (my guess) a combination of stricter speed limits, advancements in automotive safety, and increased awareness of road safety issues. It\u0026rsquo;s truly heartening news.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1236px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 64.7573%;\"\u003e\u003ciframe src=\"//iframely.net/WI0fLpr\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"-final-thoughts\"\u003eü§î Final Thoughts\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eMy updated analysis reaffirms that Mondays are statistically better for commuting, and avoiding peak hours whenever possible is obviously a wise choice, both mentally and phisically speaking.\u003c/li\u003e\n\u003cli\u003eFocusing on the most recent years, the risk of accidents appears random and challenging to predict on a day-to-day basis. However, accidents are notably more likely during the evening rush hour, around 6 PM (+100% risk increase).\u003c/li\u003e\n\u003cli\u003eMy assumption that people are sleepier in the morning, increasing the risk of accidents, doesn\u0026rsquo;t hold up in this data.\u003c/li\u003e\n\u003cli\u003eThe gradual decrease in car accidents over the years is excellent news for all commuters.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWith this update, I can better assess the safety of each day and make informed decisions, like avoiding working from home on Mondays. It was a rewarding experience delving into the Swiss dataset, and I hope that these findings will contribute to improving road safety and security in our country. Let\u0026rsquo;s see if I can unearth more data to refine my analysis further!\u003c/p\u003e\n","description":"","image":"/images/commute_data/commute_title_v2.jpg","permalink":"http://localhost:1313/posts/2023/10/analyzing-accidents-data-to-perfectionize-my-commute/","title":"Finding the Best Time to Go to Work: Now with Car Accidents Data \u0026 Power BI Dashboard!"},{"content":"\u003cp\u003eIt\u0026rsquo;s been quite the journey since I first delved into Second Brain technologies for organizing my team\u0026rsquo;s documentation. I previously shared my initial experiences with Obsidian, and now, it\u0026rsquo;s time for a comprehensive update. In case you missed my earlier exploration, you can catch up \u003ca href=\"https://mutt0-ds.github.io/posts/2023/02/obsidian-productivity-second-brain/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSo, what has changed?\nLet\u0026rsquo;s dive right in. Since my last update, I\u0026rsquo;ve continued to utilize Obsidian for secure and structured note organization within my team, enjoying the rapid and intuitive process and enjoying its advantages (flexibility, powerful search system,  security, and so on). I\u0026rsquo;m still in the \u0026ldquo;honeymoon\u0026rdquo; phase.\u003c/p\u003e\n\u003ch2 id=\"-new-notes-everywhere\"\u003eüìù New notes everywhere\u003c/h2\u003e\n\u003cdiv style=\"max-width: 2160px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 51.2778%;\"\u003e\u003ciframe src=\"//iframely.net/ynHdqbv\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eAs I\u0026rsquo;ve grown more accustomed to Obsidian, I\u0026rsquo;ve enhanced my \u0026ldquo;brain dumping\u0026rdquo; process by regularly depositing more and more random pieces of information into the \u003ccode\u003eTO_ORGANIZE\u003c/code\u003e bin. These tidbits pique my interest or hint at something important, even though I may not fully grasp their significance at the time. They range from random tickets I stumble upon to snippets from meetings, archived documents, scripts or casual coffee chat exchanges. Later, typically at the end of my day when tackling a substantial task isn\u0026rsquo;t ideal, I revisit these notes to organize them properly, adding relationships and moving them in the apposite subfolders.\u003c/p\u003e\n\u003cp\u003eAnother engaging activity involves exploring the note tree. I enjoy clicking through the dots and uncovering unconnected notes (\u0026ldquo;orphans\u0026rdquo;), re-reading them, and establishing fresh connections or cleaning up outdated entries. This process breathes life into many forgotten notes and ensures my vault remains tidy and updated.\u003c/p\u003e\n\u003cp\u003eI spent some time on saving scripts and code snippets I started using frequently, to have a centralized repository (more like a toolbox) of codes at my disposal when needed. The coding plugins I suggested were extremely useful.\u003c/p\u003e\n\u003cdiv style=\"max-width: 2299px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 53.4447%;\"\u003e\u003ciframe src=\"//iframely.net/ZOAKwdP\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"-creative-automation\"\u003eü§ñ Creative Automation\u003c/h2\u003e\n\u003cp\u003eExperimenting with scripts capable of generating new notes or rectifying errors has been a fascinating activity. Since the Obsidian vault is just an extensive markdown repository, I\u0026rsquo;ve considered automation possibilities such as generating notes automatically when we receive new tickets, complete with metadata. Additionally, I\u0026rsquo;ve been working on an experimental script to extract text using OCR from PowerPoint and Word files, transforming them into Markdown format through the \u003ca href=\"https://github.com/Unstructured-IO\"\u003eUnstructured\u003c/a\u003e Python library. This way, content within slides or images becomes searchable in Obsidian and it\u0026rsquo;s very helpful as I had several slide decks to ingest. I will share more details on these automations in future if I reach an alpha stage.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;ve also introduced a \u0026ldquo;Today I Learned\u0026rdquo; note, where I collect bite-sized pieces of knowledge, such as a SQL trick or intriguing facts. This practice encourages me to learn something new, even if it\u0026rsquo;s a minor detail, every day.\u003c/p\u003e\n\u003cdiv style=\"max-width: 700px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 33.7931%;\"\u003e\u003ciframe src=\"//iframely.net/2oC1XXd\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"-and-what-about-the-new-features\"\u003eüÜï And what about the new features?\u003c/h2\u003e\n\u003cp\u003eAt the beginning of the year, Obsidian unveiled \u0026ldquo;\u003ca href=\"https://obsidian.md/canvas\"\u003eCanvas\u003c/a\u003e\u0026rdquo;, an alternative to \u003ca href=\"https://excalidraw.com/\"\u003eExcalidraw\u003c/a\u003e/\u003ca href=\"https://app.diagrams.net/\"\u003eDraw.io\u003c/a\u003e with seamless integration into Obsidian\u0026rsquo;s mechanics. While it offers great potential as I can embed notes in the charts, it\u0026rsquo;s still somewhat limited compared to other diagramming tools, lacking features like custom icons or shapes. Nevertheless, it excels in creative brainstorming and idea visualization. I have used it sparsely when brainstorming for bigger projects.\u003c/p\u003e\n\u003cdiv style=\"max-width: 691px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;\"\u003e\u003ciframe src=\"//iframely.net/xmIVn6C\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eThe biggest improvement came from \u003ca href=\"https://help.obsidian.md/Plugins/Templates\"\u003eTemplates\u003c/a\u003e, significantly speeding up my workflow. For instance, I\u0026rsquo;ve created a meeting template with fields for attendees, an automatic date property, goals, and notes. With just a click, I can set up a meeting note promptly with pre-filled information for several cases, while keeping the notes standardized. In this example, however, the properties tab has exhibited some CSS glitches following the recent \u0026ldquo;properties\u0026rdquo; update, which I plan to investigate further.\u003c/p\u003e\n\u003cdiv style=\"max-width: 500px; margin-bottom:3%\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 59.0214%;\"\u003e\u003ciframe src=\"//iframely.net/ZgqV58T\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eSpeaking of that, \u003ca href=\"https://help.obsidian.md/Editing+and+formatting/Properties\"\u003ethe new \u0026ldquo;properties\u0026rdquo; feature\u003c/a\u003e has made the tool\u0026rsquo;s interface resemble Notion somewhat closely. This visual shift, while making it more user-friendly for newcomers, has slightly blurred its distinct identity in my opinion. Not a big change in my UX as I was comfortable with the older frontmatter style.\u003c/p\u003e\n\u003ch2 id=\"-reflecting-on-the-experience\"\u003eü§î Reflecting on the Experience\u003c/h2\u003e\n\u003cp\u003eThroughout this journey, I\u0026rsquo;ve felt in control of the knowledge at my disposal. I\u0026rsquo;ve been curious, eager to collect documents from other teams to expand Obsidian\u0026rsquo;s reach and enhance my own understanding.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;ve also felt confident, knowing that with just a couple of clicks, I was able access the information I need for reference. It\u0026rsquo;s been a breeze sharing knowledge, guides, and documents with my colleagues.\u003c/p\u003e\n\u003ch2 id=\"-challenges-and-lessons\"\u003eüëÄ Challenges and Lessons\u003c/h2\u003e\n\u003cp\u003eOne crucial aspect to consider when using Obsidian is the organization of your vault and notes. Neglecting this aspect can result in a chaotic collection of unfinished notes that are hard to locate. Effective titling is key, and I\u0026rsquo;ve often found myself renaming generic notes to capture their essence more precisely to avoid losing them (e.g. \u003ccode\u003eticket for adding new business logic to table\u003c/code\u003e ‚Üí \u003ccode\u003eRegion South-East Logic update in DB.REGION_TABLE\u003c/code\u003e). However, sometimes the true essence only becomes clear over time, emphasizing the importance of regular vault cleanup for optimal efficiency.\u003c/p\u003e\n\u003ch2 id=\"-final-thoughts\"\u003eü§î Final Thoughts\u003c/h2\u003e\n\u003cp\u003eThis Obsidian project continues to thrive, and I\u0026rsquo;ve happily recommended it to many technical colleagues interested in exploring this new tool. I\u0026rsquo;ve encountered no major roadblocks, and I look forward to delving deeper into its features. While I can\u0026rsquo;t reveal much about my vault\u0026rsquo;s contents, given its internal nature, I hope this update provides a glimpse into the evolving landscape.\nAfter overcoming a slight learning curve, Obsidian has indeed proven to be the right tool for my needs and I am extremely satisfied.\u003c/p\u003e\n\u003cp\u003eFeel free to reach out to me \u003ca href=\"mailto:mr0lnk6r1@relay.firefox.com\"\u003ehere\u003c/a\u003e if you\u0026rsquo;d like to learn more about my vault and my experiences with this tool.\nHappy knowledge-organizing!\u003c/p\u003e\n","description":"","image":"/images/obsidian/vault_animated.gif","permalink":"http://localhost:1313/posts/2023/09/obsidian-update-6-months-later/","title":"My Second Brain... 6 Months later: Obsidian update"},{"content":"\u003cp\u003eWhen my commute buddy and I find ourselves stuck in traffic during our car journeys, we often daydream about finding the ideal route and \u003cstrong\u003ethe optimal time\u003c/strong\u003e to leave the office in order to avoid these uncomfortable situations. Now, thanks to the power of technology and the inspiration I drew from \u003ca href=\"https://medium.com/@hishamsajid113/using-google-distance-matrix-api-to-reduce-commute-time-b17a0b9b0fbe\"\u003ea fantastic article by @hishamsajid113\u003c/a\u003e, I am finally able to back up my theories about the best departure times from home and simulate with real data!\u003c/p\u003e\n\u003cp\u003eFortunately, I have the flexibility to adjust my work hours within a predefined availability window. This allows us to save precious time and undoubtedly benefit our mental well-being by avoiding stressful experiences on the road.\u003c/p\u003e\n\u003ch2 id=\"gathering-the-data\"\u003eGathering the Data\u003c/h2\u003e\n\u003cp\u003eWhen using \u003ca href=\"https://www.google.com/maps/\"\u003eGoogle Maps\u003c/a\u003e to check the estimated time of arrival, there is a query sent to the \u003ca href=\"https://developers.google.com/maps/documentation/distance-matrix/overview\"\u003e\u003cstrong\u003eGoogle Distance Matrix API\u003c/strong\u003e\u003c/a\u003e behind the scenes. This API provides the predicted arrival time based on complex algorithms that consider average traffic conditions in the area and data collected from other vehicles, satellites and devices. In my experience, this information is usually quite reliable, except for unforeseen incidents such as car accidents or roadworks. To access the API, you need to sign up for the Google Cloud Platform (\u003ca href=\"https://www.youtube.com/watch?v=cIGCh8J9AfA\"\u003etutorial\u003c/a\u003e), and its free plan is generous enough for my small experiment, which involves fewer than 1000 API calls.\u003c/p\u003e\n\u003cdiv style=\"max-width: 2966px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 72.4919%;\"\u003e\u003ciframe src=\"//iframely.net/wKlT0Z2\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eIn my fabulous script, I generated a sequence of 5-minute intervals representing different departure times from home in the morning (6AM - 10AM) and from the office in the evening (4PM - 8PM). I then made multiple API calls using the coordinates of my home and workplace as parameters for each time segment in the simulation. I analyzed the traffic predictions provided by Google Maps for each departure time to understand the expected conditions I would encounter.\u003c/p\u003e\n\u003cp\u003eYou can find \u003ca href=\"https://github.com/mutt0-ds/commute-analysis\"\u003ethe code on Github\u003c/a\u003e, but please note that you will need an API key for the Google Distance Matrix API and the coordinates of your home and office if you want to use it for your own analysis.\u003c/p\u003e\n\u003ch2 id=\"key-findings\"\u003eKey Findings\u003c/h2\u003e\n\u003cp\u003eThe results of my analysis were mostly in line with my empirical experiences, but it feels satisfying to have concrete numbers to work with. Here are my charts and takeaways from the analysis:\u003c/p\u003e\n\u003ch2 id=\"morning-commute\"\u003eMorning Commute\u003c/h2\u003e\n\u003cdiv style=\"max-width: 2561px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 46.8135%;\"\u003e\u003ciframe src=\"//iframely.net/RZdtzCO\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cul\u003e\n\u003cli\u003eIt\u0026rsquo;s important to remember that these results are influenced by the current summer period, during which schools are closed and traffic is less intense, particularly in the morning hours. I will update the results in a few months to capture any changes.\u003c/li\u003e\n\u003cli\u003eEven when leaving at 6:45 AM, \u003cstrong\u003ewe still encounter heavy traffic\u003c/strong\u003e as we reach the office area around 7:30 AM, where congestion is concentrated. Leaving home earlier doesn\u0026rsquo;t provide significant time-saving advantages.\u003c/li\u003e\n\u003cli\u003eFriday (when many people work from home) and Thursday are the best days in terms of commute time.\u003c/li\u003e\n\u003cli\u003eDeparting at 8 AM (our current standard hour) is a good compromise and better than I initially thought.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"evening-commute\"\u003eEvening Commute\u003c/h2\u003e\n\u003cdiv style=\"max-width: 2561px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 46.8135%;\"\u003e\u003ciframe src=\"//iframely.net/TkFkXpS\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cul\u003e\n\u003cli\u003eLeaving at 5:30 PM, as I sometimes did when in a hurry, falls right in the worst traffic period. What a great idea!\u003c/li\u003e\n\u003cli\u003eAfter the peak at 5:30 PM, commute times gradually decrease. The later you leave, the better, but the impact is not substantial. From 6:30 PM onwards, it becomes more manageable.\u003c/li\u003e\n\u003cli\u003eIn the evening, Friday becomes the worst day to commute before 5 PM (as more people are heading out for the weekend, especially in July). Monday is relatively calmer, which is good news.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWednesday consistently proves to be the worst day for commuting\u003c/strong\u003e in both morning and evening data. So when my commuting buddy claims that Wednesday is a cursed day, we now have some scientific data to back up that statement.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBonus: adding Saturday and Sunday to see the impact traffic has compared to \u0026ldquo;normal\u0026rdquo; working days. It adds from 20 to 30 minutes to the total time!\u003c/p\u003e\n\u003cdiv style=\"max-width: 2561px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 46.8135%;\"\u003e\u003ciframe src=\"//iframely.net/zJhrAzO\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003ch2 id=\"conclusions\"\u003eConclusions\u003c/h2\u003e\n\u003cp\u003eLet\u0026rsquo;s face it, nobody enjoys being stuck in traffic. I am grateful to have the opportunity to work from home and, on the other commuting days, to have flexible hours that allow me to avoid the worst traffic moments when heading to the office. Thanks to the data provided by Google Maps, I now have a general framework of the best and worst time frames for my travels, keeping in mind that accidents and roadworks can always disrupt plans at the last minute. And most importantly, I can confirm that Wednesday is indeed the worst day for my particular commuting situation.\u003c/p\u003e\n","description":"","image":"/images/commute_data/commute_title.jpg","permalink":"http://localhost:1313/posts/2023/07/analyzing-commute-data-using-google-api/","title":"Analyzing My Commute Data to Find the Best Time to Go to Work"},{"content":"\u003cp\u003eIf you are into Data Engineering in Microsoft Azure Cloud Environment, you probaly heard about \u003cstrong\u003eMicrosoft Fabric\u003c/strong\u003e being announced last week at the yearly event \u003ca href=\"https://news.microsoft.com/build-2023/\"\u003eMicrosoft Build\u003c/a\u003e. Well, \u0026ldquo;heard\u0026rdquo; is quite an euphesmism: everyone in the field is extremely excited about the announcements of the event. And for good reasons, as it‚Äôs a very big deal for us engineers, working with data every day.\u003c/p\u003e\n\u003cp\u003eIn short, Fabric is a cutting-edge, unified data platform that merges lots of tools together, starting from a common Data Lake where data can be stored (\u003ca href=\"https://learn.microsoft.com/en-us/fabric/onelake/onelake-overview\"\u003e\u003cstrong\u003eOneLake\u003c/strong\u003e\u003c/a\u003e), and a suite of new tools on top of it that are integrated in the ‚Äúfabric‚Äù of Fabric. Some of them are evolutions of existing systems, like \u003cstrong\u003eSynapse Data Engineering\u003c/strong\u003e (\u003ca href=\"https://azure.microsoft.com/en-us/products/synapse-analytics/\"\u003eAzure Synapse Anaylytics\u003c/a\u003e) or \u003cstrong\u003eData Factory\u003c/strong\u003e (\u003ca href=\"https://azure.microsoft.com/en-us/products/data-factory\"\u003eAzure Data Factory\u003c/a\u003e) for ETL and Data Processing. Others, like my beloved \u003ca href=\"https://powerbi.microsoft.com/en-us/\"\u003e\u003cstrong\u003ePower BI\u003c/strong\u003e\u003c/a\u003e, have kept the same features but they will be integrated in the platform in the future. Others, like \u003ca href=\"https://blog.fabric.microsoft.com/en-us/blog/driving-actions-from-your-data-with-data-activator/\"\u003e\u003cstrong\u003eData Activator\u003c/strong\u003e\u003c/a\u003e(no-code triggers), are brand new.\u003c/p\u003e\n\n\u003cdiv style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"\u003e\n  \u003ciframe src=\"https://www.youtube.com/embed/X_c7gLfJz_Q\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" allowfullscreen title=\"YouTube Video\"\u003e\u003c/iframe\u003e\n\u003c/div\u003e\n\n\u003cdiv style=\"max-width: 1440px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 53.25%;\"\u003e\u003ciframe src=\"//iframely.net/LNrnS4V\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eLet me be clear: the idea of unifying all these data-related services in charge of processing, storing and using data is a game changer, if Fabric will respect the promises. In my job, handling data in the correct way is the crucial part, and I‚Äôm already using Synapse, Data Factory, Data Lake, Data Warehouse and Power BI as separate Azure Services so I doubt that much in my workflow will change: everything will be more interconnected and, hopefully, more productive, with support for the new AI technologies and unlocked integrations.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1536px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;\"\u003e\u003ciframe src=\"//iframely.net/Cmp4DxI\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eWhat I didn‚Äôt like is \u003cstrong\u003eMicrosoft hype-oriented strategy\u003c/strong\u003e. There was total secret about Fabric, and then in a couple of days it‚Äôs everywhere, still in Beta, with so much new infrormation that everyone out there still has to proceed what‚Äôs going to change and what‚Äôs exactly we will have to adapt. New spending plans, beta features, articles describing the ‚Äúmagic unlocked‚Äù by these tools, an explosion of \u003ca href=\"https://www.youtube.com/watch?v=6QusOchmSXQ\"\u003econtents\u003c/a\u003e and \u003ca href=\"https://www.youtube.com/watch?v=tu2M_K3pb0E\"\u003ecuriosity\u003c/a\u003e has been suddenly evoked.\u003c/p\u003e\n\u003cdiv style=\"max-width: 774px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 64.031%;\"\u003e\u003ciframe src=\"//iframely.net/JYJhv7z\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eWhile I understand the rushed period the Big Tech are encountering, with \u003ca href=\"https://time.com/6255952/ai-impact-chatgpt-microsoft-google/\"\u003ethe AI Race\u003c/a\u003e dominating the minds of business users (and investors), in this case the update is on a technical side.\u003c/p\u003e\n\u003cp\u003eLet‚Äôs take the other ‚Äú\u003cstrong\u003ebomb\u003c/strong\u003e‚Äù, the protagonist of Microsoft Build 2023. I\u0026rsquo;m talking about \u003ca href=\"https://www.microsoft.com/en-us/microsoft-365/blog/2023/03/16/introducing-microsoft-365-copilot-a-whole-new-way-to-work/\"\u003e\u003cstrong\u003e365 Copilot\u003c/strong\u003e\u003c/a\u003e, a sort of ChatGPT assistant that can be integrated with Office Tools for generating presentations, Word documents and analysis, has been anticipated several months before, with lots of buzz from the press. There is mistery about how it will work at the end, but Microsoft is sharing as many updates as possible about the tool. With 365 Copilot and \u003ca href=\"https://www.youtube.com/watch?v=DaIYrlMOj7I\"\u003eAzure AI Studio\u003c/a\u003e alone, which makes possible to build our own GPT models with in-house data, Microsoft would have already win everything for this year. The AI Race, at the moment of writing, is on its hands.\u003c/p\u003e\n\u003cdiv style=\"max-width: 1345px;\"\u003e\u003cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 32.1142%;\"\u003e\u003ciframe src=\"//iframely.net/VyLswwI\" style=\"top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;\" allowfullscreen\u003e\u003c/iframe\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cp\u003eThat‚Äôs why I don‚Äôt like this choice of dropping another huge announcement with no anticipation. Was it only for the joy of scaring the competitors? Microsoft Fabric, all cool and shiny, \u003cem\u003ethe joy of every Data Engineer and Data Analyst\u003c/em\u003e, still leaves my biggest question remains unanswered.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHow will Fabric coexist with the existing suite (Synapse, Data Lake, Power BI)?\nFor how much they will be supported and updated? How the migration will work, eventually?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://learn.microsoft.com/en-us/fabric/\"\u003eMicrosoft Docs\u003c/a\u003e only says ‚Äò\u003cem\u003eMigration paths will soon be made available to help transition teams that are ready to switch services\u003c/em\u003e‚Äô, but this is dangerous territory for rushed decisions. And I‚Äôm not even worrying about vendor lock-in (yet).\u003c/p\u003e\n\u003cp\u003eI think that Microsoft is killing it this year, and the AI announcements were already enough for the press and the business users. Such a relevant change in the Data Platform is extremely welcomed, but I would have preferred a slowly rolled introduction, to leave us the time to digest the news and get ready to test the new features. Now I‚Äôm left with 7 services I want to try, almost zero documentation available yet, and the worry that the existing tools will be impacted by the update in the short term.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI feel confused.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI admit that it‚Äôs fun and nice to read about all the shiny updates incoming and I think that the team made an amazing job, but rushed announcements and hype trains don‚Äôt sound well for data processing platforms, where \u003cstrong\u003esecurity, performance and reliability\u003c/strong\u003e are what matters.\nWhile cautious, I\u0026rsquo;m hopeful and curious for the exciting future of the Microsoft Azure platform, which will furtherly enhance the amazing results we are capable to achieve with our data.\u003c/p\u003e\n","description":"","image":"/images/fabric/fabric_title.jpg","permalink":"http://localhost:1313/posts/2023/05/the-unnecessary-hype-fabric/","title":"The unnecessary hype strategy behind Microsoft Fabric"},{"content":"\u003cp\u003eThis is a fun story, with a series of technologies and topics that I couldn\u0026rsquo;t believe they were capable of living together\u0026hellip; EDM, TikTok, Text-To-Speech, AI, Playwright\u0026hellip; Many times, when going down this over-engineered rabbit hole, I thought, \u0026ldquo;OK, I have to write about this thing.\u0026rdquo; And also, \u0026ldquo;What am I doing here with my time?\u0026rdquo;\u003c/p\u003e\n\u003ch2 id=\"-some-context\"\u003eüìö Some context\u003c/h2\u003e\n\u003cp\u003eSo, here are a few key things to be aware of:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eI write reviews for an electronic music (EDM) blog. It\u0026rsquo;s not too professional, just my thoughts on the music I listen to.\u003c/li\u003e\n\u003cli\u003eI\u0026rsquo;m a total newbie to TikTok, and I don\u0026rsquo;t use it regularly.\u003c/li\u003e\n\u003cli\u003eBeing lazy by nature, I love automating tasks.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEverything began when \u003ca href=\"https://www.hdblog.it/mercato/articoli/n569014/antitrust-impone-meta-riprendere-trattative-siae/\"\u003eInstagram encountered copyright issues with the Italian SIAE\u003c/a\u003e regarding music stickers. Consequently, Meta\u0026rsquo;s social media platform decided to temporarily remove the option of adding music to posts. This was a significant concern for my blog since we frequently used this feature, allowing readers to listen to the music while reading the article on our homepage. Additionally, Instagram heavily emphasizes videos, following the success of TikTok, resulting in a continuous decline in reach for our static posts.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s when the idea struck me: \u0026ldquo;\u003cem\u003ewe should transition to video reviews.\u003c/em\u003e\u0026rdquo;\u003c/p\u003e\n\u003cp\u003eSocial media isn\u0026rsquo;t the primary focus of our blog, and I use it sparingly. Typically, I write the review, publish it on the website, and then share an image containing the content and link on social media using \u003ca href=\"https://www.hootsuite.com/\"\u003eHootsuite\u003c/a\u003e. I\u0026rsquo;ve automated the process as much as possible, so it usually takes no more than 5 minutes (excluding the time required to write the content, of course, but that\u0026rsquo;s a separate matter).\u003c/p\u003e\n\u003cp\u003eTherefore, editing and recording TikTok videos shouldn\u0026rsquo;t exceed that time frame; that was the main priority. I also wanted to acquire video editing skills that could prove useful for future projects. Additionally, since we\u0026rsquo;re on the topic, I thought it would be beneficial to explore the chaotic realm of TikTok, considering it\u0026rsquo;s the direction in which social media is evolving.\u003c/p\u003e\n\u003ch2 id=\"-the-starting-point-redditvideomakerbot\"\u003eüè† The starting point: RedditVideoMakerBot\u003c/h2\u003e\n\u003cp\u003eMy idea was to download generic abstract video backgrounds, add the sound of the reviewed song using Python and FFMPEG, and manually insert the article text with the TikTok app before uploading. It was a bit tedious and slow, but since this was an experiment for a social media platform I don\u0026rsquo;t use and a small niche blog, there was no pressure.\u003c/p\u003e\n\u003cp\u003eThen, I stumbled upon \u003cstrong\u003e\u003ca href=\"https://github.com/elebumm/RedditVideoMakerBot\"\u003eRedditVideoMakerBot\u003c/a\u003e\u003c/strong\u003e, my Lord and Savior.\u003c/p\u003e\n\u003cp\u003eI want to publicly thank and praise \u003ca href=\"https://github.com/elebumm\"\u003eelebumm\u003c/a\u003e and their team for this ingenious repository. It has 5k stars, 70+ contributors, advanced CI pipelines, and a list of libraries in the requirements with some famous names:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/microsoft/playwright\"\u003eplaywright\u003c/a\u003e (web testing framework)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/praw-dev/praw\"\u003epraw\u003c/a\u003e (Reddit\u0026rsquo;s API wrapper)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pytube/pytube\"\u003epytube\u003c/a\u003e (YouTube\u0026rsquo;s downloader)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kkroening/ffmpeg-python\"\u003effmpeg-python\u003c/a\u003e (video editing)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pallets/flask\"\u003eFlask\u003c/a\u003e (micro-framework for web apps)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pytorch/pytorch\"\u003epytorch\u003c/a\u003e, \u003ca href=\"https://github.com/huggingface/transformers\"\u003etransformers\u003c/a\u003e (AI libraries)\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pndurette/gTTS\"\u003egTTS\u003c/a\u003e, \u003ca href=\"https://github.com/nateshmbhat/pyttsx3\"\u003epyttsx3\u003c/a\u003e (Text-To-Speech models)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAre we building a spaceship?!\nNo, this complex and DEFINITELY over-engineered architecture serves one, very, very specific purpose.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eScrapes a post\u0026rsquo;s data from Reddit and create a TikTok videos with an AI\u0026rsquo;s text-to-speech-generated voiceover and a gameplay background\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cvideo class=\"video-shortcode\" style=\"max-width:100%;height:auto;\" preload=\"auto\" controls\u003e\r\n    \u003csource src=\"/images/reviews_tiktok/test.mp4\" type=\"video/mp4\"\u003e\r\n    There should have been a video here but your browser does not seem\r\n    to support it.\r\n\u003c/video\u003e\n\u003cp\u003eThis is ridiculously specific and I\u0026rsquo;m fascinated by the capabilities of programmers who are adding features to this amazing project. The level of configuration is impressive, with a GUI, multiple voice options, AI-powered post filtering, and even content translation. The settings are extensive and well-documented. This is better maintained than many core libraries in Python!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/reviews_tiktok/redditvideomarkerbot.jpg\" alt=\"redditvideomarkerbot-strategy\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=3gjcY_00U1w\"\u003e\u003cimg src=\"https://user-images.githubusercontent.com/6053155/173631669-1d1b14ad-c478-4010-b57d-d79592a789f2.png\" alt=\"lewisthumbnail\"\u003e\n\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eSo I forked it and started building my OWN TikTok creator framework starting from RedditVideoMakerBot.\u003c/p\u003e\n\u003ch2 id=\"-gather-text-and-screenshots-from-my-blog\"\u003eüï∑Ô∏è Gather text and screenshots from my blog\u003c/h2\u003e\n\u003cp\u003eThe initial task was to obtain the content: innstead of relying on the Reddit API, I made some code adjustments and replaced it with an HTTP request to my public blog\u0026rsquo;s website. This enabled me to download the paragraphs and utilize headless Google Chrome with Playwright to capture screenshots for each segment of the video.\u003c/p\u003e\n\u003ch2 id=\"-generate-the-voiceover\"\u003eüé§ Generate the voiceover\u003c/h2\u003e\n\u003cp\u003eRedditVideoMakerBot offers an extensive range of 7 libraries, including Streamlab and AWSPolly, along with over 20 voices for text-to-speech conversion. The advancements in this technology are truly remarkable, with some voices sounding incredibly human-like.\u003c/p\u003e\n\u003cp\u003eFor my project, I opted for the \u003cem\u003e\u0026ldquo;male funny\u0026rdquo;\u003c/em\u003e voice from TikTok, which is conveniently accessible with an account and has a natural tone that suits my needs perfectly. The code then combines multiple small .mp3 files, merging them into the first component of the final result sync.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/reviews_tiktok/tts.jpg\" alt=\"tts-strategy\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-finding-the-drop\"\u003eüîç Finding \u0026lsquo;The Drop\u0026rsquo;\u003c/h2\u003e\n\u003cp\u003eThe initial steps were relatively straightforward, but that\u0026rsquo;s when I had to take the reins. My task was to incorporate the song that is being review into the audio track as a background while the text-to-speech (TTS) voice narrates the article.\u003c/p\u003e\n\u003cp\u003eTo achieve this, my code opens the song\u0026rsquo;s .mp3 file, crops it to match the duration of the voiceover audio, reduces its volume by 70%, and seamlessly blends the two files together. Luckily, \u003ca href=\"https://ffmpeg.org/\"\u003eFFMPEG\u003c/a\u003e, the library used for video editing, handles these tasks, saving me the need to learn another framework.\u003c/p\u003e\n\u003cp\u003eHowever, I encountered an obstacle at this point. I wanted the most energetic section of the song, known as the \u0026ldquo;Drop\u0026rdquo; or the climax, to start right at the beginning of the video to immediately capture the viewer\u0026rsquo;s attention. Automating this process turned out to be more challenging than expected. While it\u0026rsquo;s a simple task for a human, finding the right segment programmatically proved to be non-trivial.\u003c/p\u003e\n\u003cp\u003eDuring my research, I came across an intriguing thesis titled \u003ca href=\"http://essay.utwente.nl/82333/1/Bachelor_Thesis.pdf\"\u003e\u0026ldquo;Finding \u0026lsquo;The Drop\u0026rsquo;: Recognizing the climax in electronic music using classification models\u0026rdquo;\u003c/a\u003e by Koen van den Brink. The author utilized AI techniques, including Support Vector Machines and Convolutional Neural Networks, to identify the climax point in a song by analyzing its spectrogram. Discovering this thesis was a delightful moment as I realized someone else had faced a similar problem and even conducted research on it, providing valuable insights and motivation for my own project.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/reviews_tiktok/thesis.jpg\" alt=\"thesis\"\u003e\u003c/p\u003e\n\u003cp\u003eHowever, I opted not to train an entire convolutional neural network and over-engineer my solution solely for finding the right segment for my TikTok videos. Instead, I relied on my personal experience and examined a few spectrograms, measuring the noise levels (in decibels) at each second of the song. Surprisingly, this approach yielded satisfactory results without the need for complex AI models.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/reviews_tiktok/wave.jpg\" alt=\"soundwave\"\u003e\u003c/p\u003e\n\u003cp\u003eMy function kicks in after 25% of the song has played and looks for a specific moment when:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe next second is at least 5% noisier\u003c/li\u003e\n\u003cli\u003eThe noise level in the next second should be in the 99th percentile across the entire duration of the song\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eYep, that\u0026rsquo;s the climax. So simple, so effective. It works for many music genres and took me 5 minutes to code.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/reviews_tiktok/wave_strategy.jpg\" alt=\"soundwave-strategy\"\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efind_drop\u003c/span\u003e(df: pd\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDataFrame) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e int:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    THRESHOLD_MAX_DB \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e round(df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDB\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax() \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.99\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    THRESHOLD_DELTA \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0.05\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e range(len(df)\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        current_sec \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eiloc[i]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        next_sec \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e df\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eiloc[i\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        delta \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e (next_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDB \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e current_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDB) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e current_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (next_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDB \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e THRESHOLD_MAX_DB) \u003cspan style=\"color:#f92672\"\u003eand\u003c/span\u003e (delta \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e THRESHOLD_DELTA):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            print(\u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Found a drop! At #\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003ecurrent_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ename\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e current_sec\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ename\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"-merge-audio-screenshot-and-video-parts\"\u003e‚úÇÔ∏è Merge audio, screenshot and video parts\u003c/h2\u003e\n\u003cp\u003eAt this stage, working with FFMPEG drove me a little crazy. The Python wrapper posed significant limitations, as it is primarily designed as a command-line tool rather than a comprehensive library. I had to meticulously synchronize different elements: the segments of screenshots, the background video featuring EDM festival footage, and the combined voiceover with background music, while ensuring that the resolution was properly cropped for mobile devices, which added further time to the process. Throughout all of this, \u003ca href=\"https://github.com/kkroening/ffmpeg-python/issues/165\"\u003ethe persistent and unhelpful ffmpeg error messages continued to haunt me\u003c/a\u003e (until I discovered how to override the stderr)\u003c/p\u003e\n\u003ch2 id=\"-the-result-my-first-tiktok\"\u003eüèÜ The Result: my first TikTok!\u003c/h2\u003e\n\u003cp\u003eThe videos I can generate may not be award-winning or as captivating as the average TikTok content, but for me, it\u0026rsquo;s a personal victory. I take great pride in my tiny framework, which can be adjusted for other solutions in case of new video/audio editing ideas.\u003c/p\u003e\n\u003cvideo class=\"video-shortcode\" style=\"max-width:100%;height:auto;\" preload=\"auto\" controls\u003e\r\n    \u003csource src=\"/images/reviews_tiktok/tiktok.mp4\" type=\"video/mp4\"\u003e\r\n    There should have been a video here but your browser does not seem\r\n    to support it.\r\n\u003c/video\u003e\n\u003cp\u003eDuring this process, I gained valuable insights into the reliability of Text-To-Speech technologies, which have come a long way, and FFMPEG, a powerful tool for editing multimedia files once you grasp its commands. Previously, I perceived video and audio editing as daunting, requiring complex software and expertise (which it does, for professional purposes!). However, being able to make basic edits with code gave me a sense of accomplishment.\u003c/p\u003e\n\u003cp\u003eCurrently, I have garnered a modest number of views (under the thousand) on TikTok. I need to explore ways to enhance performance and determine if this type of content can truly succeed on the platform. Additionally, I aspire to evolve the FFMPEG component, perhaps by incorporating transitions or more advanced visual effects.\u003c/p\u003e\n\u003cp\u003eOne thing is certain, this has been an enjoyable experience, and I\u0026rsquo;m excited to continue exploring and refining my work. I extend my gratitude once again to \u003ca href=\"https://github.com/elebumm\"\u003eLewis Menelaws (elebumm)\u003c/a\u003e and his library for providing the foundation for this endeavor.\u003c/p\u003e\n","description":"","image":"/images/reviews_tiktok/title.jpg","permalink":"http://localhost:1313/posts/2023/05/how-i-generated-automatic-reviews-tiktok/","title":"How I ended up with AI-generated Music Reviews on TikTok"},{"content":"\u003cp\u003eDuring these months, I had the chance to take a look at Power BI at the enterprise level, juggling advanced requests from hundreds of users and reports. I am impressed by all the features that the developers have rolled out recently, greatly improving both user and creator experiences. However, one should always maintain an impartial critical vision of the tools, no matter how useful they can be. For this reason, I decided to share my thoughts about some features that are currently lacking or require over-complicated solutions (often from third-party tools), in the hope that Microsoft will find them useful when working on Power BI\u0026rsquo;s development roadmap.\u003c/p\u003e\n\u003cp\u003eWhile writing, I found myself lucky as all the points I\u0026rsquo;ll state are currently edge cases or issues I\u0026rsquo;ve solved with other solutions. So, I would say that overall, Power BI has reached a level of maturity where it smoothly performs its standard job (data visualization) and provides tons of useful tools, customization, and synergies with the Office suite while being updated monthly.\u003c/p\u003e\n\u003cp\u003eThat being said, there are still a few features that could use some attention. For each point, I\u0026rsquo;ve included a \u0026ldquo;üìø Hope level\u0026rdquo; rating, speculating about the likelihood of these features being implemented in the near future.\nPlease note that these ratings are based on my own personal speculations as of March 2023.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/power_bi_missing/roadmap.png\" alt=\"roadmap\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-basic-version-control\"\u003eüî¢ Basic Version Control\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 7/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThat\u0026rsquo;s an old story: .pbix files are binary, so they can\u0026rsquo;t be easily tracked and compared with git or other versioning systems. It\u0026rsquo;s ironic that the parent company owns Github, but I suppose priorities differ, as evidenced by the recent announcement of \u003ca href=\"https://github.blog/2023-03-22-github-copilot-x-the-ai-powered-developer-experience/\"\u003eCopilot X with GPT-4\u003c/a\u003e. There aren\u0026rsquo;t many big teams of Power BI developers out there who really need the feature.\u003c/p\u003e\n\u003cp\u003eIn our situation, this became increasingly frustrating month after month as our models grew larger, and there was still no easy way to compare different versions. I addressed this in \u003ca href=\"https://mutt0-ds.github.io/posts/2022/11/turbulent-journey-power-bi-source-control/\"\u003eanother blog post\u003c/a\u003e, where I created an over-engineered Azure Pipeline that downloads a third-party tool (Tabular Editor 2) every time, uses it to extract JSON metadata, and commits it together with the model. This allowed us to keep track of parts of the model such as tables, columns, and relationships, but not charts or visuals. Git integration \u003ca href=\"https://twitter.com/mthierba/status/1618701222177042433\"\u003ewas announced a few weeks ago\u003c/a\u003e, then canceled, then supported in an upcoming \u003ca href=\"https://twitter.com/PowerBITips/status/1636675335591788545/photo/1\"\u003ean upcoming TMDL\u003c/a\u003e initiative by SQLBits. While there is still no clear direction defined, things are in motion.\u003c/p\u003e\n\u003ch2 id=\"-enhanced-user-input\"\u003eüîò Enhanced User Input\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 4/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAn edge case that is more common than expected, especially in the case of forecasts, is the need for users to input one or more values (such as a coefficient of growth) and see live results in Power BI. Currently, this is rather difficult to implement, either with \u003ca href=\"https://www.youtube.com/watch?v=uPHwjPRnRwE\"\u003eover-engineered Power App solutions\u003c/a\u003e or with a combination of tables, what-if parameters, and code (I almost lost my sanity with 100 lines of DAX code).\u003c/p\u003e\n\u003cp\u003eI wish there were a plugin or chart with a \u0026ldquo;User Input\u0026rdquo; feature that includes an input area where users can enter values that will populate live data. However, I understand how complicated this could be at the structural level and that it may not be worth the effort for an edge case. Moreover, Power BI is primarily a data visualization tool, so this is not exactly what we can expect from it.\u003c/p\u003e\n\u003cp\u003eMicrosoft has partially addressed this with the \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/collaborate-share/service-analyze-in-excel\"\u003eAnalyze in Excel\u003c/a\u003e feature: it is now easier to connect the dataset to Excel and create ad-hoc formulas from there. While waiting for a native Power BI solution, let\u0026rsquo;s stick to using Excel.\u003c/p\u003e\n\u003ch2 id=\"-developer-tools\"\u003eüß∞ Developer tools\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 6/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eCompared to other Microsoft products such as \u003ca href=\"https://www.typescriptlang.org\"\u003eTypeScript\u003c/a\u003e or \u003ca href=\"https://playwright.dev\"\u003ePlaywright\u003c/a\u003e, Power BI lacks some basic developer-friendly plugins. This is mostly due to the fact that BI developers who need them represent a small niche. However, as someone who comes from other languages nd uses \u003ca href=\"https://code.visualstudio.com\"\u003eVS Code\u003c/a\u003e all the time, I find the lack of support for my daily activities rather surprising, especially when dealing with messy DAX queries (Power BI\u0026rsquo;s scripting language, inspired by Excel\u0026rsquo;s formula language).\u003c/p\u003e\n\u003cp\u003eI don\u0026rsquo;t like DAX, and sometimes I feel like giving up on it. Microsoft doesn\u0026rsquo;t really provide me with anything to improve my experience when writing queries that are more than two lines long. Poor DAX doesn\u0026rsquo;t even have a logo!\u003c/p\u003e\n\u003cp\u003eLuckily, I rarely have to create long DAX queries in Power BI. The majority of calculation logic is in the data warehouse, but sometimes there are edge cases that require ad-hoc DAX measures of multiple lines.\u003c/p\u003e\n\u003cp\u003eCreating them in the Power BI tab is only suitable if you like to become frustrated with debugging. The simplest solution is another third-party tool, \u003ca href=\"https://www.sqlbi.com/tools/dax-studio/\"\u003eDAX Studio\u003c/a\u003e by SQLBI, which enables syntax highlighting, formatting, linting, quick access to documentation, and rather simple debugging. I highly recommend DAX Studio, which is a wonderful and open-source tool. However, considering that Microsoft owns VS Code, I am waiting for some DAX-compatible extensions to better integrate my workflow.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/power_bi_missing/dax-studio-v3-ui.png\" alt=\"dax studio\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-intermediate-level-documentation\"\u003eüìÑ Intermediate-level Documentation\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 2/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThis is a struggle I am having with Microsoft in general, as its documentation spectacularly manages to overcomplicate even simple concepts. In my opinion, \u003ca href=\"https://learn.microsoft.com\"\u003eMicrosoft docs\u003c/a\u003e are great for advanced users who can understand all the technical jargon that is taken for granted, but for beginners or even intermediate developers, this can be overwhelming.\u003c/p\u003e\n\u003cp\u003eFor beginners, I recommend \u003ca href=\"https://dax.guide\"\u003edax.guide\u003c/a\u003e from the SQLBI team. Just compare their \u003ca href=\"https://dax.guide/count/\"\u003eCOUNT\u003c/a\u003e example with the \u003ca href=\"https://learn.microsoft.com/en-gb/dax/count-function-dax\"\u003eone on Microsoft.com\u003c/a\u003e for understanding what each function does and how it works. They provide examples, working code, clear explanations of the cases, and links to other concepts.\u003c/p\u003e\n\u003cp\u003eFor the majority of intermediate doubts, such as row/filter context, data connectors, and small DAX formulas, it is still quicker to look at the \u003ca href=\"https://community.powerbi.com\"\u003ePower BI forums\u003c/a\u003e or YouTube videos, for example from \u003ca href=\"https://www.youtube.com/c/GuyinaCube\"\u003eGuy In A Cube\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://learn.microsoft.com\"\u003eLearn.microsoft.com\u003c/a\u003e remains my last hope when I\u0026rsquo;m looking for documentation, even though I consider myself an advanced user. I wish that Microsoft would simplify the website for less technical users. Luckily, the web is full of useful and informative third-party sources.\u003c/p\u003e\n\u003ch2 id=\"-composite-model\"\u003eüìà Composite model\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 8/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAnother experimental feature from Power BI that has been giving me a bit of a headache lately is the \u003ca href=\"https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-composite-models\"\u003eComposite Model\u003c/a\u003e. Don\u0026rsquo;t get me wrong, it\u0026rsquo;s a \u003cstrong\u003egame changer\u003c/strong\u003e as it makes it possible to provide a central Power BI dataset with all the data and security rules enabled, which creators can then use as a source and merge with their own data (usually Excel files).\u003c/p\u003e\n\u003cp\u003eThis is very cool, as it replaces and simplifies many manual processes while giving lots of power to secondary report creators. However, it\u0026rsquo;s still an experimental feature that requires a bit of tricky (and badly documented) steps for working on the Power BI Service, while on Desktop it is pretty straightforward. Here are some issues I\u0026rsquo;ve encountered:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eViewers need Build Permissions to all the underlying datasets (which could be a security issue)\u003c/li\u003e\n\u003cli\u003eApparently, RLS impersonation gets screwed up. I tried to impersonate users, and I was able to look at all the data (but in reality, they can\u0026rsquo;t)\u003c/li\u003e\n\u003cli\u003eIf the original dataset has a gateway, we have to set up credentials on all the Composite Model datasets and map everything on the gateway\u003c/li\u003e\n\u003cli\u003eCreators can\u0026rsquo;t add calculated columns or tables to the tables from the original dataset, which blocks many custom logic requirements\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEven though the Composite Model is a great starting point, it still requires some tweaks to achieve before it can be adopted fully.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://learn.microsoft.com/en-us/power-platform-release-plan/2020wave2/power-bi/media/composite-models.jpg\" alt=\"composite model\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-ai-enhanced-capabilities\"\u003eü§ñ AI-enhanced capabilities\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìø Hope level: 9/10\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI wrote the final line just to tag the post with #chatgpt and #agi for boosting views.\nJoking!\u003c/p\u003e\n\u003cp\u003eI am curious to see how Microsoft will implement Open AI\u0026rsquo;s tool in Power BI, as the current options are a bit limited in terms of UX experience. Yes, there is the Q\u0026amp;A feature, but it hasn\u0026rsquo;t clicked with me as it\u0026rsquo;s not \u0026ldquo;that\u0026rdquo; smart or intuitive at the moment.\u003c/p\u003e\n\u003cp\u003eI wouldn\u0026rsquo;t be surprised to see a ChatGPT-like prompt where users can type their questions and receive quick replies, charts, or even help with applying filters or manipulating tables. If the system can be tweaked with external documentations and ad-hoc instructions (now possible with the \u003ca href=\"https://github.com/openai/chatgpt-retrieval-plugin\"\u003eRetrieval Plugin\u003c/a\u003e), it will make Power BI much more powerful for helping people discover new data and information.\u003c/p\u003e\n\u003cp\u003eGiven the current hype and excitement for AI, I\u0026rsquo;m confident that Microsoft will adapt Copilot\u0026rsquo;s features in Power BI and work some magic. It\u0026rsquo;s the perfect time.\u003c/p\u003e\n","description":"","image":"/images/power_bi_missing/what-power-bi-missing.jpg","permalink":"http://localhost:1313/posts/2023/03/what-power-bi-is-missing/","title":"What Power BI is still missing"},{"content":"\u003ch2 id=\"-introduction-to-second-brains--brain-dumping\"\u003eüß† Introduction to Second Brains \u0026amp; Brain Dumping\u003c/h2\u003e\n\u003cp\u003eAs I\u0026rsquo;m working with data all the time, I\u0026rsquo;m aware of the importance of keeping it in a safe and structured place, where it can be easily accessed when needed, which could be days, weeks or even years in the future. Thus, organizing my information, tasks, and notes is a key activity in my work (and personal) life. Without a clear system, I would feel lost in chaos, and my productivity would plunge (also considering that my memory sucks).\u003c/p\u003e\n\u003cp\u003eToday, I want to introduce you to two buzzwords related to the note taking: \u003cstrong\u003eBrain Dumping\u003c/strong\u003e and \u003cstrong\u003eSecond Brain\u003c/strong\u003e. Brain Dumping is a technique that involves storing as quick as possible any useful data in a safe place, so it can be easily accessed and cleaned later and the brain can avoid worrying about them. For example, if you have a code snippet that helped you solve a problem, you can copy and paste it into a note in your \u0026ldquo;_TO_ORGANIZE\u0026rdquo; folder.\nWhen I\u0026rsquo;m free, usually at the end of the day, I cleanse the note, add some context to the code, and put them in the right section of my documentation tool. Some old-schoolers use post-it notes and agendas, I use Second Brains.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA Second Brain is a methodology for saving and systematically reminding us of the ideas, inspirations, insights, and connections we\u0026rsquo;ve gained through our experience. It expands our memory and our intellect using the modern tools of technology and networks.\n\u0026ndash; \u003ccite\u003e\u003ca href=\"https://fortelabs.com/blog/basboverview/\"\u003eTiago Forte \u003c/a\u003e\u003c/cite\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThis concept has given rise to tools like which are strucuted to help take note-taking to the next level.\nThese tools, structured like wikis, extend the concept of Brain Dumping by making taking notes, connecting and structuring them a bliss, or in my special case, even a \u0026ldquo;fun\u0026rdquo; activity. The biggest players are \u003ca href=\"https://roamresearch.com/\"\u003eRoam Research\u003c/a\u003e, \u003ca href=\"https://www.notion.so/\"\u003eNotion\u003c/a\u003e, and \u003ca href=\"https://obsidian.md/\"\u003eObsidian\u003c/a\u003e, all with different characteristics but sharing the same core.\u003c/p\u003e\n\u003cp\u003ePersonally, I love using Notion for my personal Second Brain because of its user-friendly UX. You may already know my deep love for Notion , which I use on my daily life and I contribute to the Python library. For starters, I recommend it thanks to its user-friendly UX, and it\u0026rsquo;s the go-to choice for my personal Second Brain. Sometimes I give access to part of my Notion wiki to other people and they immediately catch up with its structure.\u003c/p\u003e\n\u003cp\u003eHowever, for work, I\u0026rsquo;ve found that Obsidian is the way to go.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/obsidian/notes.png\" alt=\"notes\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-obsidian-at-work\"\u003eüíº Obsidian at work\u003c/h2\u003e\n\u003cp\u003eUnfortunately, Notion stores data on their servers without a self-hosted option and it doesn\u0026rsquo;t work offline, so putting sensitive data in there is out of question. Obsidian, differently, works completely offline (so unless you pay for a Premium service or use a shared directory you can\u0026rsquo;t access its notes from other devices). Its notes are \u0026ldquo;just\u0026rdquo; Markdown files (a special textual format with a specific syntax for basic customization) stored in the PC, just like .txt documents\u0026hellip; And the program reads them like Notepad, super minimal and lightweight.\u003c/p\u003e\n\u003cp\u003eHowever, Obsidian notes have a singular characteristic that makes them particularly suitable in my current environment\u0026hellip;\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThey are like neurons\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eTo put it plainly, Obsidian is literally a second brain. Notes don\u0026rsquo;t have to be structured in a folder and can be interconnected with hyperlinks, which creates an out-of-world experience for exploring and finding new relationships. And all it takes is mentioning the other file between brackets! A picture is worth a thousand words, and here is a typical Obsidian graph view that allows you to visually explore how notes are linked to each other.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/obsidian/obsidian_graph.png\" alt=\"graph view\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/obsidian/graph_search.gif\" alt=\"graph view 2\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-why-i-have-chosen-obsidian\"\u003e‚òù Why I have chosen Obsidian\u003c/h2\u003e\n\u003cp\u003eMy job is a constant juggling act of multiple large projects, meetings, tickets, and reports from various data sources. It\u0026rsquo;s a labyrinth of information that\u0026rsquo;s impossible to navigate without getting lost. But then, Obsidian comes to the rescue.\u003c/p\u003e\n\u003cp\u003eWith its ability to link notes together, I can map out the entire flow of information and stay on top of everything. Here\u0026rsquo;s how I do it:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEach meeting is linked to the relevant projects or open tickets.\u003c/li\u003e\n\u003cli\u003eEach ticket is linked to the reports and data sources notes.\u003c/li\u003e\n\u003cli\u003eEach data source is linked to its business logics and other data sources.\u003c/li\u003e\n\u003cli\u003eEach project has documentation and links to all related meetings.\u003c/li\u003e\n\u003cli\u003eEach script is linked to the ticket or project it\u0026rsquo;s been useful for.\u003c/li\u003e\n\u003cli\u003eAnd so on, depending on the scenario.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eUsing Obsidian\u0026rsquo;s graph view, I can quickly access all the information connected to a single object. During meetings or whenever I gain new intel, I quickly jot it down using the \u0026ldquo;Brain Dumping\u0026rdquo; strategy and store it in Obsidian. Later, I organize the notes, link them together, and expand the wiki.\u003c/p\u003e\n\u003ch2 id=\"-a-brief-overview-of-the-structure\"\u003eüìÅ A brief overview of the structure\u003c/h2\u003e\n\u003cp\u003eMy Obsidian vault is a treasure trove of information that I\u0026rsquo;ve decided to structure in a way that is easy for my colleagues to access. It\u0026rsquo;s a semi-structured schema with high flexiblity as it\u0026rsquo;s not required by Obsidian (it doesn\u0026rsquo;t even have a sort option) that helps to organize the wealth of information that I need to manage every day. With main folders and subfolders, I can easily navigate my way around and find what I need quickly.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s a snapshot of my Obsidian vault structure:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eTO_ORGANIZE\u003c/strong\u003e - this is where I store new notes by default before cleaning them up.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDocs\u003c/strong\u003e - where I keep all the important documentation that my team and I need to access quickly. This includes user guides, technical guides, checklists, and - information for Power BI reports, data sources, and other special cases.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eProjects\u003c/strong\u003e - unique folders for each project that I\u0026rsquo;m working on. These folders usually contain other subfolders with additional information.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTickets\u003c/strong\u003e - a comprehensive list of open and closed tickets, divided by department.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMeetings\u003c/strong\u003e - notes from all the meetings I attend, divided by department.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePersonal\u003c/strong\u003e - a space for me to keep personal notes and scripts, divided by language and context. It\u0026rsquo;s also where I keep notes like this one.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOld\u003c/strong\u003e - a folder for older notes that I don\u0026rsquo;t need to access regularly.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMedia\u003c/strong\u003e - the default folder where Obsidian stores all media files.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWith this structure, I can easily find and access the information that I need. It\u0026rsquo;s a system that is not only efficient but also visually appealing. I could remove all the folders if I wanted to, but the structure helps to give a familiar feel to other users.\u003c/p\u003e\n\u003ch2 id=\"-plugins-i-use\"\u003eüî® Plugins I use\u003c/h2\u003e\n\u003cp\u003eThere is a plethora of options available in the marketplace to enhance the Obsidian experience. While I prefer to keep things streamlined, here are a few plugins that I can wholeheartedly recommend:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/deathau/cm-editor-syntax-highlight-obsidian\"\u003eEditor Syntax Highlight\u003c/a\u003e: exceedingly helpful, especially when dealing with notes containing code snippets. It makes syntax highlighting a breeze, and makes the code much more readable.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ganesshkumar/obsidian-excel-to-markdown-table\"\u003eExcel to Markdown table\u003c/a\u003e: an absolute lifesaver when you need to copy data from Excel files. It takes care of all the formatting issues, saving you a ton of time and effort.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/FlorianWoelki/obsidian-icon-folder\"\u003eIcon Folder\u003c/a\u003e: I love this plugin because it allows me to maintain the same aesthetic I was accustomed to in Notion, where every folder had a corresponding emoji. It\u0026rsquo;s a small touch, but it makes the interface much more enjoyable to use.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/reorx/obsidian-paste-image-rename\"\u003ePaste Image rename\u003c/a\u003e: If you\u0026rsquo;re someone who frequently pastes screenshots or other images into your notes, then it is an absolute must-have.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/denolehov/obsidian-url-into-selection\"\u003ePaste URL into selection\u003c/a\u003e: another one that replicates the functionality of Notion, and it\u0026rsquo;s a time-saver for me. It allows me to quickly paste a URL into a selected piece of text in my notes.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/mgmeyers/obsidian-smart-typography\"\u003eSmart Typography\u003c/a\u003e: this plugin is all about the aesthetics, and it\u0026rsquo;s a small thing that makes a big difference. It makes minor typographic tweaks (like replacing hyphens with en-dashes), which makes the notes more visually appealing and easier to read.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jdbrice/obsidian-code-block-copy\"\u003eCopy Button for code blocks\u003c/a\u003e: a tiny addition that saves me a ton of time. It adds a copy button to code blocks, so you can quickly copy the code without having to highlight it and use the keyboard shortcut. I can\u0026rsquo;t understand why this functionality isn\u0026rsquo;t already built into Obsidian.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-obsidian-limitations\"\u003e‚õî Obsidian limitations\u003c/h2\u003e\n\u003cp\u003eAt present, there are some limitations with Obsidian that are impacting my experience. Let\u0026rsquo;s take a closer look:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUnfortunately, there is no option to share a note as a public link that can be accessed by others (web or within my organization). While I understand Obsidian\u0026rsquo;s focus on privacy and \u0026ldquo;private notes,\u0026rdquo; I do miss the convenience of being able to easily share a page as a link with a colleague or leave clickable shortcuts to links in a folder like in Notion.\u003c/li\u003e\n\u003cli\u003eThe PDF export feature is limited, and there\u0026rsquo;s no way to export notes in bulk. For instance, I\u0026rsquo;d like to automatically upload a PDF of some notes in a folder when I edit them with specific formatting. But unless I start learning \u003ca href=\"https://github.com/Wandmalfarbe/pandoc-latex-template\"\u003eLaTeX and pandoc\u003c/a\u003e, I\u0026rsquo;m unable to do so.\u003c/li\u003e\n\u003cli\u003eSyntax formatting in code blocks isn\u0026rsquo;t enabled unless you have \u003ca href=\"https://github.com/deathau/cm-editor-syntax-highlight-obsidian\"\u003ean outdated plugin\u003c/a\u003e that doesn\u0026rsquo;t even support DAX (Power BI\u0026rsquo;s script language) formatting. While I\u0026rsquo;m working on a plugin fork to address this issue, it\u0026rsquo;s a tedious process.\u003c/li\u003e\n\u003cli\u003eWhile the Obsidian team is currently focused on the \u003ca href=\"https://obsidian.md/canvas\"\u003eCanvas feature\u003c/a\u003e, which is a fantastic addition for those who previously used Graph.io and similar software, the frequency and impact of updates are slow due to the team\u0026rsquo;s small size. Thus, I doubt that my previous issues will be addressed quickly.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eMoreover, I would strongly advise against using Obsidian if you are not fond of its neural structure, especially if your notes are not often interconnected. This is due to the fact that the learning curve can be steep, requiring the mastery of several shortcuts and a certain discipline in maintaining notes. If you neglect to organize your vault, it can quickly become overwhelming. It\u0026rsquo;s worth noting that if you\u0026rsquo;re not utilizing connections, you\u0026rsquo;re only tapping into half of Obsidian\u0026rsquo;s capabilities.\u003c/p\u003e\n\u003ch2 id=\"-first-results\"\u003eü•≥ First Results\u003c/h2\u003e\n\u003cp\u003eIt\u0026rsquo;s been four months since I started using Obsidian, and it has already been a game-changer for me on multiple occasions. Initially, I was skeptical due to my love for Notion, but the adoption process was seamless, and my productivity has definitively increased. The most incredible thing about Obsidian is how I can instantly look back at past meetings connected to a particular topic and explore further, find connections, and expand my knowledge by examining other notes and reconstructing the entire scenario.\u003c/p\u003e\n\u003cp\u003eAn excellent example that I presented in my proposal was a story about a user who raised a question during a brief meeting about an advanced Power BI feature. During the meeting, I took some notes on the issue, then created another note with a guide, and then another note about the following meeting where I introduced the guide. A few days later, I completely forgot where the guide was located, but I remembered the user\u0026rsquo;s happy reaction in the second-grade related note and traced my way back to the valuable document. I use this technique multiple times a day when searching for notes, and it saves me a lot of time piece by piece. Also, I don\u0026rsquo;t have to worry about restructuring notes when a project evolves; I can just link them together and embed updates of the project in a primary super note.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static/images/obsidian/graph_view.gif\" alt=\"graph view\"\u003e\u003c/p\u003e\n\u003cp\u003eThe most significant advantage, as mentioned in the introduction, is the ease of the \u0026ldquo;brain dumping\u0026rdquo; process. Whenever I come across new information, I can open Obsidian in one second, create a note with a shortcut, and jot down a few lines to be cleaned up later. My brain is now free to keep listening and learning without worrying about forgetting anything valuable. Yes, it\u0026rsquo;s a huge boost to my personal sanity and productivity.\u003c/p\u003e\n\u003cp\u003eCurrently, I also have a few scripts that automate the process of cleaning links and organizing notes in my vault, as they are just a bunch of .md textual files in the end.\u003c/p\u003e\n\u003cp\u003eIf you\u0026rsquo;re interested in this innovative way of organizing notes, then I recommend giving Obsidian a try. There are tools available for importing notes from \u003ca href=\"https://github.com/dmuth/evernote-to-obsidian\"\u003eEvernote\u003c/a\u003e, \u003ca href=\"https://github.com/Segza/OneNote-to-Obsidian\"\u003eOneNote\u003c/a\u003e and \u003ca href=\"https://github.com/connertennery/Notion-to-Obsidian-Converter\"\u003eNotion\u003c/a\u003e, so the transition is seamless. It takes a while to get used to Obsidian; personally, it took me a week to become familiar with the process, but then the fun began.\u003c/p\u003e\n","description":"","image":"/images/obsidian/obsidian.jpg","permalink":"http://localhost:1313/posts/2023/02/obsidian-productivity-second-brain/","title":"Maximizing Productivity with Obsidian: My Second Brain for Organizing Work Notes"},{"content":"\u003ch1 id=\"presentation-patterns\"\u003ePresentation Patterns\u003c/h1\u003e\n\u003cp\u003eWritten by \u003cstrong\u003e\u003ca href=\"https://nealford.com/\"\u003eNeal Ford\u003c/a\u003e, \u003ca href=\"https://matthewjmccullough.com\"\u003eMatthew McCullough\u003c/a\u003e and \u003ca href=\"http://ntschutta.io\"\u003eNathaniel Schutta\u003c/a\u003e\u003c/strong\u003e, \u003cstrong\u003e\u0026ldquo;Presentation Patterns - Techniques for Crafting Better Presentations\u0026rdquo;\u003c/strong\u003e is an encyclopedia of patterns, tips and common mistakes experienced by the authors, who have delivered thousands of presentations. In particular, they introduce ‚Äú\u003ca href=\"https://www.nofluffjuststuff.com\"\u003eNo Fluff, Just Stuff\u003c/a\u003e‚Äú, a traveling technical conference series covering a\nwide variety of topics related to software development and management.\u003c/p\u003e\n\u003cp\u003eDuring the years, they have build up their toolbox of patterns to provide killer presentations, which are divided in three main sections: \u003cstrong\u003ePrepare\u003c/strong\u003e (thinking and setting up the presentation‚Äôs key concepts), \u003cstrong\u003eBuild\u003c/strong\u003e (creating the slides), \u003cstrong\u003eDeliver\u003c/strong\u003e (present the content). While reading, I decided to categorize the items into \u003cstrong\u003ePatterns\u003c/strong\u003e, \u003cstrong\u003eAntipatterns\u003c/strong\u003e and ‚Äú\u003cstrong\u003eOthers\u003c/strong\u003e‚Äù (type of slides or special kind of presentations which I didn\u0026rsquo;t consider as a pattern).\u003c/p\u003e\n\u003cp\u003eThe book is very conference-centric with a precise focus on the IT world, which does makes sense from the author‚Äôs experience. That‚Äôs welcomed with great joy by me, even if some patterns are difficult to apply in my corporate environment, where the ‚ÄúInfoDeck‚Äù structure is requested almost every time.\u003c/p\u003e\n\u003cp\u003eNonetheless, I think that there are numerous key concepts to learn in ‚ÄúPresentation Pattern‚Äù! Thanks to its clear structure the reading is entertaining and I immediately grasped a lot of notions that I will apply in my presentations. That is one of the most useful books I‚Äôve read!\u003c/p\u003e\n\u003cp\u003e‚ÄúPresentation Patterns‚Äù has a \u003ca href=\"https://presentationpatterns.com/glossary/\"\u003edetailed glossary\u003c/a\u003e with a recap of each pattern, but I decided to write down my notes in my own way to make sure to understand every concept. By sharing them, I hope they will be useful and help making more interesting content!\u003c/p\u003e\n\u003cp\u003eYou can buy the book \u003ca href=\"https://presentationpatterns.com/\"\u003ehere\u003c/a\u003e: all credits go to the authors, who I would like to thank for their amazing job.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eKey Takeaway: don‚Äôt let the presentation tools influence your message, and you can‚Äôt either have a document or a presentation.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"span-stylecolorgreen--patternsspan\"\u003e\u003cspan style=\"color:green\"\u003e ‚úî Patterns\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"prepare\"\u003ePrepare\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüëÄ \u003cstrong\u003eKnow Your Audience\u003c/strong\u003e\nFollow this point to avoid the majority of antipatterns. Explore the event and understand as precise as possible the kind of participants and what they want. It‚Äôs important to understand the tone of the event, if it‚Äôs technical or more business-oriented. Social media can help.\u003c/li\u003e\n\u003cli\u003eüë™ \u003cstrong\u003eSocial Media Advertising\u003c/strong\u003e\nSponsor your talk with social media, by posting about the event and with a brief reminder a few hours before starting.\u003c/li\u003e\n\u003cli\u003e‚ùì \u003cstrong\u003eThe Big Why\u003c/strong\u003e\nBefore signing up (or if it‚Äôs a Required presentation, thinking about the topic), ask yourself why do you want to talk about that specific thing: you should be truly passionate, otherwise the audience will feel that!\nFor example, you may want to sell a product, introduce a technological improvement, teach something useful, help a community, improve your skills, gain visibility, or achieve personal glory.\u003c/li\u003e\n\u003cli\u003eüìñ \u003cstrong\u003eNarrative Arc\u003c/strong\u003e\nThat‚Äôs the story we want to tell, as the \u003cstrong\u003eusers are naturally interested in stories\u003c/strong\u003e, and it‚Äôs a crucial part for any successful 9and interesting) presentation.\nThe typical schema is\n\u003ccode\u003eIntroduction \u0026amp; Exposition ‚Üí Complication ‚Üí Climax ‚Üí Resolution\u003c/code\u003e\nIntroduce a context, then a problem, then show the solution. Take inspiration from superheroes, where the origin story always raises interest. When presentation attendees recognize the narrative arc, it helps them understand your material because they understand the basic framework and they can follow it in an easier way. It‚Äôs not easy to create from scratch as you have to understand the story behind your presentation, nonetheless you should always start from there.\u003c/li\u003e\n\u003cli\u003eüß† \u003cstrong\u003eForethought\u003c/strong\u003e\nBefore using the presentation tool (PowerPoint, KeyNote,‚Ä¶), \u003cstrong\u003ethink\u003c/strong\u003e. Use Post-It, mind maps, notes, but try not to immediately jump into the slide-based pattern of the tool you are using. Don‚Äôt let the presentation tool guide you but follow those four steps:\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003e\u003cem\u003eIdeate\u003c/em\u003e: generate the idea and how you are going to present it\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eCapture\u003c/em\u003e: capture the idea in an unstructured way, not on the presentation tool yet. Authors suggest an outlining tool\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eOrganize\u003c/em\u003e: find connection, think about the timeline and the structure, eventually cut or expand content\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eDesign\u003c/em\u003e: now you can start using the presentation tool!\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eüß™ \u003cstrong\u003eCrucible\u003c/strong\u003e\nAfter presenting the presentation, you will usually realize that there is something to tweak and improve. Embrace the change, the majority of the authors is constantly reworking their presentations after each conference! After presenting, remember the things that didn‚Äôt convince the public (ideally, you should find someone with brutal honesty and criticism to tell you) and update your work.\u003c/li\u003e\n\u003cli\u003eü§º \u003cstrong\u003eConcurrent Presentation\u003c/strong\u003e\nIf you are creating a group presentation, assign a Slide Wrangler who will handle the Master deck and start using the same template so merging pieces won‚Äôt be chaotic. If you want to highlight a ‚ÄúTODO‚Äù Slide to be enhanced, you can drift out from the template with the ugliest combination of font/colors to draw attention to the issue. Then, each participant will send his piece to the Slide Wrangler, who will put them together.\u003c/li\u003e\n\u003cli\u003e3Ô∏è‚É£ \u003cstrong\u003eTriad\u003c/strong\u003e\nBuild your presentation around 3 central ideas, don‚Äôt try to overload the public with too much data. It is connected to the Narrative Arc pattern (exposition, conflict, and resolution).\u003c/li\u003e\n\u003cli\u003eüïê \u003cstrong\u003eBrain Breaks\u003c/strong\u003e\nEspecially when delivering a presentation with a lot of information: add a break, usually with contextualized humor, to break the tension. Inside jokes add credibility as they mark you as an insider. Neal Ford calculates one joke every 15 minutes, but don‚Äôt make them Alienating Artifacts.\u003c/li\u003e\n\u003cli\u003eü§µ \u003cstrong\u003eLeet Grammars\u003c/strong\u003e\nIt is an alternative alphabet (aka slang) that you can use to be perceived as part as the audience, an insider. It can be easily applied when speaking technical jargon, but be sure to not overuse words you don\u0026rsquo;t know or you will immediately ruin the result (see Tower of Babble antipattern).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"build\"\u003eBuild\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüë¨ \u003cstrong\u003ePeer Review\u003c/strong\u003e\nDon‚Äôt let grammar mistakes or common errors ruin the presentation! Try to get help from copyeditors or anyone willing to proofread your work. Avoid the most common issues such as using \u003cstrong\u003epassive voices when unnecessary\u003c/strong\u003e or \u003cstrong\u003eusing complete phrases\u003c/strong\u003e (presentations should summarize my thoughts).\u003c/li\u003e\n\u003cli\u003eüîÆ \u003cstrong\u003eForeshadowing\u003c/strong\u003e\nPlace little hints at the beginning of the presentation that lead to a final revelation: it will bring the audience to a shared epiphany. It synergies with the Narrative Arc pattern, hovewer use it only once. It can be implicit (an hidden detail) or simply a slide with a question and ‚ÄúStay tuned!‚Äù.\u003c/li\u003e\n\u003cli\u003eüèõ \u003cstrong\u003eGreek Chorus (and Posse)\u003c/strong\u003e\nBring friends to the talk to support you and show positive feedbacks, influencing the other participants.\u003c/li\u003e\n\u003cli\u003eüß© \u003cstrong\u003eComposite Animations\u003c/strong\u003e\nFor a unique animation effect that catches the audience\u0026rsquo;s attention, layer two or more animations on top of each other. Don‚Äôt overdo it, use it for key slides and only if you know well which animations you should use.\u003c/li\u003e\n\u003cli\u003eüçΩ \u003cstrong\u003e√Å la Carte Content\u003c/strong\u003e\nAt the beginning of the presentation, you can poll the audience to construct their agenda by choosing what they want to hear between small chunks of content (Talklets). This is a very complex strategy as you need to be extremely prepared to the different scenarios and create additional material\u0026hellip; It works well in case of a presentation you need to share several times with groups with different knowledge levels.\u003c/li\u003e\n\u003cli\u003eüìª \u003cstrong\u003eAnalog Noise\u003c/strong\u003e\nPlace unpolished elements in the presentation to make a key message stand out (e.g. an ugly font for the title of a slide introducing a problem). Don‚Äôt overuse the tecnique. Stand out from the overly polished and aesthetic presentations we currently have.\u003c/li\u003e\n\u003cli\u003eüö´ \u003cstrong\u003eDefy Defaults\u003c/strong\u003e\nDon‚Äôt follow the default settings, stand out from the typical presentation style, especially corporate ones which are riddled with antipatterns. Don‚Äôt go directly against the rules, but try to apply the patterns you have learned in a subtle way\u0026hellip; For example by using the corporate template when you have to, but then showing your style in the body of the presentation.\u003c/li\u003e\n\u003cli\u003e‚§¥ \u003cstrong\u003eGradual Consistency (and Soft Transitions)\u003c/strong\u003e\nUse many animations to better convey your message. Difficult to explain without examples, the concept is that by making elements move (e.g. ‚ÄúAs Is‚Äù ‚Üí animation that kicks it out of the screen ‚Üí ‚ÄúTo Be‚Äù fades in) you can tell an animated story, super effective. Personally, I don‚Äôt like animations but the pattern can be useful for simple, key concepts. Use it sparsely, the book relies too much on that. Use soft transitions (dissolve, push) to shift delicately from slide to slide.\u003c/li\u003e\n\u003cli\u003eüëª \u003cstrong\u003eInvisibility\u003c/strong\u003e\nIn case of an audience that has already read the presentation and knows what you are going to talk about. Add an animation that begins with a blank page (and everyone will be focused on what you are talking about as they can‚Äôt be distracted), and then show the content. They can‚Äôt expect it in the printout: it will be a surprising moment, but in my opinion it‚Äôs too showy.\u003c/li\u003e\n\u003cli\u003eüëÑ \u003cstrong\u003eLipsync\u003c/strong\u003e\n(For Live Demos). Playing live with the tool can be risky, as there are numerous unpredictable issues that can happen. Record yourself before the talk when using the tool and play the video while talking over it or in case of emergency. You can be less stressed, you can skip boring or lengthy moments, you can highlight certain parts. However, you can‚Äôt improvise if the audience asks you anything. Suggestion: hide Windows Tray and another unnecessary parts of the screen, as they will distract audience.\u003c/li\u003e\n\u003cli\u003eüìº \u003cstrong\u003eLive on Tape\u003c/strong\u003e\nIf travelling issues occur, video-record your presentation like you were live in that same room: this makes the video more natural and engaging.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"deliver\"\u003eDeliver\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e‚õπÔ∏è‚Äç‚ôÄÔ∏è \u003cstrong\u003ePreparation\u003c/strong\u003e\nAlways be ready for the worst-case scenario. Hard drives can fail, you can come in late, you lose your laptop charger‚Ä¶ Prepare your kit in advance the night before and check all the setup (better overdress than not being formal enough), have a backup of the presentation and stay hydrated.\u003c/li\u003e\n\u003cli\u003eü§ù \u003cstrong\u003eSeeding Satisfaction\u003c/strong\u003e\nLike Rock Bands that start with an opening act, you can shake hands, chat and warm up the audience before beginning the talk. Even one friendly face can make the difference, so introducing yourself to strangers and making some good impressions can help. It is also convenient to build connection with other people with the same interests and maybe make the expectations they have about you very clear. Don‚Äôt push too much if you see hat they don‚Äôt want to socialize.\u003c/li\u003e\n\u003cli\u003eüíµ \u003cstrong\u003eDisplay of High Value\u003c/strong\u003e\nBy instinct, the audience consider the speaker as valuable with an high social status and interesting things to say. Use this concept at your advantage, show that you are prepared and comfortable with the situation. Don‚Äôt apologize for technical issues, but move on and keep talking. Don‚Äôt let other people (Hecklers) hijack your presentation. Don‚Äôt look confused when you can‚Äôt reply to a question, suggest ways to follow up later instead.\u003c/li\u003e\n\u003cli\u003eüîÅ \u003cstrong\u003eCarnegie Hall\u003c/strong\u003e\nPractice. Practice.Practice. Present it to your pets first, then to a friendly crowd (friends, colleagues), record yourself if you want to. Trying to repeat it as much as possible forces yourself to get used to talk and to gain confidence and tweak out the small details of the presentation.\u003c/li\u003e\n\u003cli\u003eüêª \u003cstrong\u003eEmotional State\u003c/strong\u003e\nTry to understand the overall mood of the people involved, if they are having a good day and how they are feeling. Usually you can achieve it by chatting with the key stakeholders or through social media. Pattern difficult to apply as it may bring to misunderstandings.\u003c/li\u003e\n\u003cli\u003eüå¨ \u003cstrong\u003eBreathing Room\u003c/strong\u003e\nYou don‚Äôt have to speak all the time. Embrace silences. When stressed, you tend to speak faster, to fill up every gap and constantly be active, which reveals your nervousness. Plan some tactical breaks during (and before) key moments, pay attention to the rhythm of your voice. Sometimes the author writes a symbol in the notes to remember to breathe.\u003c/li\u003e\n\u003cli\u003eü¶∂ \u003cstrong\u003eShoeless\u003c/strong\u003e\nAchieve relax with little quirks to help ignoring the stress. Removing shoes may be a bit odd in corporate environments, but the pattern can be extended to everything that makes you more comfortable. Wear your best shirt, some comfortable sneaker, your lucky socks.\u003c/li\u003e\n\u003cli\u003eüë®‚Äçüè´ \u003cstrong\u003eMentor\u003c/strong\u003e\nDon‚Äôt build your presentation with your role being a humble helper. You have to be the mentor of the audience, their guide to a new world they don‚Äôt know. They need to feel that you care about it and leave the event enlightened with your wisdom. Preparing a strong Narrative Arc does help.\u003c/li\u003e\n\u003cli\u003eüåß \u003cstrong\u003eWeatherman\u003c/strong\u003e\nFace the camera like a Weatherman on the news, don‚Äôt look at the screen behind you but speak directly to your audience.\u003c/li\u003e\n\u003cli\u003eüçí \u003cstrong\u003eSeeding the First Question\u003c/strong\u003e\nUsually the audience is embarrassed to ask the first question, you need to find a way to break the ice. A good idea is to serve an obvious question in your presentation. An idea could be mentioning advanced concepts so people can ask questions about them at the end as they are curious.\u003c/li\u003e\n\u003cli\u003e‚õà \u003cstrong\u003eMake It Rain\u003c/strong\u003e\nMove things around (chairs, props, papers) to make the audience more comfortable√ß very useful in educational settings, but discouraged in corporate environments. E.g. a speaker moving chairs to visually show concurrency in web applications.\u003c/li\u003e\n\u003cli\u003eüßô‚Äç‚ôÄÔ∏è \u003cstrong\u003eEntertainment\u003c/strong\u003e\nUse humor and jokes to better convey your message, as the audience will remember a concept when associated with something funny. Don‚Äôt overuse it (leave the joke out if in doubt) or there is high risk of alienating the public; also, it should be relevant to your Narrative Arc and pay attention to not offend anyone.\u003c/li\u003e\n\u003cli\u003eüï∂ \u003cstrong\u003eThe Stakeout\u003c/strong\u003e\nALWAYS go to the talk earlier to avoid last-minute issues, get familiar with the environment, and, if possible, start chatting with the public.\u003c/li\u003e\n\u003cli\u003eüî¶ \u003cstrong\u003eLightsaber\u003c/strong\u003e\nUse the laser pointer judiciously like a skilled Jedi, highlighting the point of the slide you want to focus on when necessary. It‚Äôs not the best way as it attracts the complete attention of the audience, it‚Äôs better to use Traveling Highlights, but it gives you more freedom.\u003c/li\u003e\n\u003cli\u003eüîÇ \u003cstrong\u003eEcho Chamber\u003c/strong\u003e\nWhen someone asks you anything, repeat it back to the audience (paraphrased). This pattern helps other people who didn‚Äôt hear (or understood) the question well and avoids duplicate questions, and is a good training for summarizing complex concepts.\u003c/li\u003e\n\u003cli\u003eüóÇ \u003cstrong\u003eRed, Yellow, Green\u003c/strong\u003e\n(Difficult to apply in my context, I would use an online form like Microsoft Forms). At the end of the talk, you can ask the public to give a positive, negative or neutral feedback by voting with a colored card.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"span-stylecolorred--antipatternsspan\"\u003e\u003cspan style=\"color:red\"\u003e ‚ùå Antipatterns\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"prepare-1\"\u003ePrepare\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüìõ \u003cstrong\u003eAbstract Attorney\u003c/strong\u003e\nInstead of learning from your material, the attorney tries to find whatever tiny detail is not coherent or meaningful compared to his/her expectations (given by the abstract). Usually the complaints come via social media, anyway you don‚Äôt need to focus on why the attorney acts like that, but how you can prevent this antipattern.\n‚úî ‚Üí Keep a vague and mysterious abstract (summary in a couple of lines) at the beginning of the presentation to satisfy the attorney while keeping a lot of flexibility.\u003c/li\u003e\n\u003cli\u003eüëΩ \u003cstrong\u003eAlienating Artifact\u003c/strong\u003e\nThis antipattern happens when a joke goes wrong, negating any possible benefit.\n‚úî ‚Üí Don‚Äôt risk too much with shocking images, cursing or heavy jokes unless you really really know what you are doing and who‚Äôs your audience otherwise you risk to alienate part of the public which won‚Äôt remember your talk for your content, but because of the negatively-perceived event.\u003c/li\u003e\n\u003cli\u003eü•í \u003cstrong\u003eCelery\u003c/strong\u003e\nLike celery, a presentation should not burns more calories in consumption than it provides in usable energy: it shouldn\u0026rsquo;t require much effort to attend it. It sometimes happens with Required presentation, too simple/technical topics (lack of knowledge of the audience) or due date if you made it very quickly.\nThe result of a celery presentation is ‚Äúwell, that‚Äôs an hour of my life I‚Äôll never get back‚Äù.\n‚úî ‚Üí Know your audience and stick to your story and present a compelling Narrative Arc.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"build-1\"\u003eBuild\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüç™ \u003cstrong\u003eCookie Cutter\u003c/strong\u003e\nPutting too much content in a single slide will saturate your presentation and have a negative effect to the audience. When you start filling all the blank gaps in slides, you are allowing the medium to alter the message.\n‚úî ‚Üí Forget that all slides must be complete. Be free to expand ideas into multiple slides by keeping the same title but switching the body\u003c/li\u003e\n\u003cli\u003eüöë \u003cstrong\u003eInjured Outlines\u003c/strong\u003e\nTools often push you to make outlines of everything, including lists of one element.\n‚úî ‚Üí Transform broken outlines into Heading and Subheading slides and think in advance (Forethought) to avoid getting influenced\u003c/li\u003e\n\u003cli\u003eüéØ \u003cstrong\u003eBullet-Riddled Corpse\u003c/strong\u003e\nIt\u0026rsquo;s the most frequently mentioned antipattern because its omnipresence in corporate environments. It‚Äôs a slide that uses too many bullet points, which is the default for many tools (e.g. PowerPoint scaling down font to make more space for the next bullet).\nIt will bore the audience to death as \u003cstrong\u003ethey will read each single point instead of listening to you\u003c/strong\u003e\u0026hellip; Which is great for Infodecks which are pseudo documents, but terrible in presentations.\n‚úî ‚Üí Use it in the adeguate context. Think in advance before filling the slide with bullets. If you really have to, reveal each point with a transition while talking (Charred Trail).\u003c/li\u003e\n\u003cli\u003eüêú \u003cstrong\u003eAnt Fonts\u003c/strong\u003e\nAntipattern caused by putting as much content as possible inside a slide, reducing the font size (and readability). The audience focus is now on reading this wall of text, losing what‚Äôs important and ruining their vision.\n‚úî ‚Üí Disable automatic font shrinking on PowerPoint and plan your content in advance. Recommended font and size for code snippets: 18pt and \u003ca href=\"https://fonts.google.com/specimen/Inconsolata\"\u003eInconsolata\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eüç∏ \u003cstrong\u003eFontaholic\u003c/strong\u003e\nThis antipattern happens when you add too many fonts to ‚Äújazz up‚Äù the presentation, resulting in hangover-like headaches.\n‚úî ‚Üí Stick with the classic fonts: Helvetica Neue, Arial, Verdana\u003c/li\u003e\n\u003cli\u003e‚òî \u003cstrong\u003eFloodmarks\u003c/strong\u003e\nAt sponsored events or in the corporate world, you may be asked to insert logos and watermarks in each slide, cluttering the interface and unnecessarily bringing the same images over and over.\n‚úî ‚Üí If possible (this may depend on the rules given), slap all the logos and visuals in the first (or in the last) slide and keep using the minimal theme in the others.\u003c/li\u003e\n\u003cli\u003eüì∏ \u003cstrong\u003ePhotomaniac\u003c/strong\u003e\nUsing outdated clip arts, low-res, unnecessary or irrelevant photos or too much material will cause a negative effect instead of helping you better explaining your message.\n‚úî ‚Üí Take some time to research your photos (and credit the authors!), use them sparingly (e.g. in Brain Breaks or for Intermezzi). Avoid the handshake image clich√© at the end of the presentation, please.\u003c/li\u003e\n\u003cli\u003eüëü \u003cstrong\u003eBorrowed Shoes\u003c/strong\u003e\nDon‚Äôt present another person‚Äôs slides! It is surprisingly difficult to integrate your style with someone else‚Äôs one.\n‚úî ‚Üí Rework the initial material into something suitable for you\u003c/li\u003e\n\u003cli\u003e‚ò† \u003cstrong\u003eSlideuments\u003c/strong\u003e\nAnother beloved antipattern from the authors, and a classic in the business world: a presentation that has to be also a document. There‚Äôs no free lunch: \u003cstrong\u003eyou can‚Äôt have both of them\u003c/strong\u003e!\n‚úî ‚Üí There is no real solution. Check Infodecks for an example of a working system. A workaround could be to create the presentation as usual, keeping it minimal, and then attach a more prosaic document (presentation notes) as .pdf so the audience can read it when looking for documentation.\u003c/li\u003e\n\u003cli\u003eüíÄ \u003cstrong\u003eDead Demo\u003c/strong\u003e\nIt typically happens with Live Demos when the presenter is not prepared and fiddles around with the tool for lack of material or for personal ego. Boring.\n‚úî ‚Üí As said, it is very difficult to nail a Live Demo. Practice a lot (typing in public is way more stressful) and keep it short if you really have to show the tool.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"deliver-1\"\u003eDeliver\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüî™ \u003cstrong\u003eShortchanged\u003c/strong\u003e\nSomeone else is still talking when it‚Äôs your time for presenting, making you lose precious time.\n‚úî ‚Üí It happens. Don‚Äôt feel rushed, don‚Äôt let anyone feel that this could be an issue. Be ready to skip some slides or sections. Don‚Äôt be afraid to assert yourself and ask the other person to stop the talk by hinting and setting your things up (or even interrupting).\u003c/li\u003e\n\u003cli\u003eü•õ \u003cstrong\u003eHiccup Words\u003c/strong\u003e\nWhen you pollute your talk with nonwords such as ‚Äòuhm‚Äô, ‚Äòoh‚Äô, ‚Äòeh‚Äô or overused words such as ‚Äòdefinitely‚Äô, ‚Äòfrankly‚Äô, ‚Äòactually‚Äô. Happens during stressful moments, the brain is more comfortable with these words rather than awkward pauses. Very difficult to identify.\n‚úî ‚Üí Recognize your hiccup words by asking a friend to count them or recording yourself. Try to spot when the antipattern happens and take a breath, or rephrase it into something more articulate like ‚ÄòI‚Äôll get to that detail later‚Äô. Don‚Äôt be afraid to be silent for a second.\u003c/li\u003e\n\u003cli\u003eüîá \u003cstrong\u003eDisowning Your Topic\u003c/strong\u003e\nDon‚Äôt change your presentation on the fly because you think your audience is not interested.\n‚úî ‚Üí Be prepared and Know Your Audience and this antipattern won‚Äôt occur. Remember that social hints may be misleading, and that you can‚Äôt please everyone. Just stick to what you have planned to minimize risk.\u003c/li\u003e\n\u003cli\u003eüêñ \u003cstrong\u003eLipstick on a Pig\u003c/strong\u003e\nWhen you try to fix a bad presentation by to making it more aesthetically appealing. The slides are initially good, but your talk doesn‚Äôt leave any result in the long run.\n‚úî ‚Üí The authors recommend to set up a solid base before adding lipstick, suggesting ‚Äú\u003cem\u003eone hour of preparation for every minute of presentation\u003c/em\u003e‚Äù (a bit too much in my case üòÑ). Time is the key, and all the previous pattern about having a clear and meaningful structure in mind.\u003c/li\u003e\n\u003cli\u003eüóº \u003cstrong\u003eTower of Babble\u003c/strong\u003e\nUse technical jargon can be effective with the right audience, but can backfire, especially if you are doing it for flaunting your intellect. Difficult to notice if you talk ‚ÄúIT‚Äù every day.\n‚úî ‚Üí Know your audience and understand when and how much you can be more technical. For a business audience, stick to a simpler and more practical wording.\u003c/li\u003e\n\u003cli\u003e‚ò¢ \u003cstrong\u003eBunker\u003c/strong\u003e\nMetaphorically ‚Äùhiding‚Äù behind the podium or showing distance from the audience, which is a natural behavior if one‚Äôs stressed.\n‚úî ‚Üí Know your audience and practice with your talk to achieve confidence, pay attention to your body language.\u003c/li\u003e\n\u003cli\u003eüì£ \u003cstrong\u003eHecklers\u003c/strong\u003e\nThat kind of guest who monopolize your talk by continuously asking (often tricky) questions, making you lose time and patience. The agenda is at risk with heckers!\n‚úî ‚Üí Don‚Äôt be afraid to be the bad guy! Your scope is to protect your audience from time sinks. Don‚Äôt fell for the traps, but tell the heckler to follow up after the talk and remind him that you have a lot more to talk about. Deal decisively (eye contact, short sentences, firm tone).\u003c/li\u003e\n\u003cli\u003eüéé \u003cstrong\u003eGo Meta\u003c/strong\u003e\nDon‚Äôt talk about the talk, boooooring (e.g. technical issues you had before starting or anecdotes about the preparation).\n‚úî ‚Üí You already have limited time: focus on your Narrative Arc!\u003c/li\u003e\n\u003cli\u003eüîô \u003cstrong\u003eBackchannel\u003c/strong\u003e\nIt‚Äôs basically people tweeting or chatting with other people about the talk while you are speaking, which can bring distress and present a challenge. It‚Äôs not an antipattern, just a more complicate scenario because you may have to handle criticism in real time.\n‚úî ‚Üí Think about that when preparing the slides: can your message be condensed in a tweet? What‚Äôs the central point? Don‚Äôt be afraid to reply to questions and criticism during the event.\u003c/li\u003e\n\u003cli\u003e‚öî \u003cstrong\u003eLaser Weapons\u003c/strong\u003e\nLaser pointers can be effective for highlighting sections in dense slides, but they may be difficult to see for users in the back and are temporary: when you turn off the laser, the attention is gone.\n‚úî ‚Üí Better to use the Traveling Highlights and highlight directly in the slide\u003c/li\u003e\n\u003cli\u003eüôã‚Äç‚ôÇÔ∏è \u003cstrong\u003eNegative Ignorance\u003c/strong\u003e\nIf you ask things like ‚ÄúWho‚Äôs not familiar with the XXX concept?‚Äù to better understand the level of the audience, it‚Äôs very likely that nobody will tell you the truth as they don‚Äôt want to feel stupid. Having incorrect feedbacks may bomb the presentation as you could act as too technical.\n‚úî ‚Üí Don‚Äôt ask these questions but be prepared (and, of course, Know Your Audience to avoid doubts). Keep in mind that part of the audience will know too much, part has no idea about the topic and the majority is in the middle. Prepare a 30-60 seconds summary of the advanced concept you want to introduce to keep as many people as possible engaged and informed.\u003c/li\u003e\n\u003cli\u003eüëæ \u003cstrong\u003eDual-Headed Monster\u003c/strong\u003e\nThis point is about the technical issues that can happen in case of an hybrid/online talk, which is not a real antipattern, just a slightly more difficult scenario. Outdated, as every presentation I make is online.\n‚úî ‚Üí Check the equipment, including the connection speed, and avoid Going Meta when an things break.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-others-presentations-slides\"\u003e‚ùì Others (presentations, slides)\u003c/h2\u003e\n\u003ch3 id=\"prepare-2\"\u003ePrepare\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüò© \u003cstrong\u003eRequired \u0026amp; Proposed (also Invited) Presentations\u003c/strong\u003e\nRequired ‚Üí You have to speak (usually a difficult situation, yet it can become a low-risk opportunity to impress management and audience)\nProposed ‚Üí You send an application for speaking at a conference, usually you are interested in the topic.\nInvited ‚Üí You are so famous that conferences are asking you to speak there\u003c/li\u003e\n\u003cli\u003eüî® \u003cstrong\u003eExpansion Joints\u003c/strong\u003e\nIt is a clever trick to keep some slides that can be either skippable or a source for digression in case of time issues. Difficult to implement, they are a safety net if you have a fixed time slot to fulfill.\u003c/li\u003e\n\u003cli\u003eüê£ \u003cstrong\u003eTalklet\u003c/strong\u003e\nA talklet is a presentation inside another presentation, to be used for a little digression with its own Narrative Arc. Psychological research shows that the average adult attention span is about 20 minutes. It is a good idea to split each Arc into that time frame, while the main Arc acts as a container for the entire talk.\u003c/li\u003e\n\u003cli\u003eüëÅ \u003cstrong\u003eUnifying Visual Theme\u003c/strong\u003e\nA visual theme provides benefits as it is easier to connect visual elements to the topics you are presenting. Be creative, don‚Äôt use the default clip art and images, but at the same time don‚Äôt bend your presentation to match a theme. It‚Äôs nice to use metaphors and include them as images in the presentations. E.g. a plan sprouting from soil is a theme picked by Neal Ford in its emerging tech talk.\u003c/li\u003e\n\u003cli\u003e‚õà \u003cstrong\u003eLightning Talk\u003c/strong\u003e\nIt is a kind of presentation with fixed time limit, short in duration. It is difficult to create a meaningful story with limited material as it requires extensive preparation and there is no time for mistakes\u0026hellip; However it is a great occasion for being creative. You can cheat by using multiple slides with the same image and no transitions, which counts as 1 slide. \u003ca href=\"https://ignite.microsoft.com/en-US/home\"\u003eIgnite conferences\u003c/a\u003e are an example of Lightning Talks.\u003c/li\u003e\n\u003cli\u003eüî´ \u003cstrong\u003eTakahashi\u003c/strong\u003e\nAlso known as Lessig, it is a style of presentation with minimal imagery/verbiage and super fast transitions. Unlikely to be used with technical talks unless you want to insert a break in between, but very effective when delivering keynotes. You only need a lot of slides with one element each! Check \u003ca href=\"https://www.youtube.com/watch?v=8Ab3ArE8W3s\"\u003ethis example\u003c/a\u003e by Jack Rusher at Strange Loop 2022.\u003c/li\u003e\n\u003cli\u003eüñå \u003cstrong\u003eCave Painting\u003c/strong\u003e\nAn innovative layout that uses a huge sectioned canvas where you can zoom in and out with each slide instead of the classic transition. It works well with fractal subjects and stories and the outcomes can be really beautiful however it doesn‚Äôt scale and it requires more preparation, I am not seeing it around. Check out \u003ca href=\"https://prezi.com/product/?click_source=logged_element\u0026amp;page_location=header_product_dropdown\u0026amp;element_text=prezi_present\"\u003ePrezi\u003c/a\u003e Design which is a (paid) tool to make these special layouts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"build-2\"\u003eBuild\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eüéπ \u003cstrong\u003eCoda\u003c/strong\u003e\nProvide a list of further readings at the end of the presentation to provide more resource without distracting readers from the core of your material. It‚Äôs like a bibliography.\u003c/li\u003e\n\u003cli\u003e‚Ñπ \u003cstrong\u003eInfodeck\u003c/strong\u003e\nA standalone document created with a presentation tool. It is not meant to be presented, but rather consumed by a single person. Here you can include diagrams, (SHORT) bullet points, few words and work with a spatial layout. Pay attention to not transform it into a Slideument and create it knowing that you won‚Äôt likely have to present it ‚Üí no animations, no big images, no Brain Breaks.\u003c/li\u003e\n\u003cli\u003eüö¢ \u003cstrong\u003eVacation Photos\u003c/strong\u003e\nSlides with only full-screen images and very few (if no) words: extremely effective with storytelling, less in technical presentations, but keep it in mind as it is a key concept of the book. Users need to have an image in their minds, otherwise they will spend time and attention creating their own. Don‚Äôt distract them with too flashy images.\u003c/li\u003e\n\u003cli\u003eüßØ \u003cstrong\u003eCharred Trail\u003c/strong\u003e\nA kind of slide specifically made to fix the issues with Slideuments and Bullet-Riddled Corpses. It‚Äôs an animated bullet point list where each point is appears one at a time and then grays out to keep the audience focused on the last element. The ‚Äúprinted‚Äù outcome will be like a classic bulleted slide, which is OK for documents, but while presenting you can make sure that the users won‚Äôt read all the bullets instead of listening. It requires a bit of tweaking with PowerPoint.\u003c/li\u003e\n\u003cli\u003eüé© \u003cstrong\u003eExuberant Title Top\u003c/strong\u003e\nA slide type strictly related to the Charred Trail pattern (also in this case the printout will be Infodeck-friendly). The heading begins in the center of the slide and the hovers at the top while the body appear. Used to center the attention on the title, especially when it‚Äôs a bold assertion.\u003c/li\u003e\n\u003cli\u003eüìë \u003cstrong\u003eContext Keeper\u003c/strong\u003e\nSimilar to Breadcrumbs but at a slide level: you can keep the same element (e.g. an image or a title) between slides while the rest changes to reveal the structure of the topic you are introducing. Suggestion: use the Morph animation in PowerPoint.\u003c/li\u003e\n\u003cli\u003eüçû \u003cstrong\u003eBreadcrumbs\u003c/strong\u003e\nIt is easy to lose track of the agenda if the presentation is long. A breadcrumb is a slide that can be added while transitioning between the points of the agenda to remind the audience what‚Äôs the general plan and at what point of the presentation we are. It can be a copy of the agenda slide with the current bullet highlighted in bold.\u003c/li\u003e\n\u003cli\u003eüìö \u003cstrong\u003eBookends (and Preroll and Crawling Credits)\u003c/strong\u003e\nSlides at the beginning and at the end of the presentation with your name and contacts. Useless in my current case, but it can reassure the audience that they are in the correct room, introduce yourself and, when concluding, they can contain other URLs, for example for downloading the slides or asking for feedbacks.\nPreroll is an automatic carousel of slides to play before the beginning two or three slides with information so you can save time and attention resources.\nCrawling Credits is the opposite: an animation in Star-Wars style of the Coda at the end. Cool yet nothing special to me.\u003c/li\u003e\n\u003cli\u003eüé¨ \u003cstrong\u003eIntermezzi\u003c/strong\u003e\nAlternative to Breadcrumbs. While changing each logical part of the presentation, add a slide to introduce the new concept. We have it in our template, OK.\u003c/li\u003e\n\u003cli\u003eüîô \u003cstrong\u003eBacktracking\u003c/strong\u003e\nA slide to bring the attention back to another slide you have shown in the past. This element is used in case of a little digression where you open a Talklet and want to come back to the original agenda. Suggestion: use a distinctive ‚Äúback‚Äù transition to close the digression.\u003c/li\u003e\n\u003cli\u003eüé¶ \u003cstrong\u003eLive Demo\u003c/strong\u003e\nA special kind of presentation where you don‚Äôt need many slides, but you mostly use and present a tool. It can be the right way if you are talking about the tool and the audience is expected to mimic you and learn.\nIt is particuarly difficult to make a good Live Demo! Practice a lot, practice how to talk while using the tool to keep the audience interested, and expect to make mistakes.\u003c/li\u003e\n\u003cli\u003e‚úà \u003cstrong\u003eTraveling Highlights (and Crawling Code)\u003c/strong\u003e\nFor slides with source code or huge amount of information, highlight the section you are talking about with a subtle window animation.\nCrawling Code adds boxed or highlights to the part of code mentioned, hiding all the rest to avoid distractions (e.g. \u003ca href=\"https://www.slideshare.net/matthewmccullough/encryption-boot-camp-on-the-jvm\"\u003eSlide 24 of Encryption Boot Camp on the JVM\u003c/a\u003e)\u003c/li\u003e\n\u003cli\u003eüîî \u003cstrong\u003eEmergence\u003c/strong\u003e\nIf you want to reveal the key slide of your presentation, which requires a buildup first, slowly build hype with subtle animations to initially obscure part of the slide and then suddenly reveal the content, piece by piece.\u003c/li\u003e\n\u003c/ul\u003e\n","description":"","image":"/images/presentation_patterns_cover.jpg","permalink":"http://localhost:1313/posts/2023/01/personal-notes-about-presentation-patterns/","title":"Personal Notes about Presentation Patterns"},{"content":"\u003cp\u003eThere is something bizarre with me if two of my favourite activities are writing documentation and hitting my head against tests, which are notoriously unexciting activities for many developers üò´\u003c/p\u003e\n\u003cp\u003eLuckily, we are all unique in our own way and I decided to contribute to \u003ca href=\"https://codecov.io/github/ramnes/notion-sdk-py\"\u003ethe testing module\u003c/a\u003e of one of my favorite libraries, \u003ca href=\"https://github.com/ramnes/notion-sdk-py\"\u003enotion-sdk-py\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBeing \u003ca href=\"https://www.credly.com/badges/f15407b3-5fa8-4d9b-99cf-d862399a1543/public_url\"\u003ea certified Notion user\u003c/a\u003e, I use its Web App on a daily basis, and the Python library helps me automatically organize my notes. I even used it for custom bots and documentation. If you don‚Äôt know \u003ca href=\"https://www.notion.so/\"\u003ethe tool\u003c/a\u003e yet, I recommend trying it out: it may be a bit more complex compared to a classic note editor like Google Keep or Evernote, but its potential is huge.\u003c/p\u003e\n\u003cp\u003eFor better understanding this article, just keep in mind that Notion is like a wiki: each page is an element, which contains several blocks that could be paragraphs, tables (called databases), subpages or links to other pages. Each Notion element has a unique ID.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://cdn.gosquared.com/blog/wp-content/uploads/2020/04/Screenshot-2022-07-20-at-15.38.59.png\" alt=\"Notion Page\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-brief-introduction-to-testing-and-coverage\"\u003eüîç Brief introduction to testing and coverage\u003c/h2\u003e\n\u003cp\u003eTests are important for making sure that the code does what‚Äôs expected to do, by creating functions that simulate common (and uncommon) cases to make sure that the behaviour is always coherent with our expectations. For example, in \u003ca href=\"https://github.com/ramnes/notion-sdk-py/tree/main/tests\"\u003enotion-sdk-py the tests\u003c/a\u003e have to create a new page, update its metadata, delete it, compare that all the requests are working. I‚Äôm using \u003ca href=\"https://docs.pytest.org/en/6.2.x/contents.html\"\u003epytest\u003c/a\u003e in this article, which is one of the most used testing libraries in Python.\u003c/p\u003e\n\u003cp\u003eWriting tests is not enough: coverage (ideally) plays an important part. The idea is to count the percentage of lines of code that are executed during test runs. The higher percentage of code is covered, the more likely the program does what it‚Äôs supposed¬†to.\u003c/p\u003e\n\u003cp\u003eAt least, in theory: \u003ca href=\"https://www.google.com/search?q=a+100%25+coverage+doesn%27t+mean+anything\"\u003ea 100% coverage doesn‚Äôt mean anything if the tests aren‚Äôt good\u003c/a\u003e, as it‚Äôs surprisingly easy to write meaningless tests that increase the numbers but aren‚Äôt really improving anything. For this reason, it is a common point of view that coverage is basically useless if done with an incorrect approach.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAchieving a 100% coverage should not be considered the one and only objective, yet improving it is a noble and useful challenge: as you will see, there is a lot to learn‚Ä¶\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eExample: I have a simple function that checks if a number is positive (True) or zero/negative (False), printing out a statement.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003enumber_sign_detector\u003c/span\u003e(num: int) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e bool:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e num \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;The number is positive\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eelif\u003c/span\u003e num \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;The number is zero\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;The number is negative\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eI write down a simple test with pytest:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e main \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e number_sign_detector\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_number_sign_detector\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e number_sign_detector(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e number_sign_detector(\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg src=\"https://github.com/mutt0-ds/mutt0-ds.github.io/blob/master/images/notion_coverage/pytest_example.png?raw=true\" alt=\"test_passes\"\u003e\u003c/p\u003e\n\u003cp\u003e100% of the tests (1/1 ü§ó) passed, in theory my function is solid‚Ä¶ Isn‚Äôt it?\u003c/p\u003e\n\u003cp\u003eWell, it could be better. The coverage is 78% because I didn‚Äôt consider all the cases that can happen: in this case, if \u003ccode\u003enum==0\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eLuckily, pytest has an option for saving an interactive coverage report with the command \u003ccode\u003epytest --cov=./path/src/folder --cov-report=term-missing --cov-report=html\u003c/code\u003e where I can quickly see which lines are covered by the tests.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/mutt0-ds/mutt0-ds.github.io/blob/master/images/notion_coverage/coverage.png?raw=true\" alt=\"coverage_report\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-how-can-i-test-notion-api-sdk\"\u003e‚ùì How can I test Notion API SDK?\u003c/h2\u003e\n\u003cp\u003eI must admit that in my case, creating tests wasn‚Äôt trivial: the majority of the \u003ca href=\"https://github.com/ramnes/notion-sdk-py/blob/main/notion_client/api_endpoints.py\"\u003efunctions in notion-sdk-py\u003c/a\u003e is interacting with Notion servers‚Ä¶ Which require an API key and a Notion account with a page where run tests, since almost every element in Notion requires an ID to be queried:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# code for retrieving a page\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e notion_client \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e Client\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eclient \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Client(auth\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eNOTION_API_TOKEN)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eresponse \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eretrieve(page_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eUNIQUE_PAGE_ID)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(response)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# JSON data...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThese API calls were initially a big issue for creating reliable tests, as the response depends on the server\nside. A big rule with tests is that they need to be as isolated as possible, minimizing any possible interference from external factors.\u003c/p\u003e\n\u003cp\u003eThere may be a connection issue, for example, or permission issues. Also, if another user wants to execute the test on its pc, they needs to create a testing environment on its own Notion account with a new API key, add the necessary permissions and make sure that the environment is the same for each independent run‚Ä¶Painful, yet still feasible for a library maintainer.\u003c/p\u003e\n\u003cp\u003eHowever \u003ca href=\"https://github.com/ramnes/notion-sdk-py/actions\"\u003enotion-sdk-py uses Github Actions in its CI/CD pipeline\u003c/a\u003e for running tests on external VMs, complicating things.\u003c/p\u003e\n\u003cp\u003eAlso, many Notion objects are dependent from each other: if I want to test a comment, I must create a block first (that the comment is referring to) and a parent page containing the block. This results is a big sequenceof API calls for creating, updating and deleting objects. How can I simulate them?\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://thomasjfrank.com/wp-content/uploads/2021/05/Notion-Complete-Block-Reference.gif\" alt=\"navigation\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-the-solution-fixtures\"\u003eüí° The solution: fixtures\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://docs.pytest.org/en/6.2.x/fixture.html\"\u003eFixtures\u003c/a\u003e are a basic component of testing libraries: like the name says, they are ‚Äúfixed‚Äù elements that are can be used by all the tests that are needing it for generating an initial state.\u003c/p\u003e\n\u003cp\u003eTo use a fixture, we can just add its name as an input parameter of the test function. This is an example of ‚Äúdependency injection‚Äù, a design that aims to isolate the testing phase, which has only the task of checking that something works as expected, and its initiation phase:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e pytest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e notion_client \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e Client\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eclient\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e Client(auth\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eTOKEN)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_a\u003c/span\u003e(client):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# client gets created\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e client \u003cspan style=\"color:#f92672\"\u003eis\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_b\u003c/span\u003e(client):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# another client gets created\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages \u003cspan style=\"color:#f92672\"\u003eis\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eBoth tests need a client (which manages all the requests to the Notion API so it is called for many cases): by using the same fixture, both functions have the same (but independent) environment without worrying about its initiation.\u003c/p\u003e\n\u003cp\u003eI previously said that for testing many functions, I need a parent page first, which has to be manually set up: it can be considered as the initial path. The easiest way to share its ID is with another fixture:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#.. client fixture \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# os.environ[\u0026#39;NOTION_PARENT_PAGE\u0026#39;] = \u0026#34;f691a0f9-da72-43bd-94ef-365793610746\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epage_id\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e os\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eenviron[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;NOTION_PARENT_PAGE\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_pages_delete\u003c/span\u003e(client, page_id):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eblocks\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edelete(block_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003epage_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e response\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_pages_retrieve\u003c/span\u003e(client, page_id):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eretrieve(page_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003epage_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e response[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eHowever, if you run the tests in this exact order they will fail. They are sharing the same static fixture, thus the \u003ccode\u003etest_pages_delete\u003c/code\u003e will delete the testing environment before \u003ccode\u003etest_pages_retrieve\u003c/code\u003e will be able of retrieving and updating its data! Sure, we can change their orders, but it is better to fix the issue: each test should not be influenced by the others‚Ä¶\u003c/p\u003e\n\u003ch2 id=\"-the-upgraded-solution-function-scoped-fixtures\"\u003eüí°üí° The upgraded solution: function-scoped fixtures\u003c/h2\u003e\n\u003cp\u003eA \u003ca href=\"https://betterprogramming.pub/understand-5-scopes-of-pytest-fixtures-1b607b5c19ed?gi=fe628b6947b5\"\u003efixture can have the following scopes\u003c/a\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e‚Äúsession‚Äù (one object for all tests)\u003c/li\u003e\n\u003cli\u003e‚Äúpackage‚Äù (one object for each package)\u003c/li\u003e\n\u003cli\u003e‚Äúmodule‚Äù: one object for each module (e.g. test_client.py and test_endpoints.py will have one copy each of the fixture)\u003c/li\u003e\n\u003cli\u003e‚Äúclass‚Äù (one object for each class)\u003c/li\u003e\n\u003cli\u003e‚Äúfunction‚Äù (one object for each test, default option)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn this case I used ‚Äúsession‚Äù and ‚Äúfunction‚Äù scopes. The Notion client can be used once for session, for example, to improve efficiency.\nThe page_id of each test, however, must be generated each time starting from the initial \u003ccode\u003eNOTION_PARENT_PAGE\u003c/code\u003e for granting independency and atomicity: that‚Äôs when the ‚Äúfunction‚Äù scope gets useful. It is the default option for fixtures, but I want to make clear that the functions I‚Äôm going to use are being called each time.\u003c/p\u003e\n\u003cp\u003eFor avoiding conflicting tests r, I decided to create unique subpages from the initial parent page. The fixture returns a dynamic Notion ID, which basically a shortcut for generating a new environment page each time a test begins:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# long way\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_pages_retrieve\u003c/span\u003e(client):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    payload \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {parent:{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page_id\u0026#34;\u003c/span\u003e: os\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eenviron[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;NOTION_PARENT_PAGE\u0026#39;\u003c/span\u003e]},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              properties:{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;title\u0026#34;\u003c/span\u003e: [{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e: {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Test Page\u0026#34;\u003c/span\u003e}}}}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    parent_page_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003epayload)[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e] \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e response[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eblocks\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edelete(block_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparent_page_id)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# short way\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e(scope\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eparent_page_id\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e os\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eenviron[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;NOTION_PARENT_PAGE\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.fixture\u003c/span\u003e(scope\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;function\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epage_id\u003c/span\u003e(client, parent_page_id):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  payload \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {parent:{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page_id\u0026#34;\u003c/span\u003e: parent_page_id},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            properties:{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;title\u0026#34;\u003c/span\u003e: [{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e: {\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Test Page\u0026#34;\u003c/span\u003e}}}}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecreate(\u003cspan style=\"color:#f92672\"\u003e**\u003c/span\u003epayload)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eyield\u003c/span\u003e response[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e] \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eblocks\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edelete(block_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eresponse[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;id\u0026#34;\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_pages_retrieve\u003c/span\u003e(client, page_id):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# the page_id is generated by the function-scoped fixture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eretrieve(page_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eparent_page_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e response[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# the parent page is then deleted\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eBy using \u003ccode\u003eyield\u003c/code\u003e, I can give the ID of the parent page to the test that is asking for it (which only cares about its specific task), and then deleting it with \u003ccode\u003eclient.blocks.delete\u003c/code\u003e before the end. This is a \u003ca href=\"https://wiki.python.org/moin/Generators\"\u003egenerator\u003c/a\u003e, a function that returns a lazy iterator which doesn‚Äôt store its content in memory.\u003c/p\u003e\n\u003cp\u003eWith this method, there will be a final step for cleaning up everything and resetting the environment even in case of a failure. Before that, I was finding 20+ new subpages in my personal Notion page and cleaning them up wasn‚Äôt very funny üòÖ\u003c/p\u003e\n\u003cp\u003eThe final solution used the library is a bit more complex, because from a general parent page (session-scoped), depending on each case the module creates a function-scoped subpage containing another function-scoped block, comment or database. In fact, fixtures can call other fixtures and so on. You better check out \u003ca href=\"https://github.com/ramnes/notion-sdk-py/blob/main/tests/conftest.py\"\u003ethe code\u003c/a\u003e if you are curious.\u003c/p\u003e\n\u003cp\u003eThere is one problem left: we still can‚Äôt control the responses of the API‚Ä¶ If the connection times out, or a user is not authenticated, the tests will fail.\u003c/p\u003e\n\u003ch2 id=\"-the-almost-final-solution-cassettes\"\u003eüí°üìº The almost-final solution: cassettes\u003c/h2\u003e\n\u003cp\u003eThe concept of a \u003ca href=\"https://betterprogramming.pub/your-api-tests-must-be-reproducible-6e1c57986f4?gi=119ee926cb4e\"\u003ecassette\u003c/a\u003e is very cool: they are objects that capture an HTTP response and can be rewinded for an undefined number of times as the JSON data is stored locally. This makes tests that are working with external requests reproducible, as the response is always the same, independently from connection or permission issues. Also, they speed up the testing time, as they don‚Äôt require a connection anymore.\u003c/p\u003e\n\u003cp\u003eThe plugin \u003ca href=\"https://pytest-vcr.readthedocs.io/en/latest/\"\u003epytest-vcr\u003c/a\u003e integrates cassettes for pytest as a decorator: the decorated test will send a request the first time, save it in a local .yaml file, and use it for all the successive runs.\u003c/p\u003e\n\u003cp\u003eSometimes Notion introduces \u003ca href=\"https://developers.notion.com/reference/changes-by-version\"\u003ebreaking changes in its API\u003c/a\u003e, but there is nothing to worry about: we can just update the \u003ca href=\"https://github.com/ramnes/notion-sdk-py/blob/5829ae16df7dae6429de22201939c2a443324026/notion_client/client.py#L52\"\u003e‚ÄúNotion-Version‚Äù header\u003c/a\u003e in the request, regenerate the cassettes, and see if there are new issues.\u003c/p\u003e\n\u003cp\u003eWith this methodology, we can stay pretty safe that the cassettes are reliably simulating real requests.\u003c/p\u003e\n\u003cp\u003eLet‚Äôs pick up again the pages_retrieve test:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#.. client and parent page id fixtures\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@pytest.mark.vcr\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etest_pages_retrieve\u003c/span\u003e(client, page_id):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    response \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e client\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epages\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eretrieve(page_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003epage_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eassert\u003c/span\u003e response[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;object\u0026#34;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;page\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ePytest will locally store the response data in YAML format the first time the test is run.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003einteractions\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003erequest\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# data about the create request for the parent page\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003erequest\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ebody\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eheaders\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eaccept\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;*/*\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eaccept-encoding\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003egzip, deflate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eauthorization\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003esecret_...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econnection\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003ekeep-alive\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ehost\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eapi.notion.com\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003enotion-version\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;2022-06-28\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emethod\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eGET\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003euri\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehttps://api.notion.com/v1/pages/09462f1b-f4a9-4d52-8f9f-3061df0fa937\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eresponse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\u0026#34;object\u0026#34;:\u0026#34;page\u0026#34;,\u0026#34;id\u0026#34;:\u0026#34;09462f1b-f4a9-4d52-8f9f-3061df0fa937\u0026#34;,\u0026#34;created_time\u0026#34;:\u0026#34;2022-11-16T15:44:00.000Z\u0026#34;,\u0026#34;last_edited_time\u0026#34;:\u0026#34;2022-11-16T15:44:00.000Z\u0026#34;,\u0026#34;created_by\u0026#34;:{\u0026#34;object\u0026#34;:\u0026#34;user\u0026#34;,\u0026#34;id\u0026#34;:\u0026#34;823cf07b-34df-4ae6-9fbc-dbc600a815c6\u0026#34;},\u0026#34;last_edited_by\u0026#34;:{\u0026#34;object\u0026#34;:\u0026#34;user\u0026#34;,\u0026#34;id\u0026#34;:\u0026#34;823cf07b-34df-4ae6-9fbc-dbc600a815c6\u0026#34;},\u0026#34;cover\u0026#34;:null,\u0026#34;icon\u0026#34;:null,\u0026#34;parent\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;page_id\u0026#34;,\u0026#34;page_id\u0026#34;:\u0026#34;f691a0f9-da72-43bd-94ef-365793610746\u0026#34;},\u0026#34;archived\u0026#34;:false,\u0026#34;properties\u0026#34;:{\u0026#34;title\u0026#34;:{\u0026#34;id\u0026#34;:\u0026#34;title\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;title\u0026#34;,\u0026#34;title\u0026#34;:[{\u0026#34;type\u0026#34;:\u0026#34;text\u0026#34;,\u0026#34;text\u0026#34;:{\u0026#34;content\u0026#34;:\u0026#34;Test\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      2022-11-16 16:44:37.054647\u0026#34;,\u0026#34;link\u0026#34;:null},\u0026#34;annotations\u0026#34;:{\u0026#34;bold\u0026#34;:false,\u0026#34;italic\u0026#34;:false,\u0026#34;strikethrough\u0026#34;:false,\u0026#34;underline\u0026#34;:false,\u0026#34;code\u0026#34;:false,\u0026#34;color\u0026#34;:\u0026#34;default\u0026#34;},\u0026#34;plain_text\u0026#34;:\u0026#34;Test\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      2022-11-16 16:44:37.054647\u0026#34;,\u0026#34;href\u0026#34;:null}]}},\u0026#34;url\u0026#34;:\u0026#34;https://www.notion.so/Test-2022-11-16-16-44-37-054647-09462f1bf4a94d528f9f3061df0fa937\u0026#34;}\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eheaders\u003c/span\u003e: {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ehttp_version\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eHTTP/1.1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003estatus_code\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003erequest\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# data about the delete request for the parent page\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eA few things to highlight:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe cassette contains all the data about the requests made by \u003ccode\u003etest_pages_retrieve\u003c/code\u003e, including the two ‚Äúhidden‚Äù create and delete by the client fixture. I cut them out here for keeping the post short.\u003c/li\u003e\n\u003cli\u003eThe test will use the stored response for all the future runs, indpendently by the user, connection, time or zone\u003c/li\u003e\n\u003cli\u003eIf the code that makes the request changes pytest will throw an error and we will have to recreate a new cassette\u003c/li\u003e\n\u003cli\u003eThe API Token has to be hidden (like we did \u003ca href=\"https://github.com/ramnes/notion-sdk-py/blob/5829ae16df7dae6429de22201939c2a443324026/tests/conftest.py#L12-L22\"\u003ehere\u003c/a\u003e) or it will be stored in plain text in the cassette!\u003c/li\u003e\n\u003cli\u003eA cassette can‚Äôt also be a fixture because the two decorators will interfere\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-conclusions\"\u003eüî® Conclusions\u003c/h2\u003e\n\u003cp\u003eWith cassettes and fixtures \u003ca href=\"https://github.com/ramnes/notion-sdk-py/pull/168\"\u003eI managed to achieve 100% test coverage\u003c/a\u003e on notion-sdk-py, which was absolutely unthinkable to me just a few weeks before! I learned so much by contributing on the library, and this posts represents a quick sumup of my takeaways. Hopefully it will help you if you will be in my same situation, where I was lost trying to understand how to test something that was so dependant on external sources.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/mutt0-ds/mutt0-ds.github.io/blob/master/images/notion_coverage/final_coverage.png?raw=true\" alt=\"100_coverage\"\u003e\u003c/p\u003e\n\u003cp\u003eA big thank to \u003ca href=\"https://github.com/ramnes\"\u003eramnes\u003c/a\u003e for the precious feedbacks, the proofereading and for his amazing library!\u003c/p\u003e\n","description":null,"image":"/images/notion_coverage/title.png","permalink":"http://localhost:1313/posts/2022/12/road-100-coverage-notion/","title":"Road to 100% Test Coverage on notion-sdk-py"},{"content":"\u003cp\u003eOne of the most annoying issues I have when working with Power BI files is that source control is a real pain.\nConsidering that Microsoft owns Azure, Github, and Power BI, one would hope that they will come up with a solution for comparing two reports without using third-party tools or overly complicated solutions\u0026hellip; But that day seems still far in the future.\u003c/p\u003e\n\u003cp\u003eHere is a story about how I managed to set up a CI/CD pipeline through Azure DevOps Pipeline for providing rudimental version control of our Power BI reports.\u003c/p\u003e\n\u003ch2 id=\"-the-problem\"\u003e‚ùì The problem\u003c/h2\u003e\n\u003cp\u003eWhile textual formats like markdown or .json can be compared using an editor, binary formats like .pbix are not supported, being binary files. This results in a confusing situation where we have to document what exactly has been changed after every update, losing the powerful features available with git. So, lots of time wasted, plus insecurity and confusion.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/power_bi_source_control/binary.png\" alt=\"binary\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://code.visualstudio.com/assets/docs/sourcecontrol/overview/overview.png\" alt=\"working-git\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-acknowledgments\"\u003eüôè Acknowledgments\u003c/h2\u003e\n\u003cp\u003eMany people have tried to tackle the problem, in particular, \u003ca href=\"https://www.kerski.tech/bringing-dataops-to-power-bi-part10/\"\u003eKerski\u003c/a\u003e and \u003ca href=\"https://blog.gbrueckl.at/\"\u003eGerhard Brueckl\u003c/a\u003e. I\u0026rsquo;m very thankful for their precious resources.\nAlso, I have to thank the creators of \u003ca href=\"https://tabulareditor.com/\"\u003eTabular Editor\u003c/a\u003e, an open-source tool that offers several functionalities, including extracting the metadata of a .pbix files into .json files, transforming the binary file into a textual format.\u003c/p\u003e\n\u003cp\u003eThe main source for this article is \u003ca href=\"https://blog.gbrueckl.at/2022/02/automating-the-extraction-of-bim-metadata-from-pbix-files-using-ci-cd-pipelines/\"\u003ethis amazing blog post from Gerhard Brueckl\u003c/a\u003e. The code I used mostly comes from his \u003ca href=\"https://github.com/gbrueckl/PowerBI.CICD\"\u003eGithub repository\u003c/a\u003e, with a few tweaks I personally added. I recommend reading its README for the more technical details and the environment variables needed for authentication. You may be interested in \u003ca href=\"https://github.com/gbrueckl/PowerBI.CICD/blob/main/.github/workflows/pbix_to_bim.yml\"\u003ehis Github Action version\u003c/a\u003e, which doesn\u0026rsquo;t require Azure.\u003c/p\u003e\n\u003ch2 id=\"-requisites\"\u003eüìë Requisites\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ea .pbix file with a dataset to track with git\u003c/li\u003e\n\u003cli\u003ea PowerBI Premium per User license (and a Premium workspace already created)\u003c/li\u003e\n\u003cli\u003ean Azure DevOps repository\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals\"\u003ea service principal\u003c/a\u003e (an Active Directory entity with permissions to edit the Power BI Premium workspace)\u003c/li\u003e\n\u003cli\u003eA \u003ca href=\"https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops\u0026amp;tabs=yaml#create-a-variable-group\"\u003evariable group\u003c/a\u003e with auth variables to Power BI for the service principal (explained \u003ca href=\"https://github.com/gbrueckl/PowerBI.CICD#environment-variables\"\u003ehere\u003c/a\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-the-idea\"\u003eüí° The idea\u003c/h2\u003e\n\u003cp\u003eAs Gerhard says:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe core idea of the solution is to use CI/CD pipelines that automatically extracts the metadata of a .pbix file as soon as it is pushed to the Git repository. To do this, the .pbix file is automatically uploaded to a Power BI Premium workspace using the Power BI REST API and the free version of Tabular Editor 2 then extracts the BIM file via the XMLA endpoint and push it back to the repository.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://blog.gbrueckl.at/wp-content/uploads/2022/02/PBIX_to_BIM_YAML_workflow.png\" alt=\"pipeline\"\u003e\u003c/p\u003e\n\u003cp\u003eIn short, the pipeline retrieves the commit id of the latest two commits in the repository, detects which .pbix files have been modified, then uploads them in the Premium Workspace. This step is needed because the Premium workspace gives access to an XMLA endpoint used by Tabular Editor to access its data. Then, the pipeline extracts all the metadata in .JSON format and pushes it to the DevOps repository.\u003c/p\u003e\n\u003ch2 id=\"-the-code-step-by-step\"\u003eüí¨ The code [Step by Step]\u003c/h2\u003e\n\u003cp\u003eBe free to skip this section if you are not interested in the details about the code, which is fully available \u003ca href=\"https://github.com/mutt0-ds/powerbi-source-control-pipeline/tree/main\"\u003ehere\u003c/a\u003e. I\u0026rsquo;m trying to keep things simple for newbies like me so I  documented every step.\u003c/p\u003e\n\u003cp\u003eFirst, a simple introduction to \u003ca href=\"https://www.reddit.com/r/csharp/comments/this0y/eli5_cicd_with_azure_devops/\"\u003eAzure Pipelines\u003c/a\u003e.\nAn Azure Pipeline is composed of a setup part and different steps. The code is executed in a VM (in my case, hosted by Microsoft) triggered after every commit, which doesn\u0026rsquo;t basically anything about the context. This is good because the code is always executed in a neutral environment, but also requires to install modules every time and complicates some (in theory) simple steps, especially when using git.\u003c/p\u003e\n\u003ch3 id=\"1-setup\"\u003e1. Setup\u003c/h3\u003e\n\u003cp\u003eHere I named the pipeline, which will be triggered only when a .pbix file is committed, on all branches.\nThe \u003ccode\u003ebatch\u003c/code\u003e parameter, as \u003ca href=\"https://stackoverflow.com/questions/67099766/azure-yaml-schema-batch-trigger\"\u003ebadly documented by Windows\u003c/a\u003e, has been set to \u003ccode\u003efalse\u003c/code\u003e: I want to trigger the pipeline for each commit, even if more of them have been pushed in a batch.\nThis is not a very efficient way, but I had some issues when retrieving the commit ids using the DevOps API (step 5) so I decided to keep it simple.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eExtract PBIX metadata\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003etrigger\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebatch\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# one pipeline for every commit\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebranches\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;*\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# on all branches\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epaths\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;**/*.pbix\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# whenever a .pbix file is pushed\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epool\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003evmImage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ewindows-latest\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# windows VM with PowerShell\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-variables\"\u003e2. Variables\u003c/h3\u003e\n\u003cp\u003eThe variable group contains the access token that can be accessed like \u003ccode\u003e$env:PBI_USER_NAME\u003c/code\u003e.\nA little, innocent detail I had to remember is that if you flag a variable in your variable group as \u0026ldquo;Secret\u0026rdquo;, \u003ca href=\"https://stackoverflow.com/a/69891660\"\u003eyou have to explicitly declare it in the YAML code\u003c/a\u003e. Otherwise, there is no warning, the value will simply be null. Stupid, but tricky if you don\u0026rsquo;t know that, as I know firsthand\u0026hellip;\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003evariables\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003egroup\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eMy Variable Group\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# \u0026lt;-- change this to match your library/variable group\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"3-git-checkout\"\u003e3. Git Checkout\u003c/h3\u003e\n\u003cp\u003eThe pipeline is executing a \u003ccode\u003egit checkout\u003c/code\u003e behind the scenes by default to retrive all the files in the repository, but I had to declare it esplicitly. The trick here is to add \u003ccode\u003epersistCredentials: true\u003c/code\u003e to keep the git credentials for the next steps.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003esteps\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003echeckout\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eself\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eclean\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# resets the environment to a fresh new state\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epersistCredentials\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# very important to keep the credentials\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003efetchDepth\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"4-download-tabular-editor-portable\"\u003e4. Download Tabular Editor Portable\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- task\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e PowerShell@2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  displayName\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e Download-TabularEditor2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  inputs\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    targetType\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;inline\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    script\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# Download URL for Tabular Editor portable:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $TabularEditorUrl = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://cdn.tabulareditor.com/files/te2/TabularEditor.Portable.zip\u0026#34;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# Download destination (root of PowerShell script execution path):\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $DownloadDestination = Join-Path (Get-Location) \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;TabularEditor.zip\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# Download from GitHub:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Invoke-WebRequest -Uri $TabularEditorUrl -OutFile $DownloadDestination\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# Unzip Tabular Editor portable, and then delete the zip file:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Expand-Archive -Path $DownloadDestination -DestinationPath (Get-Location).Path\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Remove-Item $DownloadDestination\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    pwsh\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e true \u003cspan style=\"color:#75715e\"\u003e# necessary variable for passing the script values to Powershell\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"5-get-the-commit-ids\"\u003e5. Get the Commit IDs\u003c/h3\u003e\n\u003cp\u003eThis was the part that gave me a bit of a headache, as the original code didn\u0026rsquo;t seem to work in case of merges or, for some reason, was skipping some commits. It\u0026rsquo;s very annoying that Azure DevOps doesn\u0026rsquo;t provide a way to retrieve the git commit id preceding the running build, so I had to use this escamotage by calling the DevOps API and then using \u003ccode\u003egit log\u003c/code\u003e for retrieving the previous commit.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- task\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e PowerShell@2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  displayName\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e Get the Commit IDs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  inputs\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    targetType\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;inline\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    script\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# print Information stream\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    $InformationPreference = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Continue\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    $headers = @{ Authorization = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Bearer \u003c/span\u003e$env:SYSTEM_ACCESSTOKEN\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    $uri = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$env:SYSTEM_TEAMFOUNDATIONSERVERURI$env:SYSTEM_TEAMPROJECT\u003cspan style=\"color:#e6db74\"\u003e/_apis/build/builds/\u003c/span\u003e$($env:BUILD_BUILDID)\u003cspan style=\"color:#e6db74\"\u003e/changes?api-version=5.1\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# API Call to DevOps API to retrieve changes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    $changes = Invoke-RestMethod -Method Get -Headers $headers -Uri $uri\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($changes.count \u003cspan style=\"color:#f92672\"\u003e-gt\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# the first commit of the list is the one that triggered the pipeline\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $commit_id_after = $changes.value[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e].id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# using git for retrieving the preceeding commit\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $commit_id_before = @($(git log --pretty=\u003cspan style=\"color:#66d9ef\"\u003e%\u003c/span\u003eP -n \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e $commit_id_after --max-count=\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e --max-parents=\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Commit ID before push: \u003c/span\u003e$commit_id_before\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Commit ID after push:  \u003c/span\u003e$commit_id_after\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# this sets the value as environment variable\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Host \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;##vso[task.setvariable variable=GIT_EVENT_BEFORE]\u003c/span\u003e$commit_id_before\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Host \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;##vso[task.setvariable variable=GIT_EVENT_AFTER]\u003c/span\u003e$commit_id_after\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Warning \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;No changes found in Build \u003c/span\u003e$($env:BUILD_BUILDID)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  pwsh\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/power_bi_source_control/git.png\" alt=\"git\"\u003e\u003c/p\u003e\n\u003ch3 id=\"6-extract-pbix-metadata\"\u003e6. Extract PBIX Metadata\u003c/h3\u003e\n\u003cp\u003eThe core of the Pipeline, which requires the MicrosoftPowerBIMgmt Powershell module, the credentials for logging in Power BI and then calling the Premium Workspace endpoint for extracting data using Tabular Editor.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- task\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e PowerShell@2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  displayName\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e Extract-PBIXMetadata\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  inputs\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    targetType\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;inline\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    script\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# halt on first error\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $ErrorActionPreference = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Stop\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# print Information stream\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $InformationPreference = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Continue\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# install the Power BI Powershell module\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Set-PSRepository PSGallery -InstallationPolicy Trusted\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Install-Module -Name MicrosoftPowerBIMgmt -Scope CurrentUser\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Import-Module -Name MicrosoftPowerBIMgmt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# setup\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $root_path = (Get-Location).Path\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $tabular_editor_root_path = $root_path\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $ind = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e`t\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $git_event_before = $env:GIT_EVENT_BEFORE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $git_event_after = $env:GIT_EVENT_AFTER\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $triggered_by = $env:BUILD_REASON\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $workspace_id = $env:PBI_PREMIUM_WORKSPACE_ID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $tenant_id = $env:PBI_TENANT_ID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $client_id = $env:PBI_CLIENT_ID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $client_secret = $env:PBI_CLIENT_SECRET\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# login to Power BI\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $login_info = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User ID=app:\u003c/span\u003e$client_id\u003cspan style=\"color:#e6db74\"\u003e@\u003c/span\u003e$tenant_id\u003cspan style=\"color:#e6db74\"\u003e;Password=\u003c/span\u003e$client_secret\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      [\u003cspan style=\"color:#66d9ef\"\u003esecurestring\u003c/span\u003e]$sec_client_secret = ConvertTo-SecureString $client_secret -AsPlainText -Force\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      [\u003cspan style=\"color:#66d9ef\"\u003epscredential\u003c/span\u003e]$credential = New-Object System.Management.Automation.PSCredential ($client_id, $sec_client_secret)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Connect-PowerBIServiceAccount -Credential $credential -ServicePrincipal -TenantId $tenant_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# accessing the workspace\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $workspace = Get-PowerBIWorkspace -Id $workspace_id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Power BI Workspace: \u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e`n\u003c/span\u003e$($workspace | ConvertTo-Json)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e-not\u003c/span\u003e $workspace.IsOnDedicatedCapacity) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Error \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;The provided Workspace ID (\u003c/span\u003e$($workspace.id)\u003cspan style=\"color:#e6db74\"\u003e) is not on Premium Capacity!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# very important: finding the modified files with git diff\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# it has to be triggered by a push to the repo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Triggered By: \u003c/span\u003e$triggered_by\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Getting changed .pbix files ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($triggered_by \u003cspan style=\"color:#f92672\"\u003e-like\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*CI\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-or\u003c/span\u003e $triggered_by \u003cspan style=\"color:#f92672\"\u003e-eq\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;push\u0026#34;\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# get the changed .pbix files in the current push\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;git diff --name-only \u003c/span\u003e$git_event_before\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$git_event_after\u003cspan style=\"color:#e6db74\"\u003e --diff-filter=ACM \u0026#34;\u0026#34;*.pbix\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $pbix_files = @($(git diff --name-only $git_event_before $git_event_after --diff-filter=ACM \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*.pbix\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $pbix_files = $pbix_files | ForEach-Object { Join-Path $root_path $_ | Get-Item }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($pbix_files.Count \u003cspan style=\"color:#f92672\"\u003e-eq\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Warning \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Something went wrong! Could not find any changed .pbix files using the above \u0026#39;git diff\u0026#39; command!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#75715e\"\u003e# get all .pbix files in the current repository\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#75715e\"\u003e# disable these lines if you don\u0026#39;t want this feature\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Getting all .pbix files in the repo to be sure to get all changes!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $pbix_files = Get-ChildItem -Path (Join-Path $root_path $manual_trigger_path_filter) -Recurse -Filter \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*.pbix\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-File\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        Write-Error \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Invalid Trigger!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Changed .pbix files (\u003c/span\u003e$($pbix_files.Count)\u003cspan style=\"color:#e6db74\"\u003e):\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $pbix_files | ForEach-Object { Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind$($_.FullName)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# we need to set Serialization Options to allow export to Folder via TE2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $serialization_options = \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;IgnoreInferredObjects\u0026#34;: true,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;IgnoreInferredProperties\u0026#34;: true,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;IgnoreTimestamps\u0026#34;: true,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;SplitMultilineStrings\u0026#34;: true,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;PrefixFilenames\u0026#34;: false,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;LocalTranslations\u0026#34;: false,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;LocalPerspectives\u0026#34;: false,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;LocalRelationships\u0026#34;: false,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          \u0026#34;Levels\u0026#34;: [\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Data Sources\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Perspectives\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Relationships\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Roles\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Tables\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Tables/Columns\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Tables/Measures\u0026#34;,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              \u0026#34;Translations\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          ]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      }\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      $serialization_options | Out-File (Join-Path $tabular_editor_root_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;TabularEditor_SerializeOptions.json\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Model.SetAnnotation(\u0026#34;\u0026#34;TabularEditor_SerializeOptions\u0026#34;\u0026#34;, ReadFile(@\u0026#34;\u0026#34;\u003c/span\u003e$(Join-Path $tabular_editor_root_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;TabularEditor_SerializeOptions.json\u0026#34;\u003c/span\u003e)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;));\u0026#34;\u003c/span\u003e `\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        | Out-File (Join-Path $tabular_editor_root_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ApplySerializeOptionsAnnotation.csx\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e# for each .pbix modified extract metadata with Tabular Editor\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eforeach\u003c/span\u003e ($pbix_file \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e $pbix_files) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $report = $null\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $dataset = $null\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing  \u003c/span\u003e$($pbix_file.FullName)\u003cspan style=\"color:#e6db74\"\u003e ... \u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Checking if PBIX file contains a datamodel ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $zip_entries = [\u003cspan style=\"color:#66d9ef\"\u003eIO.Compression.ZipFile\u003c/span\u003e]::OpenRead($pbix_file.FullName).Entries.Name;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DataModel\u0026#34;\u003c/span\u003e -notin $zip_entries) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e No datamodel found in \u003c/span\u003e$($pbix_file.Name)\u003cspan style=\"color:#e6db74\"\u003e - skipping further processing of this file!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003econtinue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Datamodel found!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#75715e\"\u003e# upload the file with the dataset to the Premium workspace\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $temp_name = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$($pbix_file.BaseName)\u003cspan style=\"color:#e6db74\"\u003e-\u003c/span\u003e$(Get-Date -Format \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;yyyyMMddTHHmmss\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Uploading \u003c/span\u003e$($pbix_file.FullName.Replace($root_path, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e))\u003cspan style=\"color:#e6db74\"\u003e to \u003c/span\u003e$($workspace.Name)\u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e$temp_name\u003cspan style=\"color:#e6db74\"\u003e ... \u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $report = New-PowerBIReport -Path $pbix_file.FullName -Name $temp_name -WorkspaceId $workspace.Id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Start-Sleep -Seconds \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#75715e\"\u003e# retrieving the uploaded data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $dataset = Get-PowerBIDataset -WorkspaceId $workspace.Id | Where-Object { $_.Name \u003cspan style=\"color:#f92672\"\u003e-eq\u003c/span\u003e $temp_name }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $connection_string = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;powerbi://api.powerbi.com/v1.0/myorg/\u003c/span\u003e$($workspace.Name)\u003cspan style=\"color:#e6db74\"\u003e;initial catalog=\u003c/span\u003e$($dataset.Name)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Extracting metadata ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $executable = Join-Path $tabular_editor_root_path TabularEditor.exe\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $output_path = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$(Join-Path $pbix_file.DirectoryName $pbix_file.BaseName)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $params = @(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;Provider=MSOLAP;Data Source=\u003c/span\u003e$connection_string\u003cspan style=\"color:#e6db74\"\u003e;\u003c/span\u003e$login_info\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e$($dataset.Name)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-SCRIPT \u0026#34;\u0026#34;\u003c/span\u003e$(Join-Path $tabular_editor_root_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ApplySerializeOptionsAnnotation.csx\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-FOLDER \u0026#34;\u0026#34;\u003c/span\u003e$output_path\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34; \u0026#34;\u0026#34;\u003c/span\u003e$($pbix_file.BaseName)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Debug \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$executable\u003cspan style=\"color:#e6db74\"\u003e \u003c/span\u003e$params\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $p = Start-Process -FilePath $executable -Wait -NoNewWindow -PassThru -RedirectStandardOutput \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$temp_name\u003cspan style=\"color:#e6db74\"\u003e.log\u0026#34;\u003c/span\u003e -ArgumentList $params\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($p.ExitCode \u003cspan style=\"color:#f92672\"\u003e-ne\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Write-Error \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Failed to extract PBIX metadata from \u003c/span\u003e$($dataset.WebUrl)\u003cspan style=\"color:#e6db74\"\u003e!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Extracted PBIX metadata to FOLDER \u0026#39;(\u003c/span\u003e$output_path\u003cspan style=\"color:#e6db74\"\u003e)\u0026#39;!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Overwriting \u0026#39;name\u0026#39; and \u0026#39;id\u0026#39; properties now ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#75715e\"\u003e# need to overwrite id and name as they are taken from the temporary dataset\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $bim_json = Get-Content (Join-Path $output_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;database.json\u0026#34;\u003c/span\u003e) | ConvertFrom-Json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $bim_json.name = $pbix_file.BaseName\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $bim_json.id = $pbix_file.BaseName\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          $bim_json | ConvertTo-Json -Depth \u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e | Out-File (Join-Path $output_path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;database.json\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e PBIX metadata written to FOLDER \u0026#39;\u003c/span\u003e$output_path\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Warning \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;An error occurred:\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          Write-Warning $_\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003efinally\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($report \u003cspan style=\"color:#f92672\"\u003e-ne\u003c/span\u003e $null) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Removing temporary PowerBI report ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Remove-PowerBIReport -WorkspaceId $workspace.Id -Id $report.Id\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e ($dataset \u003cspan style=\"color:#f92672\"\u003e-ne\u003c/span\u003e $null) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ind\u003cspan style=\"color:#e6db74\"\u003e Removing temporary PowerBI dataset ...\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Invoke-PowerBIRestMethod -Url \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://api.powerbi.com/v1.0/myorg/groups/\u003c/span\u003e$($workspace.Id)\u003cspan style=\"color:#e6db74\"\u003e/datasets/\u003c/span\u003e$($dataset.Id)\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e -Method Delete\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Write-Information \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Finished!\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    pwsh\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e:\u003c/span\u003e true  \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/power_bi_source_control/extraction.png\" alt=\"extraction\"\u003e\u003c/p\u003e\n\u003ch3 id=\"7-push-the-metadata-to-the-git-repository\"\u003e7. Push the Metadata to the Git repository\u003c/h3\u003e\n\u003cp\u003eThe final step is to push the .json metadata extracted by Tabular Editor to the repository. The script uses the name and email of the original committer and mentions the original id in the message for keeping things clear.\u003c/p\u003e\n\u003cp\u003eIf you get a \u003ccode\u003eGenericContribute\u003c/code\u003e permission error, remember to add the service principal account as Contributor as shown \u003ca href=\"https://stackoverflow.com/a/56542631\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bat\" data-lang=\"bat\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- task: CmdLine@2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    displayName: Push PBIX metadata to Git repo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    inputs:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      script: |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eSET\u003c/span\u003e _full_branch_name=$(Build.SourceBranch)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eSET\u003c/span\u003e _full_branch_name=%_full_branch_name:refs/heads/=%\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eSET\u003c/span\u003e _commit_message=\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ü§ñ PBIX Metadata Extraction for #\u003c/span\u003e%GIT_EVENT_AFTER%\u003cspan style=\"color:#e6db74\"\u003e $(Build.RequestedFor) [skip ci]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git config --global user.name \u0026#39;$(Build.RequestedFor)\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git config --global user.email \u0026#39;$(Build.RequestedForEMail)\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git checkout %_full_branch_name%\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git stash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git pull\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git stash apply\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git add **/*.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git status --porcelain\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git commit -am %_commit_message%\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        git push origin HEAD:%_full_branch_name%\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"-conclusions\"\u003eüîö Conclusions\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/power_bi_source_control/commit.png\" alt=\"commit\"\u003e\u003c/p\u003e\n\u003cp\u003eKeeping track of the changes inside Power BI files is still a painful process at the moment, and I sincerely hope that Microsoft will soon find a solution to the issue.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/power_bi_source_control/result.png\" alt=\"result\"\u003e\u003c/p\u003e\n\u003cp\u003eThe method I set up is working if the report contains a dataset and something has changed in the schema and the measures, but unfortunately it still can\u0026rsquo;t detect visual changes, which is the most common cause of confusion, especially when users begin messing around with bookmarks and filters. Since many of our reports are using external datasets as source, they are untracked by the system.\u003c/p\u003e\n\u003cp\u003eThe only solution currently available is \u003ca href=\"https://pbi.tools/cli/\"\u003epbi-tools\u003c/a\u003e, which is unfortunately unusable in a pipeline as it requires a Power BI Desktop instance on the VM (we can\u0026rsquo;t use the Core edition for extracting metadata). From \u003ca href=\"https://community.powerbi.com/t5/Desktop/docker/m-p/426116\"\u003ewhat I could find\u003c/a\u003e, containerizing the app is not a suitable solution, but I\u0026rsquo;m keeping an eye on \u003ca href=\"https://github.com/pbi-tools/pbi-tools/issues/176\"\u003ean open issue on Github\u003c/a\u003e that could be the final solution.\u003c/p\u003e\n\u003cp\u003eIn that case, we could just import the correct VM Image with the pre-installed pbi-tools, extract the metadata and commit the changes in a few steps (and I\u0026rsquo;ll be happy to update the guide).\u003c/p\u003e\n\u003cp\u003eFor now, be free to adapt my solution if it suits your needs!\u003c/p\u003e\n","description":"","image":"/images/power_bi_source_control/title.jpg","permalink":"http://localhost:1313/posts/2022/11/turbulent-journey-power-bi-source-control/","title":"A turbulent journey through Power BI source control"},{"content":"\u003cp\u003eThis is a post for my future self when I will be asking myself: \u003cem\u003e‚ÄúHow were my first days at Acer like?‚Äù\u003c/em\u003e.\u003cbr\u003e\nNote: I\u0026rsquo;m working at Acer EMEA HQ, so when I mention \u0026ldquo;\u003cem\u003eAcer\u003c/em\u003e\u0026rdquo;, for simplicity, I mean \u0026ldquo;\u003cem\u003eAcer Europe\u003c/em\u003e\u0026rdquo;.\u003c/p\u003e\n\u003ch2 id=\"-my-expectations\"\u003eüí≠ My expectations\u003c/h2\u003e\n\u003cp\u003eMy previous experience was in a small company and a very different sector. Considering this, I was expecting the following challenges in the upcoming scenario:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAn organization with thousands of employees and decades of history\u003c/li\u003e\n\u003cli\u003eSeveral departments and key stakeholders to interact with, each one with specific priorities\u003c/li\u003e\n\u003cli\u003eA huge IT department where I\u0026rsquo;m the youngest member here\u003c/li\u003e\n\u003cli\u003eNew technologies to discover: in particular, I\u0026rsquo;ve never worked with most of the Azure tools we are using\u003c/li\u003e\n\u003cli\u003eA whole new level of complexity\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI wasn\u0026rsquo;t too worried about the previous points, as I\u0026rsquo;m happy to learn new things and I\u0026rsquo;m used to managing projects with different stakeholders. Being a \u003cstrong\u003eBusiness Intelligence Developer\u003c/strong\u003e, my tasks were going to be about managing Power BI dashboards and collecting data from databases, more or less what I was used to doing before\u0026hellip;\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://learn.microsoft.com/it-it/power-bi/create-reports/media/sample-sales-and-marketing/sales1.png\" alt=\"example dashboard\"\u003e\u003cbr\u003e\n\u003cem\u003eExample of a typical Power BI report I work with\u003c/em\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eü§Ø What caught me off-guard was the \u003cstrong\u003escale\u003c/strong\u003e of Acer\u0026rsquo;s IT structure!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eWhile I was used to querying a DB with a few dozen tables, now I have to deep dive into hundreds (if not thousands) of tables and views.\u003c/li\u003e\n\u003cli\u003eWhile I set up a simple ETL with a few data sources and a couple of MB of data, the new process I\u0026rsquo;ve been shown features hundreds of queries, with different environments and edge cases to handle.\u003c/li\u003e\n\u003cli\u003eWhile I created a few Power BI reports with single datasets, we have tons of different ongoing projects and dozens of users editing and creating their own that.\u003c/li\u003e\n\u003cli\u003eWhile I was using only a small subset of Azure services, there are several new tools to learn, such as DevOps, Synapse (ETL), Purview (Data Governance), Active Directory (Permissions)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-first-week\"\u003e1Ô∏è‚É£ First Week\u003c/h2\u003e\n\u003cp\u003eYou may laugh at my inexperience, but the first week I was coming home with a serious case of information overload. My head was so full that it was hurting. There was so much to learn, understand, write down\u0026hellip; I was feeling very tired and also a bit stressed.\u003c/p\u003e\n\u003cp\u003eEvery day I was looking at new things, meeting different people, discovering new dynamics to be aware of.\u003c/p\u003e\n\u003cp\u003eLuckily the team\u0026rsquo;s mentality is very dynamic, favoring independence and resourcefulness. The challenges are super stimulating, but I\u0026rsquo;ve never felt frustrated about them, as I\u0026rsquo;m capable to handle my assigned tasks. I was well supported, and this helped me a lot in the first difficult days, as I never felt alone.\u003c/p\u003e\n\u003cp\u003eI also noticed that, despite the huge scale of the organization, the architecture I\u0026rsquo;ve explored is rather clean and documented. I didn\u0026rsquo;t feel too lost, I was just disoriented by the mass of data.\u003c/p\u003e\n\u003ch2 id=\"2-second-week\"\u003e2Ô∏è‚É£ Second Week\u003c/h2\u003e\n\u003cp\u003eStarting from the second week, I feel that I\u0026rsquo;m quickly getting used to my new world, as some of the challenges are becoming familiar and all the distinct pieces I\u0026rsquo;ve seen are clicking together.\u003c/p\u003e\n\u003cp\u003eEvery day I feel just a bit more skilled in my tasks and many things are becoming easier and easier, in perspective, compared to a few days ago.\u003c/p\u003e\n\u003cp\u003eOnce I got familiar to the basics of the services we use, Azure doesn\u0026rsquo;t look too confusing. For example, I had to write some PowerShell scripts to automate basic tasks and I was surprised of how little time it took me!\u003c/p\u003e\n\u003cp\u003eThe amount of data to explore is still overwhelming, but step after step I identified the more important tables, which are going to be used for the majority of the reports.\u003c/p\u003e\n\u003ch2 id=\"concluding\"\u003eConcluding\u003c/h2\u003e\n\u003cp\u003eDespite the difficulties in the first days, I feel more confident than ever about my adventure in Acer. That\u0026rsquo;s where I\u0026rsquo;ll grow a lot and create new, amazing things for the company.\u003c/p\u003e\n\u003cp\u003eI just miss using Python a bit, as Powershell has become my main scripting language (it\u0026rsquo;s synergizing better with Azure\u0026rsquo;s APIs)\u0026hellip; Yet this is part of a new experience, learning new things!\u003c/p\u003e\n","description":"","image":"/images/acer.png","permalink":"http://localhost:1313/posts/2022/10/first-weeks-acer/","title":"My first weeks at Acer Europe"},{"content":"\u003cp\u003eDisclaimer: this will be a long, long post, written in my own way. It‚Äôs essentially a dump of my personal notes, taken when reading \u003ca href=\"https://www.sqlbi.com/books/the-definitive-guide-to-dax-2nd-edition/\"\u003e‚ÄúThe Definitive Guide to DAX‚Äù\u003c/a\u003e written by \u003cstrong\u003eAlberto Ferrari\u003c/strong\u003e and \u003cstrong\u003eMarco Russo\u003c/strong\u003e. At my new workplace I‚Äôm going to use PowerBI and DAX a lot, thus my boss suggested me to read the book.\u003c/p\u003e\n\u003cp\u003eYep, it is big and very technical, with 700+ pages rich in contents, but trust me, that‚Äôs the ‚ÄúBible‚Äù, a must-read for anyone willing to work with PowerBI and DAX. There‚Äôs everything you need, from the basics commands to the most advanced functions, with complex topics such as context transition, query plan, and storage engine. Many examples, in addition, apart from explaining every concept introduced in the book (which focuses a lot on giving clear, practical explanations) explore edge cases that gave me lots of headaches in the past. Further examples and insights can be found on the authors‚Äô site \u003ca href=\"https://www.sqlbi.com/\"\u003eSQLBI\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIt took me several weeks for finishing it, but I felt extremely prepared after the experience and grateful for such a useful resource that will be fundamental in my future. The authors did a terrific job and I am happy to support them and share a positive feedback of their work on my blog. Knowing that my memory is terrible I took accurate notes of everything I found interesting and what I have to read again. I hope it will help you as well!\u003c/p\u003e\n\u003ch3 id=\"my-personal-classification-of-each-chapter\"\u003eMy personal classification of each chapter\u003c/h3\u003e\n\u003cp\u003e‚ö†Ô∏è \u003cstrong\u003eVERY IMPORTANT\u003c/strong\u003e, read it several times and understand everything\u003c/p\u003e\n\u003cp\u003eüîÑ To read again, plenty of examples/documentation\u003c/p\u003e\n\u003cp\u003e‚ú® Useful\u003c/p\u003e\n\u003cp\u003e‚ùì Minor insights\u003c/p\u003e\n\u003ch2 id=\"1--what-is-dax\"\u003e1 ‚ú® What is DAX?\u003c/h2\u003e\n\u003cp\u003eIntroductive chapter that introduces the concept of \u003cstrong\u003eD\u003c/strong\u003eata \u003cstrong\u003eA\u003c/strong\u003enalysis e\u003cstrong\u003eX\u003c/strong\u003epressions, there‚Äôs nothing more to add. There‚Äôs an interesting presentation of all the different points of view of possible users (the ones who come from an Excel Background, or a PowerBI one, a SQL one‚Ä¶). Personally, I felt in synthony with the ‚Äòtypical‚Äô SQL user: learning that the \u003ccode\u003eFILTER\u003c/code\u003e DAX clause is the equivalent of a \u003ccode\u003eWHERE\u003c/code\u003e immediately cleared some doubts I had.\u003c/p\u003e\n\u003ch2 id=\"2--introducing-dax\"\u003e2 üîÑ Introducing DAX\u003c/h2\u003e\n\u003cp\u003eVery important section for beginners, explaining the most common functions and the difference between calculated column and measure.\u003c/p\u003e\n\u003cp\u003eIt introduces the different data types, which are the classic ones (Integer, Float, Currency, Datetime, Boolean, Strings, Binary), with just a new type, Variant, which is DAX-specific and simply means that there could be different data types (such as \u003ccode\u003eAny\u003c/code\u003ein Python).\u003c/p\u003e\n\u003cp\u003eThere are brief introductions of the operators: arithmetic (+-*/), comparatives (\u0026lt;,\u0026gt;,=,\u0026lt;\u0026gt;,‚â•,‚â§), logic (\u0026amp;\u0026amp;, ||, IN, NOT) and tables, created with {} and must include parenthesis in case of multiple values. E.g. \u003ccode\u003eColours = {‚ÄùRed‚Äù, ‚ÄúWhite‚Äù, ‚ÄúBlue‚Äù}\u003c/code\u003e. \u003ccode\u003eAnimals = {(‚ÄùDog‚Äù, ‚ÄúWoof‚Äù),( ‚ÄúCat‚Äù, ‚ÄúMeow‚Äù)}\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"calculated-columns\"\u003eCalculated Columns\u003c/h3\u003e\n\u003cp\u003eWritten as \u003ccode\u003e‚ÄòTable Name‚Äô[Column Name]\u003c/code\u003e, calculated columns are new columns added to the data model, and you can use them just like a default one, independently from the context. Just be aware that in Import Mode (the standard one), they are calculated during the data refresh, then stored in memory, occupying some precious RAM! If you have a complex formula, don‚Äôt break it down into intermediate steps as you do in Excel, but rather create and test it in DAX Studio and store the result in a single calculated column to optimize the model.\u003c/p\u003e\n\u003cp\u003eYou should use a calculated column if:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe result will be in a slicer, matrix, pivot, or \u003ccode\u003eFILTER\u003c/code\u003e condition\u003c/li\u003e\n\u003cli\u003eYou have an expression that is relative to the single row and doesn‚Äôt require aggregation, like \u003ccode\u003ePrice * Quantity\u003c/code\u003e which must use the Price of the row and the Quantity of the row\u003c/li\u003e\n\u003cli\u003eYou have to categorize text or numbers, e.g. assigning a High, Medium, Low range, or 0-18, 18-25, 25+. Again, it‚Äôs when you don‚Äôt want to aggregate results\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"measures\"\u003eMeasures\u003c/h3\u003e\n\u003cp\u003eA measure is not directly associated with a table and it‚Äôs written as \u003ccode\u003e[Measure Name]\u003c/code\u003e. Generally, you should use them when you don‚Äôt want to calculate values for each row, but you want an aggregation: in fact, a measure has an implicit CALCULATE clause in its formula and is modified by the context (see Chapter 5). Here‚Äôs a good example:\u003c/p\u003e\n\u003cp\u003eIf you create a calculated column like \u003ccode\u003eSales[GrossMarginPct] = Sales[GrossMargin] / Sales[SalesAmount]\u003c/code\u003e, you will see that the total is more than 100% (If our ten products have a 50% Gross Margin each, the table displays 50*10 ‚Üí 500%)! DAX is applying the formula row-by-row, but we want to see the total instead. A measure \u003ccode\u003eGrossMarginPct := SUM ( Sales[GrossMargin] ) / SUM (Sales[SalesAmount] )\u003c/code\u003e will give the correct result instead.\u003c/p\u003e\n\u003cp\u003eYou should use a measure if:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe value depends on the context and user‚Äôs selections\u003c/li\u003e\n\u003cli\u003eValues are in an aggregate form\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"variables\"\u003eVariables\u003c/h3\u003e\n\u003cp\u003eWrite them at the beginning of the DAX formula as \u003ccode\u003eVAR TotalSales = SUM(Sales[SalesAmount])  ... RETURN *result\u003c/code\u003e (there must be a RETURN at the end). They are IMMUTABLE and generated at the start of the calculation. They are temporary measures existing only internally to the measure you are using, and they are very useful for breaking down a formula into more readable steps and for avoiding repetitions.\u003c/p\u003e\n\u003ch3 id=\"basic-functions\"\u003eBasic Functions\u003c/h3\u003e\n\u003cp\u003eNote: many of them have an iterative version (\u003ccode\u003eSUM\u003c/code\u003e/\u003ccode\u003eSUMX\u003c/code\u003e), these examples are the same:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSales[DaysToDeliver] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e INT ( Sales[Delivery Date] \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e Sales[\u003cspan style=\"color:#66d9ef\"\u003eOrder\u003c/span\u003e Date] )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvgDelivery :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AVERAGE ( Sales[DaysToDeliver] )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e//\u003c/span\u003e They \u003cspan style=\"color:#66d9ef\"\u003eare\u003c/span\u003e the same, but the \u003cspan style=\"color:#66d9ef\"\u003esecond\u003c/span\u003e one \u003cspan style=\"color:#66d9ef\"\u003eis\u003c/span\u003e better optimized\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAvgDelivery :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAVERAGEX (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tSales,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tINT ( Sales[Delivery Date] \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e Sales[\u003cspan style=\"color:#66d9ef\"\u003eOrder\u003c/span\u003e Date] ))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eBasic: \u003ccode\u003eSUM, AVERAGE, COUNT, COUNTBLANK, COUNTROWS, DISTINCTCOUNT, DISTINCTCOUNTNOBLANK\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eLogic: \u003ccode\u003eAND, OR, IF, IFERROR, NOT, TRUE, SWITCH\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eInformation: \u003ccode\u003eISBLANK, ISERROR, ISLOGICAL, ISNONTEXT, ISNUMBER, ISTEXT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eMathematical: \u003ccode\u003eABS, EXP, FACT, LN, LOG, LOG10, MOD, PI, POWER, QUOTIENT, SIGN, SQRT, RANDOM, RANDBETWEEN, ROUND, EVEN, ODD\u003c/code\u003e e many more\u003c/li\u003e\n\u003cli\u003eTextual: \u003ccode\u003eCONCATENATE, CONCATENATEX, EXACT, FIND, FIXED, FORMAT, LEFT, LEN, LOWER, MID, REPLACE, REPT, RIGHT, SEARCH, SUBSTITUTE, TRIM, UPPER, VALUE\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eConversions: \u003ccode\u003eCURRENCY, INT, DATE, TIME, VALUE, DATEVALUE, FORMAT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eDate \u0026amp; Time:\u003ccode\u003eDATE, DATEVALUE, DAY, EDATE, EOMONTH, HOUR, MINUTE, MONTH, NOW, SECOND, TIME, TIMEVALUE, TODAY, WEEKDAY, WEEKNUM, YEAR, YEARFRAC\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRelational: \u003ccode\u003eRELATED\u003c/code\u003e e \u003ccode\u003eRELATEDTABLE\u003c/code\u003e. They are very powerful, we will explore them later\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"3--using-basic-table-functions\"\u003e3 ‚ö†Ô∏è Using basic table functions\u003c/h2\u003e\n\u003ch3 id=\"filter\"\u003eFILTER\u003c/h3\u003e\n\u003cp\u003eThe book introduces \u003ccode\u003eFILTER\u003c/code\u003e and the \u003ccode\u003eEVALUATE\u003c/code\u003e concept, to be used on DAX Studio. With \u003ccode\u003eFILTER\u003c/code\u003e with multiple conditions, a good tip is to put the most restrictive at the top of the query, to optimize it in case of big tables.\u003c/p\u003e\n\u003ch3 id=\"all\"\u003eALL*\u003c/h3\u003e\n\u003cp\u003eALL* gets introduced too, they are extremely powerful: \u003ccode\u003eALL, ALLEXCEPT, ALLCROSSFILTERED, ALLNOBLANKROW, ALLSELECTED\u003c/code\u003e. \u003ccode\u003eALL\u003c/code\u003e IGNORES EVERY ACTIVE FILTER in the report and it‚Äôs useful when you calculate ratios and percentages compared to the total, regardless of filters and users‚Äô selections. It returns a list of unique values, requiring a table or a list of columns, not an expression; if you use \u003ccode\u003eALL\u003c/code\u003e with more than a column, it will give back all the possible unique combinations existing in the table. \u003ccode\u003eALLEXCEPT\u003c/code\u003e can be translated as ‚Äòtake everything from that table except the following columns‚Äô. The rest will be explained in Chapter 14.\u003c/p\u003e\n\u003ch3 id=\"valuesdistinctblank\"\u003eVALUES,DISTINCT,BLANK\u003c/h3\u003e\n\u003cp\u003eLike \u003ccode\u003eALL\u003c/code\u003e, \u003ccode\u003eVALUES\u003c/code\u003e and \u003ccode\u003eDISTINCT\u003c/code\u003e return a list of unique values too‚Ä¶ With a big difference. \u003ccode\u003eVALUES\u003c/code\u003e returns the visible values, so it‚Äôs not ignoring the active filters, and the same does \u003ccode\u003eDISTINCT\u003c/code\u003e. They are different in the case of invalid relations. There‚Äôs a great example in the chapter: if, for example, a product is missing from the Product table, the join between it and the Sales table will have blank rows in the results. In this case, \u003ccode\u003eDISTINCT\u003c/code\u003e gets confused when calculating the average amount for product, while \u003ccode\u003eVALUES\u003c/code\u003e considers the blank row correctly in the division. TL;DR: use \u003ccode\u003eVALUES\u003c/code\u003e most of the cases.\u003c/p\u003e\n\u003cp\u003eThere‚Äôs a brief insight about \u003ccode\u003eHASONEVALUE\u003c/code\u003e, a shortcut for \u003ccode\u003eIF ( COUNTROWS ( VALUES ( [colonna] ) ) = 1, VALUES ( [colonna] )\u003c/code\u003e; it has a second argument for returning a message if there‚Äôs more than a value: it can be useful for cards and elements that expect only one value to be selected.\u003c/p\u003e\n\u003ch2 id=\"4--understanding-evaluation-context\"\u003e4 ‚ö†Ô∏è Understanding Evaluation Context\u003c/h2\u003e\n\u003cp\u003e‚ö†Ô∏èÔ∏è The authors say that this chapter and #5 are the most important of the entire book. If you understand context, you will avoid the most common errors when you code in DAX. Read it several times until you understand everything!\u003c/p\u003e\n\u003cp\u003eIn DAX, there are two completely different contexts impacting your formulas. \u003cstrong\u003eFilter Context\u003c/strong\u003e, which \u003cstrong\u003efilters data\u003c/strong\u003e, and \u003cstrong\u003eRow Context\u003c/strong\u003e, which \u003cstrong\u003eiterates through tables\u003c/strong\u003e. A context is, in short, the environment where the expression is evaluated.\u003c/p\u003e\n\u003ch3 id=\"filter-context\"\u003eFilter Context\u003c/h3\u003e\n\u003cp\u003eI‚Äôm not able to explain it as well as in the book without examples, but here‚Äôs my personal interpretation.\u003c/p\u003e\n\u003cp\u003eLet‚Äôs take a table with a measure, say \u003ccode\u003eTotalSales = SUMX(Sales[Amount]\u003c/code\u003e. A table has rows and cells. Every expression is evaluated based on its cell, which in turn is modified based on active filters and the selected column. So, the TotalSales measure will be, say, 30Mln if I put it into a card with no filters and just a cell, but if I use it in a table with multiple rows the is split based on the row‚Äôs contents (imagine a division by Area: Europe, US, Asia ‚Üí 30mln will become 10mln x 3 cells. Behind the scenes, DAX is adding a \u003ccode\u003eFILTER\u003c/code\u003e saying \u003ccode\u003eFILTER (Area = ‚ÄòEurope‚Äô)\u003c/code\u003e and so on, for every cell). So, the filter context changes the outcome of the expression considering the filters that become active if, for example, it‚Äôs inside a specific cell of a table. What‚Äôs important is the context of the cell containing it: which is precisely the filter context.\u003c/p\u003e\n\u003ch3 id=\"row-context\"\u003eRow Context\u003c/h3\u003e\n\u003cp\u003eThe example I recommend to read carefully uses this calculated column \u003ccode\u003eSales[Gross Margin] = Sales[Quantity] * ( Sales[Net Price] - Sales[Unit Cost] )\u003c/code\u003e. Now remember, this column reasons in terms of rows, so, how does DAX manages to understand which row is working on? Using row context, which is basically a cursor. Row context, then, calculates the expression by considering the row that contains it.\u003c/p\u003e\n\u003cp\u003eIf you write Gross Margin as a measure, you lose the row context, thus you need the iterative version ending with X: \u003ccode\u003eGross Margin := SUMX ( Sales, Sales[Quantity] * ( Sales[Net Price] - Sales[Unit Cost] ) )\u003c/code\u003e . The iterative version works because it uses SUMX, capable of keeping the row context. \u003ccode\u003eGross Margin := Sales[Quantity] * ( Sales[Net Price] - Sales[Unit Cost] )\u003c/code\u003e is invalid.\u003c/p\u003e\n\u003ch3 id=\"other-notes\"\u003eOther Notes\u003c/h3\u003e\n\u003cp\u003e‚Ä¶ The chapter goes on with several interesting examples and questions for understanding the contexts, especially when used in filters.\u003c/p\u003e\n\u003cp\u003eIn the case of complex functions that work in two different contexts, there‚Äôs the \u003ccode\u003eEARLIER\u003c/code\u003e function for accessing the more external layer. Honestly, I hope to never use it, it‚Äôs extremely tricky, read the book to understand how the switch works, but even the authors admit that variables work better.\u003c/p\u003e\n\u003cp\u003eGolden rule: \u003cstrong\u003erow context iterates, filter context filters\u003c/strong\u003e. Thus you can‚Äôt use the row context without a \u003ccode\u003eRELATED/RELATEDTABLE\u003c/code\u003e. On the contrary, the filter context uses relationships automatically, but be aware that its behavior can be different depending on the relationship‚Äôs direction (see chapter 15). I point out a very interesting example with \u003ccode\u003eSUMMARIZE\u003c/code\u003e in the case of the calculation of the average customers‚Äô age without including duplicates: the code shows how to include a different column, read it carefully.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCorrect Average :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AVERAGEX ( \u003cspan style=\"color:#75715e\"\u003e-- Iterate on\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\tSUMMARIZE ( \u003cspan style=\"color:#75715e\"\u003e-- all the existing combinations\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\tSales, \u003cspan style=\"color:#75715e\"\u003e-- that exist in Sales\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\tSales[CustomerKey], \u003cspan style=\"color:#75715e\"\u003e-- of the customer key and\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\tSales[Customer Age] \u003cspan style=\"color:#75715e\"\u003e-- the customer age\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t), \u003cspan style=\"color:#75715e\"\u003e--\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eSales[Customer Age] \u003cspan style=\"color:#75715e\"\u003e-- and average the customer\u0026#39;s age\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e-- TODO: you should break it down in a variable and use AVERAGEX too\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"5--understanding-calculate-and-calculatetable\"\u003e5 ‚ö†Ô∏è Understanding CALCULATE and CALCULATETABLE\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eCALCULATE\u003c/code\u003e is the most important and powerful DAX function and the one with significant nuances to understand. \u003ccode\u003eCALCULATETABLE\u003c/code\u003e is the same but returns a table. Their complexity is caused by their unique characteristic: \u003cstrong\u003ethey can create new filters\u003c/strong\u003e thus modifying the filter context seen in Chapter 4. Here again, the authors recommend reading the section several times until perfectly understand it.\u003c/p\u003e\n\u003cp\u003eThe formula is \u003ccode\u003eCALCULATE ( Expression, Condition1, ... ConditionN )\u003c/code\u003e, accepting every expression as a first parameter, then N filters. For filters, which are tables or lists of values, you can use an expression like \u003ccode\u003e'Product'[Brand] = \u0026quot;Contoso‚Äù\u003c/code\u003e; behind the scenes, DAX changes it to \u003ccode\u003eFILTER ( ALL ( 'Product'[Brand] ), 'Product'[Brand] = \u0026quot;Contoso\u0026quot; )\u003c/code\u003e. For readability, use the compact form, but be aware of some edge cases that require the extended \u003ccode\u003eFILTER\u003c/code\u003e one.\u003c/p\u003e\n\u003cp\u003eIn short, \u003ccode\u003eCALCULATE\u003c/code\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMakes a copy of the existing filter context\u003c/li\u003e\n\u003cli\u003eEvaluates every filter in its arguments, and, for each condition, creates a list of valid values for the specific column (in the example, it will be \u003ccode\u003e{‚ÄôContoso}‚Äô\u003c/code\u003e). It‚Äôs like a \u003ccode\u003eFILTER ALL\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIf 2+ filters concern the same columns, they will be joined with an \u003ccode\u003eAND\u003c/code\u003estatement\u003c/li\u003e\n\u003cli\u003eUses the new condition for replacing the existing filters (thus ignoring previous selections or filters!) or adding it to the context if they are new\u003c/li\u003e\n\u003cli\u003eIf there‚Äôs a row context, it applies a \u003cstrong\u003eCONTEXT TRANSITION\u003c/strong\u003e (VERY IMPORTANT, SEE BELOW) transforming it into a filter context and removing the aforementioned row context\u003c/li\u003e\n\u003cli\u003eWhen it‚Äôs done, it applies the new filter context to the model, makes the calculation then comes back to the original situation. It‚Äôs just a temporary modification\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNow, remember: since \u003ccode\u003eCALCULATE\u003c/code\u003e uses a \u003ccode\u003eFILTER ( ALL)\u003c/code\u003e behind the scenes, if you want to avoid losing all the previous filters you have to use the extended form with \u003ccode\u003eVALUES\u003c/code\u003e in the argument instead of \u003ccode\u003eALL\u003c/code\u003e. With this method, the existing filters will be kept. I point out another interesting example that shows a Ratio in relationship with the unfiltered Sales table, while the Date table has to keep its filters.\u003c/p\u003e\n\u003ch3 id=\"filtering-with-complex-conditions\"\u003eFiltering with complex conditions\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e//\u003c/span\u003e WRONG\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e There \u003cspan style=\"color:#66d9ef\"\u003eare\u003c/span\u003e two different columns, you have \u003cspan style=\"color:#66d9ef\"\u003eto\u003c/span\u003e use the extended form\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSales \u003cspan style=\"color:#66d9ef\"\u003eLarge\u003c/span\u003e Amount :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCALCULATE (\t [Sales Amount],\t Sales[Quantity] \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e Sales[Net Price] \u003cspan style=\"color:#f92672\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e//\u003c/span\u003e CORRECT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSales \u003cspan style=\"color:#66d9ef\"\u003eLarge\u003c/span\u003e Amount :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tCALCULATE ( [Sales Amount],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e FILTER (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t \u003cspan style=\"color:#66d9ef\"\u003eALL\u003c/span\u003e ( Sales[Quantity], Sales[Net Price] ),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t Sales[Quantity] \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e Sales[Net Price] \u003cspan style=\"color:#f92672\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e ))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThere‚Äôs an example with a slicer trying to filter a table with a measure using \u003ccode\u003eCALCULATE\u003c/code\u003e, but obviously since there‚Äôs an \u003ccode\u003eALL\u003c/code\u003ein the compact form, the slicer doesn‚Äôt work! You must use a \u003ccode\u003eKEEPFILTERS\u003c/code\u003e for wrapping the filter condition.\u003c/p\u003e\n\u003ch3 id=\"context-transition\"\u003eContext Transition\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eCALCULATE\u003c/code\u003e invalidates any row context. It automatically adds as filter arguments all the columns that are currently being iterated in any row context‚Äîfiltering their actual value in the row being iterated\nIn short, \u003ccode\u003eCALCULATE\u003c/code\u003e transforms the row context into a new filter to be added to the filter context, since there‚Äôs no way for it to understand the row context. That‚Äôs the transition!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAn excellent example for reviewing the concept. The formula \u003ccode\u003eSum Num Of Sales := SUMX ( Sales, COUNTROWS ( Sales ) )\u003c/code\u003e, surprisingly, shows the squared \u003ccode\u003eCOUNTROWS\u003c/code\u003e! In fact, the amount of Contoso rows is, say, 37000, and \u003ccode\u003eSUMX\u003c/code\u003e iterates 37000 times for each row, thus the outcome will be 37000*37000 since it‚Äôs targeting the row context!\u003c/p\u003e\n\u003cp\u003eAnother example: \u003ccode\u003eSales Amount := SUMX ( Sales, CALCULATE ( SUM ( Sales[Quantity])))\u003c/code\u003e. The secret is that, behind the scenes, CALCULATE is using row-by-row filters since it‚Äôs following the row context in the SUM, thus it‚Äôs calculating \u003ccode\u003eTot = CALCULATE(SUM ( Sales[Quantity] ), Sales[Product] = ‚ÄúA‚Äù)  + CALCULATE(SUM ( Sales[Quantity] ), Sales[Product] = ‚ÄúB‚Äù)\u003c/code\u003e\u0026hellip; for n times.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe context transition (from now, CT) is expensive. Use \u003ccode\u003eCALCULATE\u003c/code\u003esparingly, because during iterations it will apply filters on every row\u003c/li\u003e\n\u003cli\u003eCT doesn‚Äôt filter one row only! \u003cstrong\u003eThe new filter filters all the rows with the same value\u003c/strong\u003e! So, if in the example above \u003ccode\u003eSales[Product] = ‚ÄúA‚Äù\u003c/code\u003e, there could be more than one result based on the input data\u003c/li\u003e\n\u003cli\u003eCT may use columns not included in the formula\u003c/li\u003e\n\u003cli\u003eCT creates a filter context from a row context\u003c/li\u003e\n\u003cli\u003eCT happens only when there‚Äôs a row context (in iterators and calculated columns). Remember that measures contain implicit \u003ccode\u003eCALCULATE\u003c/code\u003e too!\u003c/li\u003e\n\u003cli\u003eCT transforms all the row contexts, without exceptions\u003c/li\u003e\n\u003cli\u003eCT invalids every existing row context once the transition happens\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_1.png\" alt=\"SUMX without CALCULATE example\"\u003e\n\u003cem\u003e\u003ccode\u003eSUMX\u003c/code\u003e without CALCULATE ignores the row context. The solution work because the Sales column has unique IDs, so there aren‚Äôt duplicates!\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eUnfortunately, the CT doesn‚Äôt filter a single row but works with unique values, so we will have extremely tricky errors in case of tables with duplicates! Using this tactic is not only incorrect, but also very slow since the engine has to iterate for all the rows of the table. Using a measure is wrong too, because:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhenever you read a measure call in DAX, you should always read it as if \u003ccode\u003eCALCULATE\u003c/code\u003e were there\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_2.png\" alt=\"Wrong formula\"\u003e\n\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_3.png\" alt=\"Wrong formula Results\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eWrong formula: the Right Sales Amount doesn‚Äôt use \u003ccode\u003eCALCULATE\u003c/code\u003e\u003c/em\u003e\u003c/p\u003e\n\u003ch2 id=\"calculate-modifiers-see-chapter-14\"\u003eCALCULATE modifiers (see Chapter 14)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eUSERELATIONSHIP\u003c/code\u003e, used in some edge cases (e.g. you have an Order Date and a Delivery Date, which one should you use as a Relationship Key with the Date table?). You will have to make two relationships, one active and one inactive, then add in the expressions using the inactive relationship the expression \u003ccode\u003eUSERELATIONSHIP(Key1, Key2)\u003c/code\u003e in the \u003ccode\u003eCALCULATE\u003c/code\u003e, which tells DAX to temporarily change the status of the inactive relationship.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCROSSFILTER\u003c/code\u003e, which is similar, but more powerful: it can disable the relationship between tables and change its direction (more on this later). I\u0026rsquo;ve never used it though\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eKEEPFILTERS\u003c/code\u003e keeps the existing filters like \u003ccode\u003eVALUES\u003c/code\u003e, for example in \u003ccode\u003eAudio Sales KeepFilters := CALCULATE ( [Sales Amount], KEEPFILTERS ( 'Product'[Category] = \u0026quot;Audio\u0026quot; ) )\u003c/code\u003e. However, it doesn\u0026rsquo;t overwrite the filter context, but simply adds the filters in its arguments with an \u003ccode\u003eAND\u003c/code\u003e operator. The outcome will then have BLANK rows if they aren\u0026rsquo;t included in the filter condition. Observe the differences:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_4.png\" alt=\"CALCULATE example\"\u003e\n\u003cem\u003e\u003ccode\u003eCALCULATE ( [Sales Amount], 'Product'[Category] = \u0026quot;Audio\u0026quot; )\u003c/code\u003e\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_5.png\" alt=\"CALCULATE KEEPFILTERS example\"\u003e\n\u003cem\u003e\u003ccode\u003eCALCULATE ( [Sales Amount], KEEPFILTERS ( 'Product'[Category] = \u0026quot;Audio\u0026quot; ) )\u003c/code\u003e\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eALL\u003c/code\u003e shows a different behavior if used inside a \u003ccode\u003eCALCULATE\u003c/code\u003e, becoming a sort of \u003ccode\u003eREMOVEFILTER\u003c/code\u003e and removing the effect of any \u003ccode\u003eKEEPFILTERS\u003c/code\u003e, even if it\u0026rsquo;s used after the statement. That\u0026rsquo;s because the ALL* modifiers have higher execution priority than normal filters\n\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_6.png\" alt=\"They are the same\"\u003e\n\u003cem\u003eThey are the same\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLSELECTED\u003c/code\u003e, like \u003ccode\u003eALL\u003c/code\u003e, has a different behavior: see Chapter 14 and be very careful when using it, it should be avoided!\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"6--variables\"\u003e6 ‚ú® Variables\u003c/h2\u003e\n\u003cp\u003eThey are important for code readability and performance optimization, use them if you see repetitions. The only thing to remember well is that they are immutable CONSTANTS calculated at the beginning of the calculation containing them. Every variables must be introduced with \u003ccode\u003eVAR\u003c/code\u003e.\nPay attention to the definition order: a variable can\u0026rsquo;t reference another variable declared later.\u003c/p\u003e\n\u003cp\u003eAnother peculiarity is the name: it must be different from every existing table\u0026rsquo;s name, otherwise DAX gets confused. A best practice is to use long names precisely describing their purpose. The engine, when creating variables, uses two \u003ccode\u003e__\u003c/code\u003eas prefix\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_7.png\" alt=\"good example about variables‚Äô immutability\"\u003e\n\u003cem\u003eHere‚Äôs a good example about variables‚Äô immutability\u003c/em\u003e\u003c/p\u003e\n\u003ch2 id=\"7--working-with-iterators-and-with-calculate\"\u003e7 üîÑ Working with iterators and with CALCULATE\u003c/h2\u003e\n\u003cp\u003eMost of the iterators require a table and an expression used to calculate something row-by-row inside that table (e.g. \u003ccode\u003eSUMX\u003c/code\u003e calculates the sum). Specifically, the expression will iterate every row, collecting its value, then will apply the operation (in this case, a sum). Thus, all the iterators are working in the same way, except for the final operation they apply.\u003c/p\u003e\n\u003cp\u003eKeyword: \u003cstrong\u003eiterator cardinality\u003c/strong\u003e ‚Üí it\u0026rsquo;s the number of rows scanned by the iterator and it should be kept as low as possible. You should avoid nesting different iterations, making the cardinality grow exponentially.\u003c/p\u003e\n\u003cp\u003eThe chapter goes on with several interesting examples, such as how to calculate the day of the biggest sale by nesting \u003ccode\u003eMAXX\u003c/code\u003e and \u003ccode\u003eSUMX\u003c/code\u003e, or showing the list of visible colors by using CONCATENATEX\u003ccode\u003ee\u003c/code\u003eVALUES\u003ccode\u003e, or how\u003c/code\u003e ALLSELECTED\u003ccode\u003emakes more sense when used together with\u003c/code\u003eRANKX\u003ccode\u003eis the user is applying a filter, and how\u003c/code\u003eAVERAGEX\u003ccode\u003eshould be changed with\u003c/code\u003eDIVIDE` in case some blank values are in the data since the latter can manage automatically the division by zero and gives a correct result.\u003c/p\u003e\n\u003ch2 id=\"8--time-intelligence-calculations\"\u003e8 üîÑ Time Intelligence Calculations\u003c/h2\u003e\n\u003cp\u003eVery useful chapter, since dates in DAX are handled in a not-so-intuitive way.\u003c/p\u003e\n\u003cp\u003eA great tip is to always have a date table called Date in relationship with all the others for working with dates exclusively there, for optimizing performances, simply the structure and improving the user experience.\u003c/p\u003e\n\u003cp\u003eBy default, PowerBI creates a hidden date table for every Time/DateTime column of the model, to create slicers and drilldowns with a calendar logic (year, quarter, month, day etc\u0026hellip;). Unfortunately, this method creates a table for every column, causing overheads, and you can\u0026rsquo;t either view or modify them. It\u0026rsquo;s better to deactivate the automatic creation and use your user-created Date table.\u003c/p\u003e\n\u003ch3 id=\"some-notes\"\u003eSome notes\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDon\u0026rsquo;t make it huge, like 1900-2100 (ooooops üòï). It increases the cardinality and slows down calculations\u003c/li\u003e\n\u003cli\u003eUse ‚Äú ‚Äú when mentioning the \u0026ldquo;Date\u0026rdquo; table, because \u003ccode\u003eDATE\u003c/code\u003e is a reserved keyword in DAX (being a function)\u003c/li\u003e\n\u003cli\u003eYou can quickly create your \u0026ldquo;Date\u0026rdquo; table using \u003ccode\u003eCALENDAR\u003c/code\u003e and \u003ccode\u003eCALENDARAUTO\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eUseful template from the authors: \u003ca href=\"https://www.sqlbi.com/tools/dax-date-template/\"\u003ehttps://www.sqlbi.com/tools/dax-date-template/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eUSERELATIONSHIP\u003c/code\u003e for making calculations with different Date columns as key (see Chapter 5 with active/inactive relationships)\u003c/li\u003e\n\u003cli\u003eDAX takes a different approach when using a Date filter in a \u003ccode\u003eCALCULATE\u003c/code\u003e with two columns connected with Date relationships (both keys are dates): the engine automatically adds \u003ccode\u003eALL (‚ÄôDate‚Äô)\u003c/code\u003e to the formula for making possible time intelligence calculations without messing up with the context transition (see the examples)\u003c/li\u003e\n\u003cli\u003eYou can apply the same special behavior with the \u003cstrong\u003e‚ÄúMark as Date Table‚Äù\u003c/strong\u003e command to avoid putting \u003ccode\u003eALL\u003c/code\u003e in every measure if you have a non-Time formatted key (e.g. int YYYYMMMDD)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"some-useful-functions\"\u003eSome useful functions\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eDATESYTD\u003c/code\u003e returns all the dates from the beginning of the year till now, for a quick filter in a \u003ccode\u003eCALCULATE\u003c/code\u003e. There are equivalent expressions, \u003ccode\u003eDATESMTD\u003c/code\u003e and \u003ccode\u003eDATESQTD\u003c/code\u003e, for months and quarters\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAvoid the deprecated \u003ccode\u003eTOTALYTD ( [Sales Amount], 'Date'[Date] )\u003c/code\u003e, equivalent to \u003ccode\u003eCALCULATE ([Sales Amount], DATESYTD(‚ÄôDate‚Äô))\u003c/code\u003e: it has a hidden \u003ccode\u003eCALCULATE\u003c/code\u003e!\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eSTARTOFYEAR, ENDOFYEAR, PREVIOUSYEAR, NEXTYEAR, DATESYTD, TOTALYTD, OPENINGBALANCEYEAR\u003c/code\u003e, \u003ccode\u003eCLOSINGBALANCEYEAR\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eSAMEPERIODLASTYEAR\u003c/code\u003e returns a set of dates shifted one year before\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eDATEADD\u003c/code\u003e is very powerful and flexible: you can decide how much to add (a number) and what (years, quarters, months, etc\u0026hellip;), such as \u003ccode\u003ePQ Sales := CALCULATE ( [Sales Amount], DATEADD ( 'Date'[Date], -1, QUARTER ) )\u003c/code\u003e. It always returns days included in the Date table and it can become cumbersome during some edge cases, read well this section.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ePARALLELPERIOD\u003c/code\u003e is useful if you are looking for the entire period despite the presence of row filters. So, for example, if you want the result of the previous quarter in the rows January, February, March write \u003ccode\u003ePQ Total Sales :=CALCULATE ( [Sales Amount], PARALLELPERIOD ( 'Date'[Date], -1, QUARTER ) )\u003c/code\u003e and see the results in the example:\n\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_8.png\" alt=\"PARALLELPERIOD\"\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe functions \u003ccode\u003ePREVIOUSYEAR, PREVIOUSQUARTER, PREVIOUSMONTH, PREVIOUSDAY, NEXTYEAR, NEXTQUARTER, NEXTMONTH,\u003c/code\u003e and \u003ccode\u003eNEXTDAY\u003c/code\u003e are using the same \u0026lsquo;independent\u0026rsquo; context\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eDATESINPERIOD\u003c/code\u003e is a classic for calculating the Moving Annual Total (the total of the last 12 months). There are some alternative examples with \u003ccode\u003eDATESBETWEEN\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePay attention to the semi-additive measures, which can be cumbersome. For example, a bank account balance: it\u0026rsquo;s not the sum of all the rows in the previous period, but the value at the end of the month! The suggestion is to use \u003ccode\u003eLASTDATE\u003c/code\u003e and \u003ccode\u003eLASTNONBLANK\u003c/code\u003e to calculate the balance on the last available day, without messing up with the row context.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eSTARTOFYEAR, STARTOFQUARTER, STARTOFMONTH, ENDOFYEAR, ENDOFQUARTER, ENDOFMONTH\u003c/code\u003e are mostly used for financial data, see the stock chart example\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"9--calculations-group\"\u003e9 ‚ùì Calculations Group\u003c/h2\u003e\n\u003cp\u003eThey are a great way for grouping similar measures, but they currently have a great problem: they are not available on PowerBI, but you have to use the Tabular model underneath with \u003ca href=\"https://tabulareditor.github.io/\"\u003eTabular Editor\u003c/a\u003e, which is a new tool. I won\u0026rsquo;t talk about them here because I found groups more complicated than useful in my case, even if I acknowledge their potentialities. Eventually, read the chapter again when you\u0026rsquo;ll notice many similar, repeated measures.\u003c/p\u003e\n\u003cp\u003eIn short, instead of having many measures like\n\u003ccode\u003eYTD Sales Amount := CALCULATE ( [Sales Amount], DATESYTD ( 'Date'[Date] ) )  YTD Total Cost := CALCULATE ( [Total Cost], DATESYTD ( 'Date'[Date] ) )  YTD Margin := CALCULATE ( [Margin], DATESYTD ( 'Date'[Date] ) )\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eYou can create a Calculation Group, hereby called ‚ÄúTime Intelligence‚Äù, and use them as \u003ccode\u003eCALCULATE ( [Sales Amount], 'Time Intelligence'[Time calc] = \u0026quot;YTD\u0026quot; )\u003c/code\u003e etc\u0026hellip; The Time Intelligence group is like a function accepting as input parameter the field to apply to its in-memory formula. They must be simple, without aggregating different calculations. Avoid recursions and follow the best practices in the chapter\u0026rsquo;s examples. Low priority for me, as said.\u003c/p\u003e\n\u003ch2 id=\"10--working-with-the-filter-context\"\u003e10 üîÑ Working with the filter context\u003c/h2\u003e\n\u003ch3 id=\"understanding-the-differences\"\u003eUnderstanding the differences\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSELECTEDVALUE\u003c/code\u003e vs \u003ccode\u003eHASONEVALUE\u003c/code\u003e: when using a filter, remember that filters should never return anything, but rather a default value. Use the \u003ccode\u003eSELECTEDVALUE\u003c/code\u003e shortcut, equivalent to \u003ccode\u003eIF(HASONEVALUE, ‚Ä¶)\u003c/code\u003e, that accepts a second parameter to return in case of #value != 1. To be used with slicers\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eISFILTERED\u003c/code\u003e vs \u003ccode\u003eISCROSSFILTERED\u003c/code\u003e: the first returns a boolean about the presence of filters on the table, while the latter also checks the filters on related tables that have relationships with the element passed as a parameter. In fact, if you crossfilter a column, the entire table is classified as True by \u003ccode\u003eISCROSSFILTERED\u003c/code\u003e. Remember that a table can be filtered (thus \u003ccode\u003eISFILTERED\u003c/code\u003e gives True), yet it shows all the values (e.g. filter \u003ccode\u003eCustomer[City] \u0026lt;\u0026gt; \u0026quot;DAX‚Äù\u003c/code\u003e, which won\u0026rsquo;t ever happen), so treat is carefully\u0026hellip;\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eVALUES\u003c/code\u003e vs \u003ccode\u003eFILTERS\u003c/code\u003e: the first shows all the values visible in the filter context, the latter the values filtered in the filter context given as an argument. Sometimes they are the same, but if there are other active filters, \u003ccode\u003eVALUES\u003c/code\u003e may show fewer results! I think that \u003ccode\u003eFILTERS\u003c/code\u003e should be used only for telling the user that at the moment he has selected those values in his slicer, or for creating tables/showing values independently from other filters\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLEXCEPT\u003c/code\u003e vs \u003ccode\u003eALL\u003c/code\u003e/\u003ccode\u003eVALUES\u003c/code\u003e: a classic from the book, it compares the two functions several times. They are used for selecting a single filter context from the total, using \u003ccode\u003eALL\u003c/code\u003e(no filters) \u003ccode\u003eEXCEPT\u003c/code\u003e (filter). The first can have dangerous side effects (see Chapter 14) because it removes other filters, while a formula like \u003ccode\u003eAll Values Type := CALCULATE ( [NumOfCustomers], ALL ( Customer ), VALUES ( Customer[Customer Type] ) )\u003c/code\u003e gives you back the \u0026lsquo;pure\u0026rsquo; result, only considering the filter on the type and removing the famous context transition. Use it.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eISEMPTY\u003c/code\u003e vs \u003ccode\u003eCOUNTROWS(VALUES) = 0\u003c/code\u003e: they are the same but the first has better performances\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"data-lineage-and-treatas\"\u003eData Lineage and TREATAS\u003c/h3\u003e\n\u003cp\u003eData lineage (\u003ca href=\"https://www.sqlbi.com/articles/understanding-data-lineage-in-dax/\"\u003esimply explained here\u003c/a\u003e) is a tag that identifies the original column in the data model that we are querying. When selecting some values, PowerBI keeps some metadata, including the lineage specifying which \u0026lsquo;connected\u0026rsquo; columns can be queried using the selected columns. If you use some expressions such as \u003ccode\u003eADDCOLUMNS\u003c/code\u003e, you\u0026rsquo;ll lose the lineage, thus you will just get a raw outpout. This is important to understand for avoiding annoying side effects with filters and slicers.\u003c/p\u003e\n\u003cp\u003eE.g. having an intermediate table created manually like \u003ccode\u003eNewTable = {‚ÄôRed‚Äô,‚ÄôBlue‚Äô}\u003c/code\u003e, it can\u0026rsquo;t possibly know to be originated from the column \u003ccode\u003eProduct[Color]\u003c/code\u003e, losing all the original relationships. A slicer using NewTable won\u0026rsquo;t filter anything! With \u003ccode\u003eTREATAS\u003c/code\u003e you can forcefully assign another table\u0026rsquo;s characteristics (they must have the same structure of course!). Another good example is when you\u0026rsquo;re creating a table with custom years and you want to use it as a Date table, applying a personalized filter without iterating. Check them out.\u003c/p\u003e\n\u003ch2 id=\"11--handling-hierarchies\"\u003e11 ‚ùì Handling hierarchies\u003c/h2\u003e\n\u003cp\u003eHierarchies aren\u0026rsquo;t natively supported on DAX formulas, thus implementing them can be very tricky. A classic example is when a measure behaves differently based on the active hierarchy, for example with product categories and subcategories. In the book\u0026rsquo;s example, a combination of \u003ccode\u003ePercOnSubcategory := DIVIDE ( [Sales Amount], CALCULATE ( [Sales Amount], ALLSELECTED ( Product[Product Name] ) ) )\u003c/code\u003e is used for calculating the percentage of each subcategory compared to all the rows of the selected category. Changing the element in the hierarchy can be done by replacing the argument in \u003ccode\u003eALLSELECTED\u003c/code\u003e (Category, Product Name, etc\u0026hellip;).\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eISINSCOPE\u003c/code\u003e is a useful function that simulates a hierarchy focus, returning TRUE if the arg column is filtered and has been used for grouping (thus both row and filter contexts are using it). In the book, it is used for showing BLANK if the calculation is not about the selected hierarchy.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_9.png\" alt=\"ISINSCOPE 1\"\u003e\n\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_10.png\" alt=\"ISINSCOPE 2\"\u003e\u003c/p\u003e\n\u003cp\u003eThere are very advanced examples here, I wouldn\u0026rsquo;t recommend them unless they are heavily used in the current. At the moment I\u0026rsquo;m not writing down anything else.\u003c/p\u003e\n\u003ch2 id=\"12--working-with-tables\"\u003e12 üîÑ Working with tables\u003c/h2\u003e\n\u003ch3 id=\"exploring-calculatetable\"\u003eExploring CALCULATETABLE\u003c/h3\u003e\n\u003cp\u003eA common question is about the differences between \u003ccode\u003eFILTER\u003c/code\u003e (which returns a table) and \u003ccode\u003eCALCULATETABLE\u003c/code\u003e (which is like \u003ccode\u003eCALCULATE\u003c/code\u003e but with a table). The latter is very powerful: it changes the context filter first and then calculates the expression; \u003ccode\u003eFILTER\u003c/code\u003e iterates the table and groups together the rows that are included in the filter \u003cstrong\u003ewithout changing the context\u003c/strong\u003e. You should use \u003ccode\u003eCALCULATETABLE\u003c/code\u003e whenever you want a context transition, but there\u0026rsquo;s a limit: it must be applied only on columns that belong to the data model; with measures, \u003ccode\u003eFILTER\u003c/code\u003e becomes necessary. E.g. (\u003ccode\u003eLarge Customers = FILTER ( Customer, [Sales Amount] \u0026gt; 1000000)\u003c/code\u003e). More info about performances \u003ca href=\"https://www.sqlbi.com/articles/filter-vs-calculatetable-optimization-using-cardinality-estimation/\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"functions-for-manipulating-tables\"\u003eFunctions for manipulating tables\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eADDCOLUMNS\u003c/code\u003e returns all the rows and columns of the first parameter and adds new columns (as name, column; e.g. \u003ccode\u003eColorsWithSales = ADDCOLUMNS ( VALUES ( 'Product'[Color] ), \u0026quot;Sales Amount\u0026quot;, [Sales Amount] )\u003c/code\u003e). It\u0026rsquo;s used in complex formulas whenever creating some intermediate table, to be filtered at the end, becomes necessary.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSUMMARIZE\u003c/code\u003e is often used for grouping values on one or more columns\u0026hellip; A sort of GROUP BY in SQL. For example, \u003ccode\u003eNum of colors sold := COUNTROWS ( SUMMARIZE ( Sales, 'Product'[Color] ) )\u003c/code\u003e scans the Sales table and returns all the visible values there. With \u003ccode\u003eVALUES\u003c/code\u003e, I would\u0026rsquo;ve seen ALL the colors, whether they had sales or not. Warning: do not use it alone for creating temporary columns: use \u003ccode\u003eADDCOLUMNS\u003c/code\u003e + \u003ccode\u003eSUMMARIZE\u003c/code\u003e, better optimized.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCROSSJOIN\u003c/code\u003e is like a SQL FULL JOIN, returning all the unique combinations between two tables. It seems slow and badly optimized at first, but sometimes it\u0026rsquo;s better to create a small table with all the combinations between two big tables and scan them with filters, especially when there are many duplicated values. As always, read the examples.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eUNION\u003c/code\u003e unites all the values between two tables/columns and keeps the duplicates (use \u003ccode\u003eDISTINCT\u003c/code\u003e for removing them); it keeps the data lineage only if both sources have the same (so, a self-JOIN): if it loses it, use \u003ccode\u003eTREATAS\u003c/code\u003e for telling the result to which column in the data model belongs.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eINTERSECT\u003c/code\u003e is the opposite: it returns the common values between two columns; less used\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eEXCEPT\u003c/code\u003e is a subtraction: it removes from the first table the rows existing in the second table\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"functions-for-generating-tables\"\u003eFunctions for generating tables\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSELECTCOLUMNS\u003c/code\u003e selects only the desired columns of a table: it accepts a list of column names, and it can be used when generating a new table from an existing one, usually in an intermediate step for reducing cardinality and ignoring unnecessary columns. If more than a column is passed as parameters, the data lineage is lost.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eROW\u003c/code\u003e returns a table with a single row. It requires a couple of names and expressions like \u003ccode\u003eROW ( \u0026quot;Sales\u0026quot;, [Sales Amount], \u0026quot;Quantity\u0026quot;, SUM ( Sales[Quantity] ) )\u003c/code\u003e; it\u0026rsquo;s deprecated, just use \u003ccode\u003e{}\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDATATABLE\u003c/code\u003e is a more advanced table constructor; it has a more complex syntax since it requires specifying the type of each column, and you usually use it for hard-coded simple tables. I prefer making them in SQL, so I doubt I\u0026rsquo;ll use the function frequently.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eGENERATESERIES\u003c/code\u003e is like the \u003ccode\u003erange\u003c/code\u003e function: it returns a sequence of elements (dates, numbers) from the starting and ending parameters\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"13--authoring-queries\"\u003e13 ‚ú® Authoring Queries\u003c/h2\u003e\n\u003cp\u003eHere we explore DAX Studio, very useful for testing, formatting and debugging DAX queries. A must-have. Since this article is becoming very long, I recommend watching some Youtube Tutorials like this \u003ca href=\"https://www.youtube.com/watch?v=qeelmG7jcnc\"\u003eone\u003c/a\u003e or this \u003ca href=\"https://www.youtube.com/watch?v=fV2ZK4q3FBQ\"\u003eone\u003c/a\u003e to save time. It\u0026rsquo;s simpler than writing down everything that is presented in the chapter.\u003c/p\u003e\n\u003cp\u003eIn short, with DAX studio you must begin your DAX scripts with the \u003ccode\u003eEVALUATE\u003c/code\u003e statement, which requires a table as the first argument (so, remember: you have to switch \u003ccode\u003eCALCULATE\u003c/code\u003e with \u003ccode\u003eCALCULATETABLE\u003c/code\u003e). With the \u003ccode\u003eDEFINE MEASURE\u003c/code\u003e keyword you can create temporary measures (which need a host table, differently from PowerBI) or variables.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eDEFINE\r\n VAR Threshold = 200 // VAR is the same\r\n MEASURE Sales[LargeSales] = //LargeSales must be honested on a table like a Calculated Col\r\n\t CALCULATE (\r\n\t [Sales Amount],\r\n\t Sales[Net Price] \u0026gt;= Threshold \t )\r\nEVALUATE\r\n\tADDCOLUMNS (   // using ADDCOLUMNS because it needs a table as input\r\n\t VALUES ( \u0026#39;Product\u0026#39;[Category] ),\r\n\t \u0026#34;Large Sales\u0026#34;, [LargeSales]\r\n\t)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSome functions you\u0026rsquo;ll be using for authoring queries:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eSUMMARIZECOLUMNS\u003c/code\u003e (great explanation \u003ca href=\"https://www.sqlbi.com/articles/introducing-summarizecolumns/\"\u003ehere\u003c/a\u003e, a sort of LEFT JOIN) is very useful for composing a query: it requires a set of columns to group (like \u003ccode\u003eSUMMARIZE\u003c/code\u003e), another set of columns to add to the result (like \u003ccode\u003eADDCOLUMNS\u003c/code\u003e) and a set of filters to apply (like the extended form of \u003ccode\u003eCALCULATETABLE\u003c/code\u003e) as arguments. It also removes blank results (bypassable with \u003ccode\u003eIGNORE\u003c/code\u003e). Its huge limitation, making it usable on DAX Studio but not on PowerBI reports, is that it becomes unusable in case of context transition, which punctually happens in charts or matrixes. It\u0026rsquo;s useful for a rapid debug though, I\u0026rsquo;ll keep it in mind\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTOPN\u003c/code\u003e is another useful expression for scripting: it returns the first N rows of a table, selecting only the columns passed as parameters. It\u0026rsquo;s useful for analyzing a new table without polluting the view with useless columns. \u003ccode\u003eSAMPLE\u003c/code\u003e is similar, but it takes the first and last rows and N rows, returning a sample of the table\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eISONAFTER, GENERATE, TOPNSKIP, ADDMISSINGITEMS, GROUPBY, NATURALINNERJOIN, NATURALLEFTOUTERJOIN, SUBSTITUTEWITHINDEX\u003c/code\u003e are functions internally used by the PowerBI engine, rarely used by a user, since there are more optimized solutions. Maybe read again their definitions if you see them in some formulas\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"14--advanced-dax-concepts\"\u003e14 üîÑ Advanced DAX concepts\u003c/h2\u003e\n\u003ch3 id=\"expanded-tables\"\u003eExpanded Tables\u003c/h3\u003e\n\u003cp\u003eExpanded Tables are the core of DAX. Remember that every time you select a table, there\u0026rsquo;s a hidden world behind it that includes all its relationships!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_11.png\" alt=\"Expanded Tables 1\"\u003e\n\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_12.png\" alt=\"Expanded Tables 2\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen selecting a \u003ccode\u003eCALCULATE\u003c/code\u003e filter on the Color column of Product, we can observe that the filter context uses all the linked tables, including Sales! Using \u003ccode\u003eRELATED\u003c/code\u003e, you can work on the related tables existing in the expanded table.\u003c/p\u003e\n\u003ch3 id=\"the-all-functions\"\u003eThe ALL* functions\u003c/h3\u003e\n\u003cp\u003eThese functions can become extremely cumbersome, especially when used inside a \u003ccode\u003eCALCULATE\u003c/code\u003e. Pay a lot of attention to them:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eALL\u003c/code\u003e: it returns all of the DISTINCT values in a column/table. If used in a \u003ccode\u003eCALCULATE\u003c/code\u003e statement, it \u003cstrong\u003eremoves\u003c/strong\u003e any active filter, becoming a sort of REMOVEFILTER. If a column is cross-filtered it does nothing\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLEXCEPT\u003c/code\u003e: just like \u003ccode\u003eALL\u003c/code\u003e, but the second parameter is a list of columns that should keep their active filters. It\u0026rsquo;s slightly different from the \u003ccode\u003eALL/VALUES\u003c/code\u003e combination (suggested by the authors): in this case, \u003ccode\u003eALL\u003c/code\u003e removes all filters while \u003ccode\u003eVALUES\u003c/code\u003e keeps the cross-filtering by adding a new filter for the visible values. On the opposite, \u003ccode\u003eALLEXCEPT\u003c/code\u003e only removes filters\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLNOBLANKROW\u003c/code\u003e: it returns all the DISTINCT values of a column/table except for, eventually, the blank rows caused by broken relationships in the data model (but not \u0026rsquo;normal\u0026rsquo; blanks, blanks existing because the row just has a NULL value). If used in a \u003ccode\u003eCALCULATE\u003c/code\u003e it adds a filter for ignoring any blank in the result, which is very different!\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLSELECTED\u003c/code\u003e: very dangerous, it returns the distinct values in a column/table related to the latest active shadow filter. Remember that \u003cstrong\u003eDAX has no idea about which visual/slicer the user is using on PowerBI\u003c/strong\u003e, thus \u003ccode\u003eALLSELECTED\u003c/code\u003e is using shadow filters behind the scenes for simulating what the user is viewing. You should never use the function in a measure that will be called by other measures, or you will cause dangerous side effects difficult to debug. Read the chapter about shadow filters for more. If used in a \u003ccode\u003eCALCULATE\u003c/code\u003e context, it restores the most recent shadow filter (or does nothing if there isn\u0026rsquo;t any); in the case of multiple columns, it restores a shadow filter for each parameter\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eALLCROSSFILTERED\u003c/code\u003e: it doesn\u0026rsquo;t work as a table function, but only with \u003ccode\u003eCALCULATE\u003c/code\u003e, and removes every filter from the expanded table, so, every table that can be reached used the relationships of the target table. It only removes, never adds filters\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"other-things-to-remember\"\u003eOther things to remember\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eBe careful with shadow filters (which work on the expanded table); they are used by \u003ccode\u003eALLSELECT\u003c/code\u003e and you should never touch them unless you really know what you are doing. Use column filters, and never table filters as arguments for \u003ccode\u003eCALCULATE\u003c/code\u003e expressions for avoiding them as well\u003c/li\u003e\n\u003cli\u003eEvery column of a table has its own data lineage, which is actually its representation on the data model. Whenever a filter acts, it works on the corresponding column in the model. Thus, if you lose the data lineage you won\u0026rsquo;t be able to filter. You have to use \u003ccode\u003eTREATAS\u003c/code\u003e to \u0026rsquo;teach\u0026rsquo; the item about his lost position in the data model and force it back\u003c/li\u003e\n\u003cli\u003eUsually functions for grouping data keep the data lineage; filters with an aggregation generate a new one; same for \u003ccode\u003eROW\u003c/code\u003e and \u003ccode\u003eADDCOLUMNS\u003c/code\u003e (see examples)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"15--advanced-relationship\"\u003e15 ‚ö†Ô∏è Advanced Relationship\u003c/h2\u003e\n\u003ch3 id=\"calculated-physical-relationships\"\u003eCalculated Physical Relationships\u003c/h3\u003e\n\u003cp\u003eWhen using calculated columns for creating relationships (e.g. the \u003ccode\u003eDiscountDayKey\u003c/code\u003e calculated column, which uses \u003ccode\u003eDay + ProductKey in Sales\u003c/code\u003e for generating the % Discount with a join with the Discount table), be careful about the following details:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUse \u003ccode\u003eDISTINCT\u003c/code\u003e instead of \u003ccode\u003eVALUES\u003c/code\u003e to avoid circular dependencies\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eALLNOBLANKROW\u003c/code\u003e instead of \u003ccode\u003eALL\u003c/code\u003e to avoid circular dependencies (rare)\u003c/li\u003e\n\u003cli\u003eRemember that \u003ccode\u003eCALCULATE\u003c/code\u003e with the compact syntax hides its \u003ccode\u003eFILTER\u003c/code\u003e and can cause circular dependencies in case of specific blanks. Use the extended version in this situation and read the examples\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"virtual-relationships\"\u003eVirtual Relationships\u003c/h3\u003e\n\u003cp\u003eSometimes creating a relation inside the DAX query is simpler, without setting it up in the data model. It\u0026rsquo;s the same for the final user. However, they are less performant, hard to find in the codebase and more complex to handle.\u003c/p\u003e\n\u003cp\u003eThere\u0026rsquo;s a nice example showing how to transfer a filter with \u003ccode\u003eKEEPFILTERS(TREATAS)\u003c/code\u003e (and maybe \u003ccode\u003eSUMMARIZE\u003c/code\u003e first for extracting the columns we need), then doing the calculations with the same filters applied on the new table; remember to use \u003ccode\u003eKEEPFILTERS\u003c/code\u003e or \u003ccode\u003eTREATAS\u003c/code\u003e will reset them!\u003c/p\u003e\n\u003ch3 id=\"relationships\"\u003eRelationships\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSMR\u003c/strong\u003e Single-Many Relationship\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSSR\u003c/strong\u003e Single-Single Relationship (rare)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMMR\u003c/strong\u003e Many-Many Relationship (the most complex; it corresponds to two hidden bridge tables, thus it\u0026rsquo;s weak by nature and doesn\u0026rsquo;t include table expansion. Use the \u0026rsquo;extended form\u0026rsquo; by creating bridge tables whenever you want to show blank values for invalid formats/relationships, otherwise they will be filtered out)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCross-filtering gets mentioned (if a table can filter another one):\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSingle\u003c/strong\u003e: in one direction only, usually the \u0026lsquo;1\u0026rsquo; in SMR can filter the \u0026lsquo;Many\u0026rsquo; but not vice versa, but you can change it\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBoth\u003c/strong\u003e: both directions. It\u0026rsquo;s necessary for SSR and the default setting for MMR; be careful, because they can generate ambiguity, creating paths between tables where there shouldn\u0026rsquo;t be one.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eUnless it\u0026rsquo;s necessary, try to use single relationships in the model: if you have two slicers, with a single relationship you won\u0026rsquo;t filter out the second slicer when one is active. With a \u0026lsquo;both\u0026rsquo; relationship, the second element will display only the available values based on the first filter. It depends on your requirements.\u003c/p\u003e\n\u003cp\u003eBe very careful with ambiguity, it can cause nasty bugs: there could be paths between relationships (e.g. Sales ‚Üí Date ‚Üí Store e Sales ‚Üí Ticket ‚Üí Date ‚Üí Store) which can become complicated with the presence of unnecessary cross-filtering. PowerBI takes the shortest road by default, but maybe that\u0026rsquo;s not what you are looking for.\u003c/p\u003e\n\u003ch2 id=\"16--advanced-calculations\"\u003e16 üîÑ Advanced Calculations\u003c/h2\u003e\n\u003cp\u003eShort chapter with a couple of interesting use cases, I liked the first and the last the most:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWorking days between two dates: it shows some strategies like creating a boolean \u0026lsquo;Is Holiday\u0026rsquo; in the Date Table and counting days while skipping the ones with \u0026lsquo;Is Holiday\u0026rsquo; == False, or, for reducing iterations, groups all orders by date pairs. Read the code in the examples, you\u0026rsquo;ll learn a lot. The best solution is a calculated table with all the distinct combinations, which greatly reduces the iterations during the scanning process.\u003c/li\u003e\n\u003cli\u003eBudget and Sales together: not useful in my situation. It creates a measure for every row with a month that shows the expected budget for the future (when Sales are still null), or the past Sales. It uses \u003ccode\u003eKEEPFILTERS\u003c/code\u003e with a cool trick with Max Date for reducing iterations\u003c/li\u003e\n\u003cli\u003eComputing same-store sales: not useful, the example describes a measure for considering the sales on the multi-year total only if the store was open on that specific year\u003c/li\u003e\n\u003cli\u003eNumbering events: it can be valuable because if you try to brute-force this one you\u0026rsquo;ll have a bad time. The author wants to number the rows of a table based on the occurrences of the customer\u0026rsquo;s name (so the rows will be 1 Jon 33 EUR, 2 Jon 34 EUR, 1 Bob 2 EUR, 1 Sam 4 EUR, 2 Sam 5 EUR etc\u0026hellip;). The right tool is \u003ccode\u003eRANKX\u003c/code\u003e with a \u003ccode\u003ecustomerkey = currentCustomerKey\u003c/code\u003e filter, very effective.\u003c/li\u003e\n\u003cli\u003eComputing LY YTD: very useful, I\u0026rsquo;ve already challenged this one in the past. It uses a \u003ccode\u003eTREATAS\u003c/code\u003e to keep the data lineage, then \u003ccode\u003eSAMEPERIODLASTYEAR\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"17--the-dax-engine\"\u003e17 ‚ú® The DAX Engine\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_13.png\" alt=\"DAX Engine\"\u003e\u003c/p\u003e\n\u003cp\u003eA technical segment that shows what\u0026rsquo;s happening behind the scenes. It isn\u0026rsquo;t focused on \u003cstrong\u003eDirectQuery\u003c/strong\u003e, which is just a SQL query translated and optimized by the Formula Engine, but rather on \u003cstrong\u003eVertiPaq\u003c/strong\u003e, which uses an in-memory copy of the table which will be queried by the Formula Engine too (it doesn\u0026rsquo;t work with uncompressed tables).\u003c/p\u003e\n\u003cp\u003eA third query mode can be \u003cstrong\u003eDual\u003c/strong\u003e, with a table read in-memory during data refresh, but read with DirectQuery at query time.\u003c/p\u003e\n\u003cp\u003eVertiPaq is a columnar database, very effective when you want to filter many rows on a few columns, but slower when filtering a few rows on many columns. Its structure is a transposition of a classic database. Its objective is to be as efficient as possible by compressing data with several methods: hash encryption, unit encoding, RLE, intermediate tables and so on\u0026hellip;\u003c/p\u003e\n\u003ch3 id=\"optimization\"\u003eOptimization\u003c/h3\u003e\n\u003cp\u003eYou have to keep in mind only one thing from this section: the performance cost of a relationship depends on the cardinality (the number of unique values) of the columns used in the relationship. Over 100k unique values the delay becomes noticeable, so pay attention when using \u003ccode\u003eRELATED\u003c/code\u003e or cross-filtering different tables.\u003c/p\u003e\n\u003ch3 id=\"materialization\"\u003eMaterialization\u003c/h3\u003e\n\u003cp\u003eIt\u0026rsquo;s a step in the query execution process used with columnar DBs. Every time the formula engine makes a request, it receives back a temporary table called datacache; it\u0026rsquo;s a materialization that will be consumed in both cases: DirectQuery or VertiPaq. It\u0026rsquo;s the engine\u0026rsquo;s way to get access to raw data. If the datacache has the same cardinality of the final result it\u0026rsquo;s considered \u0026rsquo;late\u0026rsquo; (very rare for complex calculations), otherwise, it will be \u0026rsquo;early\u0026rsquo;. Just remember that datacaches are intermediate data between the raw DB query in SQL and the processing engines.\u003c/p\u003e\n\u003ch3 id=\"aggregation\"\u003eAggregation\u003c/h3\u003e\n\u003cp\u003eIt\u0026rsquo;s an engine trick for optimizing the storage engine queries by using group by clauses. The most common aggregations are already included in the tables, ready to be used.\u003c/p\u003e\n\u003cp\u003eFurthermore, there are details about the Hardware, not interesting in my case.\u003c/p\u003e\n\u003ch2 id=\"18--optimizing-vertipaq\"\u003e18 ‚ùì Optimizing VertiPaq\u003c/h2\u003e\n\u003cp\u003eThe book introduces DVM, with several examples for monitoring every table\u0026rsquo;s size and relationships. I will not go into it further.\u003c/p\u003e\n\u003ch3 id=\"denormalization\"\u003eDenormalization\u003c/h3\u003e\n\u003cp\u003eEvery relationship has a memory cost. VertiPaq tries to denormalize unused tables, reducing their column and relationships. There could be problems (technical problems) when this clashes with another tendency of VertiPaq: normalizing everything for speeding up operations and creating tons of intermediate tables. Eventually, the book suggests forcefully creating inactive/active relationships \u0026lsquo;forcing\u0026rsquo; the engine to denormalize some tables/columns and avoiding performance issues. I didn\u0026rsquo;t understand this part well, honestly.\u003c/p\u003e\n\u003ch3 id=\"cardinality\"\u003eCardinality\u003c/h3\u003e\n\u003cp\u003eAs said before, it\u0026rsquo;s the number of unique values that a column contains; it\u0026rsquo;s an important measure for calculating the size of the column, which will in turn impacts the VertiPaq performances. Here are some tricks for reducing cardinality:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRound floats whenever possible\u003c/li\u003e\n\u003cli\u003eFor images: store a URL string, PowerBI can\u0026rsquo;t process plain images\u003c/li\u003e\n\u003cli\u003eTransactions IDS: they are unique values, causing max cardinality, but are rarely used. Take them away\u003c/li\u003e\n\u003cli\u003eDate and Time: it\u0026rsquo;s better to split the Date column into two: a Date (with days only) and Time (with values from 00.00 to 23.59): there are some example scripts, reducing the cardinality of the Date table by A LOT. It\u0026rsquo;s a great way to optimize a model\u003c/li\u003e\n\u003cli\u003eAudit columns: they are rarely used (such as \u0026rsquo;last edited\u0026rsquo; and \u0026rsquo;last edited by\u0026rsquo;), don\u0026rsquo;t import them\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"calculated-columns-1\"\u003eCalculated Columns\u003c/h3\u003e\n\u003cp\u003eThey can be useful for optimization since they are evaluated row-by-row after a table refresh, but it\u0026rsquo;s always the case. Predicting if the performance will be better or worse is difficult because calculated columns aren\u0026rsquo;t as optimized as the \u0026rsquo;normal\u0026rsquo; columns on the DB. You have to try and compare the outputs. Usually, they are suggested when filtering and grouping data, and when considering boolean types.\u003c/p\u003e\n\u003cp\u003eRemember that unnecessary ID columns that aren\u0026rsquo;t used in the model have the highest cardinality and are just slowing down the model. Prioritize qualitative columns (such as category or date range) and import quantitative columns, which often have high cardinality, only if necessary.\u003c/p\u003e\n\u003ch2 id=\"19--analyzing-dax-queries\"\u003e19 üîÑ Analyzing DAX Queries\u003c/h2\u003e\n\u003cp\u003eWith DAX Studio it is possible to analyze all the queries we are making through PowerBI and recognize the slower ones. It\u0026rsquo;s shown that the Formula Engine creates a Logical Tree (by translating DAX into instructions) and then a Physical Tree (lower level instructions for the machine)\u003c/p\u003e\n\u003ch3 id=\"plans\"\u003ePlans\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDAX\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_14.png\" alt=\"DAX\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLogical Query Plan: it\u0026rsquo;s still easy to trace back its relationship with the original DAX version. In this case, it corresponds to ‚ÄúCreate a table with a column named Value, filled with the content of a SUM operation, performed by the storage engine by scanning the Quantity column in the Sales table.‚Äù\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_15.png\" alt=\"Logical Query Plan\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePhysical Query Plan: it looks similar to the Logical Tree, but it goes deeper, with different operators and a more complex structure, difficult to interpret. Some important details are hidden here though! Pay attention to ProjectionSpool, which shows the number of records picked up by the engine from the DB with a SQL query. Being the step a single thread and using memory, it could be a bottleneck\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_16.png\" alt=\"Physical Query Plan\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ethe XmSQL query generated by the Storage Engine\u0026rsquo;s ProjectionSpool, which is what the database will receive as input. This is just the SQL conversion of the previous step, you can\u0026rsquo;t intervene\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/definitive_guide_dax/dax_17.png\" alt=\"XmSQL\"\u003e\u003c/p\u003e\n\u003cp\u003eThen, there are some technicalities about xmSQL, not really my cup of tea. Just a final reminder: remember to clean up the cache before analyzing performances, since the engine stores previous datacaches in memory and the processing speed will be faster than in reality.\u003c/p\u003e\n\u003ch3 id=\"callbackdataid\"\u003eCallbackDataId\u003c/h3\u003e\n\u003cp\u003eIf in the DAX formula there are complex elements such as \u003ccode\u003eIF\u003c/code\u003e or \u003ccode\u003eSQRT\u003c/code\u003e, then the Formula Engine will insert in its XmSQL query plan the CallbackDataId statement. E.g. for a \u003ccode\u003eROUND\u003c/code\u003e, there will be something like\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$\u003c/span\u003eExpr0 :\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [CallbackDataID ( ROUND ( Sales[Line Amount]] ), \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e ) ]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e( PFDATAID ( Sales[Line Amount] ) )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSELECT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eSUM\u003c/span\u003e ( \u003cspan style=\"color:#f92672\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e$\u003c/span\u003eExpr0 )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e Sales;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThese calls are more expensive and they can\u0026rsquo;t be stored in the cache. Knowing that you can optimize some measures by using simple elements, like replacing a \u003ccode\u003eIF denominator != 0\u003c/code\u003estatement with a \u003ccode\u003eSUMX + FILTER (denominator \u0026lt;\u0026gt; 0)\u003c/code\u003e. Yeah, just avoid \u003ccode\u003eIF\u003c/code\u003es if you can. Of course, sometimes CallbackDataID must be used, there\u0026rsquo;s no problem\u0026hellip; Just be aware of that\u003c/p\u003e\n\u003ch2 id=\"20--optimizing-dax\"\u003e20 ‚ùì Optimizing DAX\u003c/h2\u003e\n\u003cp\u003eLast chapter with some ideas for speeding up executions, but it really depends on the data underneath so these aren\u0026rsquo;t fixed rules. Try every solution before accepting it.\u003c/p\u003e\n\u003cp\u003eThe optimization process in DAX is:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIdentify a SINGLE query in DAX. With complex formulas, try to break them down into smaller steps (well commented)\u003c/li\u003e\n\u003cli\u003eCreate a query in DAX Studio simulating the selected step. Use \u003ccode\u003eEVALUATE\u003c/code\u003e and \u003ccode\u003eCALCULATE(TABLE)\u003c/code\u003e as we have seen in Chapter 13. DAX Studio has a \u0026ldquo;Define Measure‚Äù button that already creates a query in the lateral panel, check it out!\u003c/li\u003e\n\u003cli\u003eAnalyze the execution times of the server and the information in the query plan\u003c/li\u003e\n\u003cli\u003eIdentify bottlenecks in both SE and FE. For example, if %SE \u0026raquo; %FE something\u0026rsquo;s wrong with the DAX formula. Start from the Storage Engine queries (both Physical and Logical) and see how many records are picking up\u003c/li\u003e\n\u003cli\u003eImplement changes and re-run the query to observe if the performances have improved\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"optimizing-dax-expressions\"\u003eOptimizing DAX expressions\u003c/h3\u003e\n\u003cp\u003eUsually, the causes of long runtimes of a DAX formula are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLonger scan times: cardinality matters here: the more unique values you have, the more time the scanning operators need\u003c/li\u003e\n\u003cli\u003eHigh Cardinality: same. It will be an issue for \u003ccode\u003eCOUNT\u003c/code\u003e and \u003ccode\u003eCALCULATE\u003c/code\u003e\u0026rsquo;s filters in particular\u003c/li\u003e\n\u003cli\u003eHigh presence of CallbackDataID: remember to use simple operators if you can\u003c/li\u003e\n\u003cli\u003eLarge Materialization: if the datacache is large, more RAM will be needed. Usually, this depends on the size of the data you want to analyze\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"tips\"\u003eTips\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eOptimizing filters: in \u003ccode\u003eCALCULATE\u003c/code\u003e statements, the filter parameter must act on columns and not on entire tables (avoiding both the use of shadow filters and storing the whole table in memory). You should use a \u003ccode\u003eKEEPFILTERS\u003c/code\u003e instead for keeping the current filters and then selecting just the columns you want\u003c/li\u003e\n\u003cli\u003eOptimizing context transition: this is more complex, please read the example. Here, instead of using a \u003ccode\u003eSUMX\u003c/code\u003e over \u003ccode\u003eCustomers, Sales Amount x Cashback %\u003c/code\u003e, the book uses \u003ccode\u003eSUMX\u003c/code\u003e over \u003ccode\u003eVALUES(Customer[Cashback%], Sales Amount x Cashback %\u003c/code\u003e. By just using \u003ccode\u003eVALUES\u003c/code\u003e and selecting only the visible cashback in the current filters, there is a smaller datacache in memory and a faster query. Otherwise, the default strategy would have been of calculating the cashback for every combination of customerKey in the table, and then filter\u003c/li\u003e\n\u003cli\u003eOptimizing \u003ccode\u003eIF\u003c/code\u003e conditions: \u003ccode\u003eIF\u003c/code\u003es are slow because they always need a CallbackDataID, and this can slow the query down, especially when multiple conditional checks happen for every row. Avoid them by using a \u003ccode\u003eCALCULATE\u003c/code\u003e+\u003ccode\u003eKEEPFILTERS\u003c/code\u003estatement during some edge cases (see example)\u003c/li\u003e\n\u003cli\u003eChoose between \u003ccode\u003eIF\u003c/code\u003e and \u003ccode\u003eDIVIDE\u003c/code\u003e: already mentioned before. For divisions, where you don\u0026rsquo;t want errors in the case of denominators == 0, use \u003ccode\u003eDIVIDE\u003c/code\u003e instead of an \u003ccode\u003eIF\u003c/code\u003e statement because the first is way better optimized\u003c/li\u003e\n\u003cli\u003eOptimizing \u003ccode\u003eIF\u003c/code\u003e in iterators: another strategy for avoiding slowdowns with conditional statements and iterations is to use two \u003ccode\u003eCALCULATE\u003c/code\u003e with filters. Again, see the example, sometimes this strategy can be slow, but it\u0026rsquo;s easily scalable\u003c/li\u003e\n\u003cli\u003eReducing the use of CallbackDataID: this is very nice; you can replace \u003ccode\u003eSUMX(Sales, Sales[Quantity] * ROUND(Sales[Net Price],0))\u003c/code\u003e with \u003ccode\u003eSUMX(VALUES(Sales[Net Price], CALCULATE(SUM(Sales[Quantity]) * ROUND(Sales[Net Price]0)\u003c/code\u003e and the engine will store part of the query in memory, speeding up future operations! Then CallbackDataID will be used for the second part, but at least it\u0026rsquo;s an improvement. Be careful that if Net Price has high cardinality the trick is useless\u003c/li\u003e\n\u003cli\u003eAvoid table filters for \u003ccode\u003eDISTINCTCOUNT\u003c/code\u003e: if used with a \u003ccode\u003eCALCULATE\u003c/code\u003e and a filter on, say, the Sales table, it will apply a query for each product! Slow, veeeery slow! The optimized version uses \u003ccode\u003eKEEPFILTERS(FILTER(ALL(Sales[Quantity], Sales[Net Price]), *your_filters)\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","description":"","image":"/images/definitive_guide_dax/cover.jpg","permalink":"http://localhost:1313/posts/2022/09/personal-notes-about-dax-definitive-guide/","title":"Personal Notes about The Definitive Guide to DAX"},{"content":"\u003cp\u003eI was feeling curious\u0026hellip; So, I decided to challenge myself and try to learn a bit more about \u003cem\u003e\u003cstrong\u003eCO\u003c/strong\u003emmon \u003cstrong\u003eB\u003c/strong\u003eusiness-\u003cstrong\u003eO\u003c/strong\u003eriented \u003cstrong\u003eL\u003c/strong\u003eanguage\u003c/em\u003e aka \u003ca href=\"https://en.wikipedia.org/wiki/COBOL\"\u003eCOBOL\u003c/a\u003e, invented in 1959 by IBM. It‚Äôs not the most popular among programmers, being extremely old and with huge limitations compared to today‚Äôs modern languages\u0026hellip; Yet, as we will see, it‚Äôs still alive, hidden in huge legacy codebases in the form of spaghetti code and difficult to get rid of without  an entire system redesign.\u003c/p\u003e\n\u003cp\u003eEspecially in the banking sector, this is a delicate topic because 3 trillion $ depend on COBOL code (95% of ATMs and 80% of all in-person credit card transaction are using it, \u003ca href=\"http://fingfx.thomsonreuters.com/gfx/rngs/USA-BANKS-COBOL/010040KH18J/\"\u003eReuters says\u003c/a\u003e), and few programmers want to mess up with something so critically important that‚Äôs still working reliably.\u003c/p\u003e\n\u003cp\u003eI also recommend \u003ca href=\"https://www.youtube.com/watch?v=7d7-etf-wNI\"\u003ethis brief introduction in 100 seconds\u003c/a\u003e if you are looking for a quick recap.\u003c/p\u003e\n\u003cp\u003eManaging legacy code of half a century ago is not my dream, but maybe, I thought, there\u0026rsquo;s something to learn from it! That\u0026rsquo;s why I\u0026rsquo;m here, sharing notes and personal thoughts about my overall experience with \u003ca href=\"https://www.ibm.com/blogs/ibm-training/free-course-announcing-learning-cobol-programming-with-vscode/\"\u003eIBM\u0026rsquo;s COBOL course for VS Code\u003c/a\u003e and this detailed tutorial by Derek Banas that saved me several times.\u003c/p\u003e\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/TBs7HXI76yU\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\u003e\u003c/iframe\u003e\r\n\u003ch2 id=\"cobols-essentials\"\u003eCOBOL\u0026rsquo;s essentials\u003c/h2\u003e\n\u003cp\u003eThe first impression isn\u0026rsquo;t great, since it\u0026rsquo;s such verbose language\u0026hellip; Let\u0026rsquo;s compare a‚ÄúHello World‚Äù in Python, JS, and COBOL:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# üêç Python\r\nprint(\u0026#39;Hello World\u0026#39;)\r\n\r\n# üë©‚Äçüíª Javascript\r\nconsole.log(\u0026#39;Hello World\u0026#39;)\r\n\r\n# üòØ COBOL\r\n000001 IDENTIFICATION DIVISION.\r\n000002 PROGRAM-ID.     HELLOWORLD.\r\n000003 ENVIRONMENT DIVISION.\r\n000004 CONFIGURATION SECTION.\r\n000005 DATA DIVISION.\r\n000006 PROCEDURE DIVISION.\r\n000007\r\n000008     DISPLAY \u0026#39;HELLO WORLD.\u0026#39;.\r\n000009     STOP RUN.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe line numbers and the indentation are peculiar because back in the day the code was written on physical punch cards!\nAlso, all the variables are global and have to be defined at the beginning of the code, in the WORKING-STORAGE SECTION. Since module imports are cumbersome, there\u0026rsquo;s a tendency of writing programs in monolithic blocks with so many declarations that finding unique names becomes a big issue.\u003c/p\u003e\n\u003cp\u003e\u003cdel\u003eIn addition, \u003ca href=\"https://stackoverflow.com/a/17616222\"\u003ebefore 2002, COBOL didn‚Äôt support comments\u003c/a\u003e. Imagine working on a codebase of 50 years ago, with millions of dollars depending on it, thousands of variables, and no way to understand who, why and how someone made that choice in the 60s.\u003c/del\u003e (UPDATE: \u003ca href=\"https://nvlpubs.nist.gov/nistpubs/Legacy/hb/nbshandbook106.pdf\"\u003ethat\u0026rsquo;s wrong, the presence of comments is mentioned in older textbooks\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eDespite its flaws, COBOL remains an easy language to learn and read, since it targets non-technical people by using English statements similar to SQL. It‚Äôs extremely stable and precise, thus its longevity.\u003c/p\u003e\n\u003ch2 id=\"how-to-setup-a-cobol-environment\"\u003eHow to setup a COBOL environment\u003c/h2\u003e\n\u003cp\u003eAt first, I laughed hard at Visual Studio Code displaying the punch card lines on the screen, but then the difficulties began when installing the compiler.\u003c/p\u003e\n\u003cp\u003eLuckily the Derek Banas video and \u003ca href=\"https://www.it-cooking.com/projects/how-to-install-gnucobol-for-cygwin/\"\u003ethis blog post\u003c/a\u003e contain a step-by-step installation guide. I‚Äôll leave you to them if you are really willing to follow my path, I want to keep the post lightweight. It was quite a complex process, luckily everything was well documented.\u003c/p\u003e\n\u003cp\u003eIn short, I had to install on my Windows machine:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.cygwin.com/\"\u003ecygwin\u003c/a\u003e, a sort of Linux distro on Windows\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gnucobol.sourceforge.io/\"\u003eGNUCOBOL\u003c/a\u003e, the compiler\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eALL\u003c/strong\u003e the libraries listed in \u003ca href=\"https://www.it-cooking.com/projects/how-to-install-gnucobol-for-cygwin/\"\u003ethe tutorial\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThen I ran the \u003ccode\u003e.configure\u003c/code\u003e script and waited for the completion (around 20 minutes). After that, I pasted the Hello World code of the previous paragraph into a hello.cob file and typed on cygwin \u003ccode\u003ecobc -x hello.cob \u0026amp;\u0026amp; ./hello\u003c/code\u003e to compile the code in a .exe and execute it.\u003c/p\u003e\n\u003ch2 id=\"what-i-did\"\u003eWhat I did\u003c/h2\u003e\n\u003cp\u003eI mostly messed around with COBOL‚Äôs basic commands, created some tables, an interactive menu, performed calculations and logical operations.\u003c/p\u003e\n\u003cp\u003eYou can find a folder with my experiments \u003ca href=\"https://github.com/mutt0-ds/cobol-experiments\"\u003ehere\u003c/a\u003e, most of them are taken from the Derek Banas tutorial.\u003c/p\u003e\n\u003cp\u003eAfter having coded a bit, I tackled \u003ca href=\"https://www.ibm.com/blogs/ibm-training/free-course-announcing-learning-cobol-programming-with-vscode/\"\u003eIBM‚Äôs course\u003c/a\u003e, which is not very long (16 hours, in theory, it took me way less to finish it because I already knew the basics) and adds some details about the different parts of a COBOL program, the differences between some versions and some simple patterns.\u003c/p\u003e\n\u003ch2 id=\"my-takeaways\"\u003eMy takeaways\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWith COBOL, creating long spaghetti code is extremely easy and often unavoidable. It‚Äôs not an OOP, all the variables are global, loops and functions are extremely verbose, and importing other modules is not so easy.\u003c/li\u003e\n\u003cli\u003eIt‚Äôs also very clear and stable, and a non-technical person can easily read the code and figure out what it does.\u003c/li\u003e\n\u003cli\u003eI can see why COBOL has been the standard for ATMs all over the world: it‚Äôs very powerful for making calculations, building reports and simple interactive menus to display on the terminal as an ATM does.\u003c/li\u003e\n\u003cli\u003eThere are several sections, for example for defining the data, the environment, the variables and then the process.\u003c/li\u003e\n\u003cli\u003eThe most annoying detail for me is that you have to define in advance (in the WORKING-STORAGE SECTION) the type and the size of the global variables you are going to use. If, for example, a string is longer than the N characters you‚Äôve assigned to its variable, well screw you, it will be truncated. If it‚Äôs shorter, then COBOL will add a bunch of spaces before it.\u003c/li\u003e\n\u003cli\u003eAlso, arrays start at 1. So weird!\u003c/li\u003e\n\u003cli\u003eI read that \u003ca href=\"https://www.hackerrank.com/blog/the-inevitable-return-of-cobol/\"\u003eCOBOL programmers are well paid because there‚Äôs a scarcity of them\u003c/a\u003e, but be aware: learning the language is simple, what companies are looking for is someone willing to maintain such a cumbersome legacy codebase, with the ability to understand its complexities.\u003c/li\u003e\n\u003cli\u003eThe stability and the rigidity of the language are evident, I can see why it‚Äôs so difficult to replace without adding bugs, especially on mathematical operations.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"what-have-i-learned\"\u003eWhat have I learned?\u003c/h2\u003e\n\u003cp\u003eStudying COBOL has certainly opened my eyes to how much technology has evolved during the years, but at the same time, I am fascinated by how this 63-year-old creature has kept many similarities to today‚Äôs stacks, for example with IF and SWITCH statements, tables, and functions. The basics are always the same.\u003c/p\u003e\n\u003cp\u003eI don‚Äôt recommend IBM‚Äôs course, verbose and not very intuitive (unless you want the certification?), while Derek‚Äôs tutorial helped in getting my hands dirty and with the setup.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s easy to make fun of COBOL and its archaic limits, but let‚Äôs not forget the people that were writing my same codes on punch cards, without IDEs, Stack Overflow, the Internet‚Ä¶ And this code written in such an ancient context is still up today, working incessantly, giving your money when you use the ATM. Jokes apart, I would be proud of it.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://i.imgflip.com/43g61a.jpg\" alt=\"COBOL meme\"\u003e\u003c/p\u003e\n","description":"","image":"/images/meme_cobol.jpg","permalink":"http://localhost:1313/posts/2022/09/my-surreal-experience-cobol/","title":"My surreal experience with COBOL"},{"content":"\u003cp\u003eI\u0026rsquo;m back with another post, this time exploring a new CSS framework, \u003ca href=\"https://tailwindcss.com/\"\u003eTailwind CSS\u003c/a\u003e!\u003c/p\u003e\n\u003cp\u003eIn the previous months I started using Angular and Typescript for some small web apps and dashboards, but I always found CSS management cumbersome. I could spend hours tweaking font-size and align-items parameters and hard-coding variables, and this wasn\u0026rsquo;t a lot of fun.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s why I decided to try Tailwind, which is being heavily recommended by many people in the frontend community! I just needed the right idea before starting to code\u0026hellip;\u003c/p\u003e\n\u003ch2 id=\"-the-dashboard\"\u003eüìä The Dashboard\u003c/h2\u003e\n\u003cp\u003eThe idea was: I want to show the books I\u0026rsquo;ve been reading, with a nice UI!\u003c/p\u003e\n\u003cp\u003eI deployed \u003ca href=\"https://my-personal-library.netlify.app/\"\u003ea live demo of my dashboard on Netlify\u003c/a\u003e, while if you are interested in the code, the public repository is \u003ca href=\"https://github.com/mutt0-ds/my-books-tailwind\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/my-books-tailwind/main/src/assets/demo.gif\" alt=\"demo\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/mutt0-ds/my-books-tailwind/blob/main/src/assets/selected-book.png?raw=true\" alt=\"book\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-the-dataset-my-books\"\u003eüìö The Dataset: My Books\u003c/h2\u003e\n\u003cp\u003eFor my experiment, I wanted to create something unique, not clones of existing websites or basic pages. Since I\u0026rsquo;m already keeping trace of the books I\u0026rsquo;m reading on a Notion Database, I exported the data from the past two years and used it as a small dataset.\nI would have liked to include my detailed notes, but since I write them only for personal use they were an embarrassing hybrid of Italo-English which was taking too long for a complete translation. This wasn\u0026rsquo;t a data cleaning project!\u003c/p\u003e\n\u003cp\u003eThus I only used the columns Rating (1-5 ‚≠ê), Brief Recap (a couple of lines\nI write for quickly presenting the book), Category, Author, Title and Date.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/notion-db-books.png\" alt=\"DB\"\u003e\u003c/p\u003e\n\u003ch2 id=\"-angular--tiltjs\"\u003eüì¶ Angular + tilt.js\u003c/h2\u003e\n\u003cp\u003eThe project has been created using the \u003ca href=\"https://angular.io/cli\"\u003eAngular CLI\u003c/a\u003e, and I kept it really simple: there are 3 components.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe \u003cem\u003eheader\u003c/em\u003e, where the user can filter the category of the books\u003c/li\u003e\n\u003cli\u003eThe \u003cem\u003esidebar\u003c/em\u003e, for selecting the books from a list\u003c/li\u003e\n\u003cli\u003eThe \u003cem\u003ebook\u003c/em\u003e component, showing the Book Card with some info about the item\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe most complex part, because I somehow managed to overcomplicate things, was to read and clean the data from the Notion export. It was just a small CSV, but as I said my notes were a bit messy so I cleaned them directly after the import.\u003c/p\u003e\n\u003cp\u003eI also wanted to have fun with a nice little library called \u003ca href=\"https://github.com/micku7zu/vanilla-tilt.js\"\u003evanilla-tilt.js\u003c/a\u003e, which gives that modern tilting effect to the Book Card.\u003c/p\u003e\n\u003ch2 id=\"-but-why-tailwind\"\u003eüå¨Ô∏è But why Tailwind?\u003c/h2\u003e\n\u003cp\u003eI started with the header and I immediately loved using Tailwind:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sticky top-0 left-0 h-12 md:h-16 w-screen bg-gray-200 shadow-lg z-10\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-w-xl flex flex-row\u0026#34;\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;\u003cspan style=\"color:#f92672\"\u003eh1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;flex items-center mx-5 md:text-xl text-sm text-blue-500 font-extrabold\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      Davide\u0026#39;s Library\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;/\u003cspan style=\"color:#f92672\"\u003eh1\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;/\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;/\u003cspan style=\"color:#f92672\"\u003ediv\u003c/span\u003e\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eIf you aren\u0026rsquo;t used to Tailwind\u0026rsquo;s unique paradigm, this may look messy. But in three lines the header was ready. Every class represented a CSS property: for example I wanted the header to be sticky at the top, so I gave it the \u003ccode\u003esticky\u003c/code\u003e, \u003ccode\u003etop: 0\u003c/code\u003e, \u003ccode\u003eleft: 0\u003c/code\u003e CSS properties using Tailwind classes. It\u0026rsquo;s very intuitive.\u003c/p\u003e\n\u003cp\u003eI also didn\u0026rsquo;t waste time with shadows: I applied the beautiful \u003ccode\u003eshadow-lg\u003c/code\u003e class and everything was ready.\u003c/p\u003e\n\u003cp\u003eIf you were wondering, \u003ccode\u003ebg-gray-200\u003c/code\u003e and \u003ccode\u003etext-blue-500\u003c/code\u003e are properties for defining the colors of the background and the text, using a \u003ca href=\"https://tailwindcss.com/docs/customizing-colors\"\u003edefault palette\u003c/a\u003e which I could configure in the settings.\u003c/p\u003e\n\u003cp\u003eIn the first hour I was a bit scared to create a monster with several lines of classes in my code, but in the end I found so useful to have HTML and CSS together in a single file. Everything was more intuitive, and I didn\u0026rsquo;t even have to tweak many Tailwind settings, except for a couple of animations I wanted to use. The default classes were already enough for such a simple site.\u003c/p\u003e\n\u003ch2 id=\"-mobile-responsive-you-say\"\u003eüì± Mobile Responsive you say?\u003c/h2\u003e\n\u003cp\u003eI quickly deployed the webpage using the \u003ca href=\"https://www.netlify.com/blog/2019/09/23/first-steps-using-netlify-and-angular/\"\u003eNetlify CLI\u003c/a\u003e and, excited, I sent it via Whatsapp to a friend\u0026hellip; Forgetting that I didn\u0026rsquo;t optimize it for mobile! He saw a messy screen because the Book Card was hovering over the sidebar and the header icons were too big.\u003c/p\u003e\n\u003cp\u003eIt\u0026rsquo;s no use crying over spilled milk. Sobbing, I started to see \u003ca href=\"https://tailwindcss.com/docs/responsive-design\"\u003ehow to optimize a mobile-responsive design with Tailwind\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"it-was-embarrassingly-trivial\"\u003eIt was embarrassingly trivial.\u003c/h3\u003e\n\u003cp\u003eI will use this code for the book card as an example: I wanted to display it right under the header if the screen was small (\u0026lsquo;md:\u0026rsquo; prefix in Tailwind means screen-size at most 1024px wide). On mobile, this avoids the issue of the card covering the sidebar, making some options unselectable.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-html\" data-lang=\"html\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eclass=\u0026#34;fixed md:top-1/3 md:w-1/2 md:h-96 lg:left-1/3 h-auto w-screen shadow-xl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebg-white rounded-lg overflow-hidden z-10\u0026#34; *ngIf=\u0026#34;!selectedBook\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eSo, if a book is selected (thus the presence of Angular\u0026rsquo;s *ngIf), based on the screen size of the device the page renders the card in the upper part of the screen with a fixed small height for keeping the proportions correct. If the device is large, the card starts to float in the right section of the screen with a bigger height.\u003c/p\u003e\n\u003cp\u003eOther options included a white background, rounded corner, z-index of 10 and hidden overflow. The result isn\u0026rsquo;t an amazing example of UI design, but I achieved my objective in 5 minutes straight with just a few classes: the sidebar was clickable and the card was easy to read.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/my-books-tailwind/main/src/assets/mobile.png\" alt=\"mobile\"\u003e\u003c/p\u003e\n\u003ch2 id=\"conclusions\"\u003eConclusions\u003c/h2\u003e\n\u003cp\u003eThere are lots of posts explaining why Tailwind CSS is a great framework, such as this \u003ca href=\"https://www.swyx.io/why-tailwind\"\u003eone\u003c/a\u003e and this \u003ca href=\"https://www.webdesignerdepot.com/2021/09/the-pros-and-cons-of-tailwind-css/\"\u003eone\u003c/a\u003e, showing more technical details such as PurgeCSS or how to enable dark mode. I wanted to add my personal experience.\u003c/p\u003e\n\u003cp\u003eWith small projects like my Book Library, it was easy to keep trace of all the long lines full of classes that I had to use for styling the HTML page, and, most importantly, I had a lot of fun while working. I loved the way I was already used to such a disruptive approach after only a few minutes of coding, how the IDE helped me with IntelliSense, how quickly the result started to look good. Tailwind improved my performance by about 20%/30%, since I spend lots of time tweaking my CSS.\u003c/p\u003e\n\u003cp\u003eIt may be counter-intuitive to use it in larger projects, where the bloated HTML could create confusion, but that\u0026rsquo;s a choice I don\u0026rsquo;t have to take right now. For the sake of truth, I recommend \u003ca href=\"https://johanronsse.be/2020/07/08/why-youll-probably-regret-using-tailwind/\"\u003ethis article\u003c/a\u003e showing a different opinion.\nI agree that the framework is going to add a layer of complexity and problems, but considering that styling isn\u0026rsquo;t my personal priority and I just want something quick and easy to use, I\u0026rsquo;m comfortable with that.\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;ll keep using Tailwind in my future projects after this positive experience.\u003c/p\u003e\n","description":"","image":"/images/selected-book.png","permalink":"http://localhost:1313/posts/2022/06/my-books-tailwind/","title":"First time with Tailwind CSS: showing off my books!"},{"content":"\u003cp\u003eHere\u0026rsquo;s the story of how I created my first full-stack project for monitoring my daily activities, using Python and SQL Server in backend and Appsmith for the GUI. I have a lot to learn and process yet, but hey, it\u0026rsquo;s a start.\u003c/p\u003e\n\u003ch2 id=\"-the-problem\"\u003eüòü The Problem\u003c/h2\u003e\n\u003cp\u003eThere are scripts I\u0026rsquo;m using that are particularly tedious to monitor. The typical structure is the following:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eLoad data\u003c/strong\u003e (from a file or manual input)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSend a request\u003c/strong\u003e to internal DB / very specific API\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCompare the data\u003c/strong\u003e received with the input and if something is wrong, notify me or a colleague.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThey must operate locally on specific machines, can\u0026rsquo;t be containerized, there are severe API limitations in some cases.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e‚ùî\u003c/strong\u003e I know that there are some amazing automation libraries like \u003ca href=\"https://airflow.apache.org/\"\u003eAirflow\u003c/a\u003e and \u003ca href=\"https://github.com/spotify/luigi\"\u003eLuigi\u003c/a\u003e, but I chose to not use them because I needed something simpler and more customizable. I also wanted to test myself and build a whole project to be used in my day-to-day work.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI also needed a custom dashboard (inspired by \u003ca href=\"https://airflow.apache.org/docs/apache-airflow/stable/ui.html\"\u003eAirflow\u0026rsquo;s one\u003c/a\u003e, to be used by my colleagues for monitoring the scripts assigned to their departments, opening tickets, and doing other unique actions.\u003c/p\u003e\n\u003ch2 id=\"-my-proposal\"\u003eüí° My Proposal\u003c/h2\u003e\n\u003cp\u003eIn my mind, my logger would consist of three parts:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eBackend\u003c/strong\u003e: a module to be imported by all the scripts that connect to the Database and store logging data and results. Since the majority of them are in Python, that\u0026rsquo;s the language I\u0026rsquo;m going to use.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDatabase\u003c/strong\u003e: a SQL Server Express instance we have already set up for other tasks in our local server.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFrontend\u003c/strong\u003e: I\u0026rsquo;m a newbie here; I needed something quick to spin up, hostable on the server, as easiest as possible to customize, capable to connect with our APIs. \u003ca href=\"https://www.appsmith.com/\"\u003eAppsmith\u003c/a\u003e was the right choice and I had a lot of fun with it.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"-backend-python-module-with-decorator\"\u003eüêå Backend: Python module with decorator\u003c/h2\u003e\n\u003cp\u003eMy starting point was a previously existing library, which was already imported by all the scripts for handling exceptions and crashes. Every script contains this kind of template in its \u003ccode\u003emain.py\u003c/code\u003e file:\u003c/p\u003e\n\u003ch5 id=\"old-alert-library\"\u003eOld Alert Library\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e alert_library\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# the script does its magic here\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e __name__\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    main()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    alert_library\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esend_error(e) \u003cspan style=\"color:#75715e\"\u003e# the module handles all the error cases and sends a report\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"the-joblogger-class\"\u003eThe JobLogger class\u003c/h5\u003e\n\u003cp\u003eFrom there, I rewrited the alert_library module into a so-called \u003ccode\u003ejob_logger\u003c/code\u003e, here\u0026rsquo;s its pseudo-code:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e helper_functions\u003cspan style=\"color:#f92672\"\u003e,\u003c/span\u003e db_functions\u003cspan style=\"color:#f92672\"\u003e,\u003c/span\u003e logging\u003cspan style=\"color:#f92672\"\u003e,\u003c/span\u003e etc...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@dataclass\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eJoblogger\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  job_id: int\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  status: str \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Pending\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003e__post_init__\u003c/span\u003e(self):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# looking for further data about the job in the db...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db_functions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget_job_data(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ejob_id)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ejob_name \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;job_name\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#self.other_useful_info = ...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebegin_job\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    to_upload \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;job_id\u0026#39;\u003c/span\u003e : self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e_job_id,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;h_begin\u0026#39;\u003c/span\u003e: datetime\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enow(),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;status\u0026#39;\u003c/span\u003e: self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estatus,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#75715e\"\u003e#other_useful_info...}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erow_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e db_functions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e_insert_on_db(to_upload)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efinish_job\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estatus \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Done\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    to_upload \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;status\u0026#39;\u003c/span\u003e: self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estatus,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;h_end\u0026#39;\u003c/span\u003e: datetime\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enow(),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;message\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;OK\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;needs_validation\u0026#39;\u003c/span\u003e: helper_functions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003echeck_validation(\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#75715e\"\u003e#other_useful_info...}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      db_functions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e_update_on_db(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erow_id, to_upload)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehandle_error\u003c/span\u003e(e: \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estatus \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ERROR\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    to_upload \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estatus,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;traceback\u0026#39;\u003c/span\u003e: traceback\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat_exc(limit\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, chain\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#75715e\"\u003e#other_useful_info...}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    db_functions\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e_update_on_db(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erow_id, to_upload)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# + old alert library for sending alerts\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eNow all the scripts have this structure:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e job_logger \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e JobLogger\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# the script does its magic here\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e __name__\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  logger \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e JobLogger()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    logger\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ebegin_job(job_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    main()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    logger\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efinish_job()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    alert_library\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehandle_error(e) \u003cspan style=\"color:#75715e\"\u003e# the module handles all the error cases and sends a report\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eMhhh\u0026hellip; slightly unkempt, verbose, and inconvenient to update for my tastes\u0026hellip; Let\u0026rsquo;s fashion a decorator so I don\u0026rsquo;t have to paste so many lines of code into every script!\u003c/p\u003e\n\u003ch3 id=\"the-joblogger-decorator\"\u003eThe JobLogger Decorator\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e job_logger \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e monitor_job\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@monitor_job\u003c/span\u003e(job_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# the script does its magic here\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e __name__\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  main()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eI admired this solution not only because it\u0026rsquo;s elegant, but eventually \u003cstrong\u003eif a colleague reads the code of the script, he won\u0026rsquo;t get confused by the logger logic\u003c/strong\u003e, and hence one can easily debug the code by commenting on just the decorator line. Simple, isn\u0026rsquo;t it?\u003c/p\u003e\n\u003ch2 id=\"-data-layer--sql-server-database\"\u003eüì¶ Data Layer : SQL Server Database\u003c/h2\u003e\n\u003cp\u003eNot an area I have much expertise in, albeit we simply have an existing instance of a SQL Server upon which I created a new Database as per my convenience. There aren‚Äôt a lot of scripts running every hour thus making the amount of data manageable to the point it could be handled even by SQLlite. The fascinating part is that I have already written a module for interacting with this specific database, administering all the permissions, etc.. (the scripts are run by distinct machines by separate owners). I won‚Äôt explore the DB logic upheld here, although the JobLogger database has a few tables:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cem\u003eUser Table\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eDepartment Table\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eJob Table\u003c/em\u003e, with all the details referencing the task, name, path, pc that should run it, scheduling details, and if it needs validation, etc\u0026hellip; The Key is the job_id, which is an auto incremental number, and therefore it\u0026rsquo;s significant to specify it in the Python decorator\u003c/li\u003e\n\u003cli\u003e\u003cem\u003eLog History Table\u003c/em\u003e, which is the most important part: the history of all the run activities, including logs, warnings, comments, starting and ending times. Every execution of the \u003ccode\u003emonitor_job\u003c/code\u003e function creates a new row on the table.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"-frontend--appsmith\"\u003eüìä Frontend : Appsmith\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.appsmith.com/\"\u003e\u003cstrong\u003eAppsmith\u003c/strong\u003e\u003c/a\u003e is an efficient open-source framework to build internal tools with lesser code, easy to spin up, and a charm to work with. I\u0026rsquo;m also studying Angular, but right now time is of the essence and a quick set-up is needed, with access control and unable to cause nuisance until I pick up further skillsets with TypeScript and Javascript (which are utilized in Appsmith widgets, yet there are a few lines).\u003c/p\u003e\n\u003cp\u003eAppsmith is \u003cem\u003eridicously easy\u003c/em\u003e to set up (just run \u003ca href=\"https://docs.appsmith.com/setup/docker#docker-compose-configuration\"\u003ethis docker-compose.yml\u003c/a\u003e), and I was able to connect my DB and the Slack API within a few minutes.\u003c/p\u003e\n\u003cp\u003eA noteworthy feature that remains is \u003cstrong\u003ethe entire Dashboard, including widgets, JS Objects, and connections that can be exported as a simple JSON file\u003c/strong\u003e and imported into another instance of Appsmith. I struck on this discovery when I restarted the docker image, losing all my progress with the test I was creating and struggled hours with the docker commands, until realizing I should download the JSON and store it as a backup. You can also piece it together with a Github repo having SSL.\u003c/p\u003e\n\u003cp\u003eHere‚Äôs \u003cstrong\u003ethe final result\u003c/strong\u003e: the \u0026ldquo;\u003cem\u003eDettagli\u003c/em\u003e\u0026rdquo; (Details) button contains additional information and a modal for opening a ticket. I connected a Sendgrid account to the App and quickly invited my colleague to share the fun!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/mutt0-ds.github.io/master/static//images/dashboard.jpg\" alt=\"Dashboard\"\u003e\u003c/p\u003e\n\u003ch2 id=\"conclusions\"\u003eConclusions\u003c/h2\u003e\n\u003cp\u003eAs a junior Software Engineer, I have long ways to have comprehensive app-building knowledge, but \u003cstrong\u003emy JobLogger project acts as an enlightening first step\u003c/strong\u003e. I employ it on a daily basis since it‚Äôs assisting my colleagues by monitoring our activities, which is excellent considering that I wasn‚Äôt even thinking about putting it on (internal) production!\u003c/p\u003e\n\u003cp\u003eMy satisfaction with this outcome of the project is high, as I am already working on embedding more features such as opening tickets for a particular task, and visualizing the scheduled jobs requisite on any day.\u003c/p\u003e\n\u003cp\u003eFun and educative experience indeed, thanks for reading my experience! See you on the next project!\u003c/p\u003e\n","description":"","image":"/images/dashboard.jpg","permalink":"http://localhost:1313/posts/2022/03/personal-airflow/","title":"My Personal Airflow - How I'm monitoring my scripts with Python, Appsmith and SQL Server"},{"content":"\u003cp\u003eWell, my GF\u0026rsquo;s tastes in memes are simple: she loves wholesome memes and, most importantly, \u003cstrong\u003eshe loves animals\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eThat\u0026rsquo;s why I created a fun little project that:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eSurfs the subreddit \u003ca href=\"https://www.reddit.com/r/wholesomememes/\"\u003er/wholesomemes\u003c/a\u003e using the reddit API\u003c/li\u003e\n\u003cli\u003eDownloads a few of the hottest memes in the contents folder\u003c/li\u003e\n\u003cli\u003eInitializes a ResNet50 model that recognizes images containing any animal\u003c/li\u003e\n\u003cli\u003eSends them via mail to my GF (positively welcomed)\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"final-email-3-memes-by-default\"\u003eFinal email (3 memes by default)\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"https://raw.githubusercontent.com/mutt0-ds/memes-selector/main/media/result.png\" alt=\"finalmail\"\u003e\u003c/p\u003e\n\u003ch3 id=\"reddit\"\u003eReddit\u003c/h3\u003e\n\u003cp\u003eI\u0026rsquo;m using the praw library for downloading the memes, it requires a Reddit Bot enabled.\nUse \u003ca href=\"https://yojji.io/blog/how-to-make-a-reddit-bot\"\u003ethis guide\u003c/a\u003e for creating one, it\u0026rsquo;s a quick process.\u003c/p\u003e\n\u003ch3 id=\"resnet50\"\u003eResNet50\u003c/h3\u003e\n\u003cp\u003eResNet50 (\u003ca href=\"https://keras.io/api/applications/resnet/\"\u003emore info here\u003c/a\u003e) is an Image Recognition model that outputs a probability score (which I\u0026rsquo;m ignoring at the moment) and one of the 1000 labels available. The labels are mapped in the imagenet_class_index, and the first 397 are about animals (mostly cats and dogs).\nSo, if the model\u0026rsquo;s predicted label is in that sublist, we can classify the meme as \u0026ldquo;containing animals\u0026rdquo;.\u003c/p\u003e\n\u003ch3 id=\"email\"\u003eEmail\u003c/h3\u003e\n\u003cp\u003eI\u0026rsquo;m using smtplib for sending the email, so it just requires the email and password of the sender and the email of the receiver.\u003c/p\u003e\n\u003ch3 id=\"code\"\u003eCode\u003c/h3\u003e\n\u003cp\u003eSource code \u003ca href=\"https://github.com/mutt0-ds/memes-selector\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n","description":"","image":"/images/meme_example.png","permalink":"http://localhost:1313/posts/2021/05/nn-sending-memes/","title":"Using a Neural Network for sending memes to my girlfriend"}]